{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"SquatchCut (logo placeholder)","text":"<p>SquatchCut is a cryptid-powered nesting workbench for FreeCAD that extracts panels, nests them, and exports reports.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>FreeCAD workbench with panel extraction and nesting</li> <li>CSV import (optional per-part rotation) and TypeScript validation tools</li> <li>Multi-sheet rectangular nesting with kerf/gap controls and per-part 0\u00b0/90\u00b0 rotation</li> <li>Geometry generation and PDF/CSV reporting plus manual \u201cExport Nesting CSV\u201d dialog</li> <li>Embedded Codex workflows for guided development</li> </ul>"},{"location":"#explore","title":"Explore","text":"<ul> <li>Getting Started</li> <li>User Guide</li> <li>Developer Guide</li> </ul>"},{"location":"TESTING/","title":"SquatchCut Testing &amp; QA Guide","text":"<p>This document explains how to test the SquatchCut workbench, both automatically (pytest and integration tests) and manually inside FreeCAD.</p> <p>It is written assuming: - You have this repository cloned. - You have Python and FreeCAD installed. - You are comfortable using a terminal (e.g., VS Code terminal).</p>"},{"location":"TESTING/#1-core-tests-no-freecad-required","title":"1. Core Tests (No FreeCAD Required)","text":"<p>These tests cover the pure Python core logic under <code>freecad/SquatchCut/core</code> (imported as <code>SquatchCut.core</code>): - Nesting algorithm (no overlaps, rotation, multiple sheets). - Session state storage (sheet size, kerf, gap, last layout).</p>"},{"location":"TESTING/#11-setup-first-time","title":"1.1. Setup (first time)","text":"<p>Create and activate a virtual environment:</p> <pre><code>python3 -m venv .venv\nsource .venv/bin/activate\n</code></pre> <p>Install test dependencies:</p> <pre><code>pip install pytest pytest-cov\n</code></pre>"},{"location":"TESTING/#12-run-core-tests","title":"1.2. Run core tests","text":"<p>From the repository root:</p> <pre><code>pytest -v\n</code></pre> <p>Or with coverage (core modules exercised by the unit tests):</p> <pre><code>pytest --cov=SquatchCut.core.nesting --cov=SquatchCut.core.session_state --cov-report=term-missing -v\n</code></pre> <p>Expected results:</p> <ul> <li>All tests in <code>tests/</code> should pass.</li> <li>For <code>test_nesting.py</code> you should see test names such as:</li> <li><code>test_nesting_no_overlap_simple</code></li> <li><code>test_nesting_respects_can_rotate</code></li> <li><code>test_nesting_multiple_sheets</code></li> <li><code>test_nesting_rotation_flag_preserved</code></li> </ul> <p>If any test fails, pytest will show: - The test name. - The failing assertion. - The inputs that caused the failure.</p> <p>Use this output to debug the core logic before touching FreeCAD.</p>"},{"location":"TESTING/#2-freecad-integration-tests","title":"2. FreeCAD Integration Tests","text":"<p>These tests run inside FreeCAD and exercise real commands: - Creating rectangles in a document. - Running <code>RunNestingCommand</code>. - Verifying that <code>Sheet_*</code> groups and clones exist. - Verifying that running nesting with no selection does not crash.</p>"},{"location":"TESTING/#21-ensure-pytest-is-installed-in-freecad","title":"2.1. Ensure pytest is installed in FreeCAD","text":"<p>You only need to do this once per FreeCAD Python environment:</p> <pre><code>FreeCADCmd -c \"import sys, subprocess; subprocess.check_call([sys.executable, '-m', 'pip', 'install', 'pytest'])\"\n</code></pre> <p>On macOS with the official FreeCAD .app, <code>FreeCADCmd</code> is usually:</p> <pre><code>/Applications/FreeCAD.app/Contents/MacOS/FreeCADCmd\n</code></pre> <p>So the command becomes:</p> <pre><code>/Applications/FreeCAD.app/Contents/MacOS/FreeCADCmd -c \"import sys, subprocess; subprocess.check_call([sys.executable, '-m', 'pip', 'install', 'pytest'])\"\n</code></pre>"},{"location":"TESTING/#22-run-integration-tests","title":"2.2. Run integration tests","text":"<p>From the repository root:</p> <pre><code>FreeCADCmd -c \"import run_freecad_tests\"\n</code></pre> <p>(Or using the full path to <code>FreeCADCmd</code> as above.)</p> <p>This will run the tests in <code>tests_integration/</code>.</p> <p>Expected results:</p> <ul> <li><code>test_run_nesting_creates_sheet_groups_and_clones</code> passes:</li> <li>At least one <code>Sheet_*</code> group exists.</li> <li>There are at least as many clones as input panels.</li> <li><code>test_run_nesting_no_selection_shows_no_crash</code> passes:</li> <li>Running nesting with no selection does not create any <code>Sheet_*</code> groups.</li> <li>No exception bubbles out of the command.</li> </ul> <p>Integration tests are a quick sanity check that the workbench actually behaves correctly inside FreeCAD with real documents.</p>"},{"location":"TESTING/#3-manual-qa-checklist-in-freecad","title":"3. Manual QA Checklist in FreeCAD","text":"<p>Use this checklist when doing manual QA in FreeCAD. This is especially important before a release or when major changes are made to nesting, CSV import, or settings.</p>"},{"location":"TESTING/#31-settings-panel","title":"3.1. Settings panel","text":"<ol> <li>Open FreeCAD.</li> <li>Create or open a document.</li> <li>From the SquatchCut workbench, run the SquatchCut Settings command.</li> <li>In the settings panel:</li> <li>Change sheet width and height.</li> <li>Change kerf (mm) and gap (mm).</li> <li>Toggle \"Allow rotation by default\".</li> <li>Click OK.</li> <li>Verify:</li> <li>The Report View shows an updated settings message.</li> <li>Re-opening the Settings panel shows the same values you entered.</li> <li>Sheet size values are respected by the next nesting operation.</li> </ol>"},{"location":"TESTING/#32-csv-import-with-rotation-specified","title":"3.2. CSV import with rotation specified","text":"<ol> <li>Prepare a CSV with:</li> <li><code>id,width_mm,height_mm,allow_rotate</code></li> <li>Some rows with <code>allow_rotate=1</code>, some with <code>allow_rotate=0</code>.</li> <li>Use the SquatchCut CSV import command to load this file.</li> <li>Verify:</li> <li>Panels are created in the document.</li> <li>Each imported panel has a <code>SquatchCutCanRotate</code> property:<ul> <li><code>True</code> for <code>allow_rotate=1</code>.</li> <li><code>False</code> for <code>allow_rotate=0</code>.</li> </ul> </li> <li>Run nesting:</li> <li>Check that some panels are rotated (those allowed).</li> <li>Panels with <code>allow_rotate=0</code> must never be rotated.</li> </ol>"},{"location":"TESTING/#33-csv-import-without-rotation-column-default-behavior","title":"3.3. CSV import without rotation column (default behavior)","text":"<ol> <li>Prepare a CSV without <code>allow_rotate</code> column.</li> <li>In the Settings panel, set:</li> <li>\"Allow rotation by default\" = ON.</li> <li>Import the CSV and run nesting.</li> <li>Verify:</li> <li> <p>Panels are allowed to rotate and will rotate when beneficial.</p> </li> <li> <p>Set \"Allow rotation by default\" = OFF.</p> </li> <li>Import the same CSV again and run nesting.</li> <li>Verify:</li> <li>No panels are rotated (all rotation_deg = 0 in the export).</li> </ol>"},{"location":"TESTING/#34-nesting-placement-no-overlaps-multiple-sheets","title":"3.4. Nesting placement (no overlaps, multiple sheets)","text":"<ol> <li>Create multiple rectangles of varying sizes in a document.</li> <li>Run nesting.</li> <li>Verify:</li> <li><code>Sheet_*</code> groups are created.</li> <li>No shapes overlap visually.</li> <li>If the total area is large, more than one sheet is used.</li> </ol>"},{"location":"TESTING/#35-csv-export-of-nesting","title":"3.5. CSV export of nesting","text":"<ol> <li>Perform a nesting as above.</li> <li>Run the Export Nesting CSV command.</li> <li>Choose a filename and save.</li> <li>Open the CSV in a spreadsheet viewer.</li> <li>Verify:</li> <li>Header includes: <code>sheet_index,part_id,width_mm,height_mm,x_mm,y_mm,angle_deg</code>.</li> <li>Each input part appears exactly once in the CSV output.</li> <li><code>sheet_index</code> values correspond to the FreeCAD <code>Sheet_*</code> groups.</li> <li><code>angle_deg</code> is 0 for non-rotated parts and 90 for rotated parts.</li> </ol>"},{"location":"TESTING/#36-error-handling","title":"3.6. Error handling","text":"<ol> <li>Try to import a CSV missing required columns (e.g., no id or width).</li> <li>Expect: a friendly error dialog explaining missing columns.</li> <li>Try running nesting with no panels selected.</li> <li>Expect: a warning dialog and no sheets created.</li> <li>Try exporting CSV before any nesting has been run.</li> <li>Expect: a message that no layout is available to export.</li> </ol>"},{"location":"TESTING/#4-useful-pytest-options","title":"4. Useful pytest options","text":"<p>For deeper debugging, use:</p> <pre><code>pytest -vv\n</code></pre> <p>This prints each test name and makes it easier to see exactly which scenario passed or failed.</p> <p>To focus on a single test file:</p> <pre><code>pytest -vv tests/test_nesting.py\n</code></pre> <p>Or a single test within that file:</p> <pre><code>pytest -vv tests/test_nesting.py::test_nesting_no_overlap_simple\n</code></pre>"},{"location":"TESTING/#5-summary","title":"5. Summary","text":"<ul> <li>Run core tests regularly during development (<code>pytest -v</code>).</li> <li>Run FreeCAD integration tests before major changes or releases.</li> <li>Use the manual QA checklist when you need to validate end-to-end   behavior in a FreeCAD GUI session.</li> <li>If any step above fails, capture:</li> <li>The exact test command you ran.</li> <li>The console/Report View output.</li> <li>A copy of the CSV or file that triggered the issue.   And open a bug ticket with this information.</li> </ul>"},{"location":"UAT_Checklist/","title":"SquatchCut UAT \u2013 UI Navigation &amp; Core Features","text":"<p>This checklist verifies that SquatchCut works correctly for end-users who don\u2019t write code. Please follow the steps in order and mark Pass or Fail for each item.</p> <p>If something fails or confuses you, leave a short note.</p>"},{"location":"UAT_Checklist/#instructions","title":"Instructions","text":"<ul> <li>Open FreeCAD.</li> <li>Make sure SquatchCut is installed.</li> <li>Keep this checklist open while performing each step.</li> <li>Do not skip steps.</li> <li>Do not fix anything \u2014 just observe and record.</li> </ul>"},{"location":"UAT_Checklist/#uat-checklist-table","title":"UAT Checklist Table","text":"# Action Expected Result Pass/Fail Notes 1 Open FreeCAD and load a new or existing document. FreeCAD opens normally. 2 Locate the SquatchCut toolbar/menu/command. SquatchCut commands are visible (Settings, Import CSV, Set Sheet Size). 3 Click SquatchCut Settings. The Tasks panel opens, displaying all settings. 4 Review the Settings panel UI. All fields are readable and not cut off. 5 Change a setting (e.g., spacing or sheet default). Setting updates without error. 6 Close and reopen the Settings panel. Values persist or reset as designed (no errors). 7 Click Import CSV. File chooser opens. 8 Select the provided <code>test_parts.csv</code>. CSV imports without errors. 9 Verify imported parts list (if shown). Data matches the CSV; formatting is correct. 10 Click Set Sheet Size. Sheet size dialog or panel appears. 11 Enter a valid sheet size. Size accepted without error. 12 Enter an invalid sheet size (0 or negative). UI blocks the value or shows a clear warning. 13 Click Run Nesting. Nesting runs and completes without crashing. 14 Look at the nesting result view. Parts appear on the sheet successfully. 15 Visually inspect for overlapping parts. No parts overlap; spacing looks correct. 16 Compare part count to the CSV. Number of parts placed matches CSV. 17 If multiple sheets were used, switch between them. Navigation between sheets works. 18 Zoom and pan around the layout. Smooth interaction; parts stay visible. 19 Export the layout (if available). File exports without error. 20 Open the exported file. File opens and matches the on-screen result. 21 Close FreeCAD without saving. App closes cleanly. 22 Reopen FreeCAD and repeat steps 2\u20134. SquatchCut remains available and functional."},{"location":"UAT_Checklist/#completion","title":"Completion","text":"<p>When finished:</p> <ul> <li>Save this checklist (PDF or exported text)</li> <li>Send it along with your notes and screenshots to Steven</li> </ul> <p>Thank you for testing SquatchCut!</p>"},{"location":"UAT_Prep_Instructions/","title":"Volunteer UAT Prep Instructions (For Regular Humans)","text":"<p>These instructions are for volunteer testers who are helping validate SquatchCut. You do not need to know GitHub, Python, or anything even remotely technical. If you can open FreeCAD and follow a checklist, you\u2019re qualified.</p>"},{"location":"UAT_Prep_Instructions/#before-you-start","title":"Before You Start","text":"<p>You must have:</p> <ul> <li>A computer (Windows, Mac, or Linux)</li> <li>FreeCAD 1.0 or newer installed</li> <li>The SquatchCut add-on ZIP file provided to you</li> <li>The sample CSV file: <code>test_parts.csv</code></li> <li>The UAT Checklist document (PDF or Markdown)</li> </ul> <p>You do not need: - A GitHub account - GitHub Desktop - Any coding tools - To install or configure Python - To understand what \u201cUAT\u201d stands for (but it\u2019s \u201cUser Acceptance Testing\u201d)</p>"},{"location":"UAT_Prep_Instructions/#how-to-install-squatchcut","title":"How to Install SquatchCut","text":"<ol> <li>Open FreeCAD.</li> <li>Go to the top menu: Tools \u2192 Add-on Manager.</li> <li>In the Add-on Manager, click Install from ZIP.</li> <li>Select the SquatchCut ZIP file you were given.</li> <li>Wait for installation to finish.</li> <li>Restart FreeCAD.</li> </ol> <p>That\u2019s it\u2014you\u2019re ready to test.</p>"},{"location":"UAT_Prep_Instructions/#files-you-will-receive","title":"Files You Will Receive","text":"<p>You will be provided with:</p> <ul> <li> <p>test_parts.csv   A small cut list for testing.</p> </li> <li> <p>UAT_Checklist   The step-by-step process you will follow.</p> </li> <li> <p>UAT_Feedback_Form.txt   A simple notes file for reporting anything weird.</p> </li> <li>Metric and Imperial test CSVs   If you use the imperial CSV, set CSV units to \u201cImperial (in)\u201d before importing.</li> </ul>"},{"location":"UAT_Prep_Instructions/#how-to-run-the-test","title":"How to Run the Test","text":"<ol> <li>Open the UAT Checklist.</li> <li>Follow each step in order (1\u201322).</li> <li>For each step, mark:</li> <li>Pass \u2192 everything worked  </li> <li>Fail \u2192 something didn\u2019t behave as expected  </li> <li>Add notes only when:</li> <li>Something is confusing</li> <li>Something behaves incorrectly</li> <li> <p>FreeCAD crashes or behaves unexpectedly</p> </li> <li> <p>When finished, send back:</p> </li> <li>The completed checklist  </li> <li>The feedback form  </li> <li>Any screenshots (if applicable)</li> </ol>"},{"location":"UAT_Prep_Instructions/#how-to-take-screenshots","title":"How to Take Screenshots","text":"<p>If something breaks or looks strange, take a screenshot.</p> <ul> <li>Windows: Press <code>Win + Shift + S</code></li> <li>Mac: Press <code>Command + Shift + 4</code></li> <li>Linux: Try <code>PrintScreen</code> (this can vary by system)</li> </ul> <p>Screenshots help tremendously.</p>"},{"location":"UAT_Prep_Instructions/#what-not-to-do","title":"What NOT to Do","text":"<p>Please avoid the following:</p> <ul> <li>\u274c Do not install GitHub Desktop  </li> <li>\u274c Do not try to open or edit the source code  </li> <li>\u274c Do not rename the CSV file  </li> <li>\u274c Do not upload anything to GitHub  </li> <li>\u274c Do not contact the developer tools or open GitHub issues directly  </li> <li>\u274c Do not try to troubleshoot crashes (just write it down)</li> </ul> <p>Your job is to run the test \u2014 not fix the test.</p>"},{"location":"UAT_Prep_Instructions/#when-youre-done","title":"When You\u2019re Done","text":"<p>Email or message Steven:</p> <ul> <li>The completed checklist  </li> <li>The feedback/notes file  </li> <li>Screenshots if you took any  </li> </ul> <p>Thank you for helping make SquatchCut better.</p>"},{"location":"architecture/","title":"Architecture","text":"<p>This document defines the technical architecture of the SquatchCut FreeCAD Nesting Workbench MVP. It outlines the project structure, module responsibilities, data flow, and Codex conventions to ensure consistent implementation.</p>"},{"location":"architecture/#1-project-structure","title":"1. Project Structure","text":"<p>The repository is organized as follows:</p> <p>root/ \u2502 \u251c\u2500\u2500 freecad/ \u2502 \u2514\u2500\u2500 SquatchCut/ \u2502 \u251c\u2500\u2500 InitGui.py \u2502 \u251c\u2500\u2500 init.py \u2502 \u251c\u2500\u2500 gui/ \u2502 \u2502 \u251c\u2500\u2500 commands/ \u2502 \u2502 \u2502 \u251c\u2500\u2500 cmd_add_shapes.py \u2502 \u2502 \u2502 \u251c\u2500\u2500 cmd_import_csv.py \u2502 \u2502 \u2502 \u251c\u2500\u2500 cmd_run_nesting.py \u2502 \u2502 \u2502 \u251c\u2500\u2500 cmd_set_sheet_size.py \u2502 \u2502 \u2502 \u251c\u2500\u2500 cmd_export_report.py \u2502 \u2502 \u2502 \u2514\u2500\u2500 cmd_preferences.py \u2502 \u2502 \u2514\u2500\u2500 dialogs/ \u2502 \u2502 \u251c\u2500\u2500 dlg_select_shapes.py \u2502 \u2502 \u251c\u2500\u2500 dlg_csv_import.py \u2502 \u2502 \u251c\u2500\u2500 dlg_sheet_size.py \u2502 \u2502 \u251c\u2500\u2500 dlg_run_nesting.py \u2502 \u2502 \u2514\u2500\u2500 dlg_export_report.py \u2502 \u2502 \u2502 \u251c\u2500\u2500 core/ \u2502 \u2502 \u251c\u2500\u2500 shape_extractor.py \u2502 \u2502 \u251c\u2500\u2500 csv_loader.py \u2502 \u2502 \u251c\u2500\u2500 nesting_engine.py \u2502 \u2502 \u251c\u2500\u2500 multi_sheet_optimizer.py \u2502 \u2502 \u251c\u2500\u2500 geometry_output.py \u2502 \u2502 \u251c\u2500\u2500 report_generator.py \u2502 \u2502 \u2514\u2500\u2500 preferences.py \u2502 \u2514\u2500\u2500 resources/ \u2502 \u251c\u2500\u2500 icons/ \u2502 \u2514\u2500\u2500 ui/ \u2502 \u2514\u2500\u2500 docs/ \u251c\u2500\u2500 mvp.md \u251c\u2500\u2500 architecture.md \u2514\u2500\u2500 roadmap.md</p>"},{"location":"architecture/#2-module-responsibilities","title":"2. Module Responsibilities","text":""},{"location":"architecture/#21-core-modules","title":"2.1 <code>/core</code> modules","text":""},{"location":"architecture/#shape_extractorpy","title":"shape_extractor.py","text":"<ul> <li>Scans FreeCAD document for valid shapes</li> <li>Extracts bounding boxes (width, height)</li> <li>Converts shapes to panel objects</li> <li>Enforces rotation rules</li> <li>Filters by user selection</li> </ul>"},{"location":"architecture/#csv_loaderpy","title":"csv_loader.py","text":"<ul> <li>Loads CSV into panel objects</li> <li>Validates fields</li> <li>Normalizes types and units</li> <li>Produces list of panels</li> </ul>"},{"location":"architecture/#nesting_enginepy","title":"nesting_engine.py","text":"<ul> <li>Implements rectangular nesting (Skyline or Guillotine)</li> <li>Places panels at (x, y) with rotation</li> <li>Detects collisions + boundaries</li> <li>Produces placements for one sheet</li> </ul>"},{"location":"architecture/#multi_sheet_optimizerpy","title":"multi_sheet_optimizer.py","text":"<ul> <li>Uses nesting_engine repeatedly</li> <li>Allocates panels across sheets</li> <li>Stops when all panels placed</li> <li>Returns a list of sheets + placements</li> </ul>"},{"location":"architecture/#geometry_outputpy","title":"geometry_output.py","text":"<ul> <li>Creates FreeCAD geometry for each sheet</li> <li>Adds groups and rectangles</li> <li>Applies x, y placement, rotation, and labeling</li> </ul>"},{"location":"architecture/#report_generatorpy","title":"report_generator.py","text":"<ul> <li>Builds a PDF summary:</li> <li>Sheet count</li> <li>Panel placements</li> <li>Efficiency / waste %</li> <li>Timestamp</li> <li>Builds CSV summary</li> </ul>"},{"location":"architecture/#preferencespy","title":"preferences.py","text":"<ul> <li>Wraps FreeCAD preference system</li> <li>Stores:</li> <li>Default sheet size</li> <li>Kerf/spacing</li> <li>Rotation allowed</li> <li>Auto-detect shapes</li> <li>Export directory</li> <li>Branding toggle</li> </ul>"},{"location":"architecture/#3-gui-layer","title":"3. GUI Layer","text":""},{"location":"architecture/#31-workbench-setup","title":"3.1 Workbench Setup","text":""},{"location":"architecture/#initguipy","title":"<code>InitGui.py</code>","text":"<ul> <li>Registers SquatchCut workbench</li> <li>Adds toolbar buttons</li> <li>Loads icons</li> </ul>"},{"location":"architecture/#__init__py","title":"<code>__init__.py</code>","text":"<ul> <li>Metadata</li> <li>Bootstrapping</li> </ul>"},{"location":"architecture/#32-commands","title":"3.2 Commands","text":"<p>Each command lives inside <code>/gui/commands</code>:</p> <ul> <li><code>cmd_add_shapes.py</code></li> <li><code>cmd_import_csv.py</code></li> <li><code>cmd_run_nesting.py</code></li> <li><code>cmd_set_sheet_size.py</code></li> <li><code>cmd_export_report.py</code></li> <li><code>cmd_preferences.py</code></li> </ul> <p>Commands:</p> <ul> <li>Call dialogs</li> <li>Trigger core functions</li> <li>Update UI</li> </ul>"},{"location":"architecture/#33-dialogs","title":"3.3 Dialogs","text":"<p>Each dialog in <code>/gui/dialogs</code> handles user input:</p> <ul> <li>Select shapes</li> <li>Import CSV</li> <li>Sheet size configuration</li> <li>Nesting run settings</li> <li>Export settings</li> </ul> <p>Dialogs emit structured data for core modules.</p>"},{"location":"architecture/#4-data-model","title":"4. Data Model","text":""},{"location":"architecture/#panel-object","title":"Panel Object","text":"<p>{ \"id\": str, \"width\": float, \"height\": float, \"rotation_allowed\": bool, }</p>"},{"location":"architecture/#placement-object","title":"Placement Object","text":"<p>{ \"panel_id\": str, \"x\": float, \"y\": float, \"rotation\": int, # 0 or 90 \"sheet_id\": int }</p>"},{"location":"architecture/#sheet-object","title":"Sheet Object","text":"<p>{ \"sheet_id\": int, \"width\": float, \"height\": float, \"placements\": list[Placement] }</p>"},{"location":"architecture/#5-data-flow","title":"5. Data Flow","text":"<p>FreeCAD Shapes \u2500\u2500\u2500\u2500\u2500\u2500\u25ba shape_extractor CSV File \u2500\u2500\u2500\u2500\u2500\u2500\u25ba csv_loader</p> <p>Extracted Panels \u25bc multi_sheet_optimizer \u25bc nesting_engine (per sheet) \u25bc Sheet Placement Sets \u25bc geometry_output \u2500\u2500\u25ba FreeCAD Document report_generator \u2500\u2500\u25ba PDF / CSV</p>"},{"location":"architecture/#6-codex-conventions","title":"6. Codex Conventions","text":"<p>Codex must follow these rules when generating code:</p>"},{"location":"architecture/#61-use-codex-blocks","title":"6.1 Use <code>@codex</code> blocks","text":"<p>Example:</p> <pre><code>\"\"\"\n@codex\nImplement the NestingEngine class.\nRequirements:\n- Do not use recursion.\n- Accept list of panels + sheet size.\n- Return list of placements.\n\"\"\"\n6.2 Avoid global state\nModules must be pure where possible.\n\n6.3 Small functions\nBreak complex logic into testable units.\n\n6.4 FreeCAD imports must be lazy\nimport FreeCAD as App\nimport FreeCADGui as Gui\n\n6.5 Use unified logging\nfrom .preferences import log\n\n7. Future Expansion (Post-MVP Hooks)\nArchitecture reserves space for:\nBookmatching\nGrain direction optimization\nCurved/polygon nesting\nAdvanced nesting heuristics\nPath Workbench integration\nMaterial libraries\nDrag-and-drop sheet editing\nThese will attach cleanly onto existing modules without rewriting MVP code.\n</code></pre>"},{"location":"codex_workflows/","title":"Codex Automation Workflows","text":""},{"location":"codex_workflows/#overview","title":"Overview","text":"<ul> <li>This repository uses @codex headers in each module to guide incremental development.</li> <li>Each module documents its own responsibility, boundaries, and expectations to keep changes targeted.</li> </ul>"},{"location":"codex_workflows/#global-codex-commands","title":"Global Codex Commands","text":"<ol> <li><code>@codex implement next core logic</code></li> <li> <p>Codex should examine method stubs in core modules and fill in the next unimplemented piece.</p> </li> <li> <p><code>@codex update feature &lt;X&gt;</code></p> </li> <li> <p>Codex should locate the correct module(s) using headers, update logic, and avoid touching unrelated modules.</p> </li> <li> <p><code>@codex refactor safely</code></p> </li> <li> <p>Codex should refactor only the module containing the comment without changing structure or deleting headers.</p> </li> <li> <p><code>@codex sync architecture</code></p> </li> <li> <p>Codex should compare code with docs/architecture.md and fix inconsistencies.</p> </li> <li> <p><code>@codex integrate GUI</code></p> </li> <li> <p>Codex should update dialogs and commands to work with the current state of the core logic.</p> </li> <li> <p><code>@codex implementation status</code></p> </li> <li>Codex should scan headers and list which modules have remaining TODO implementations.</li> </ol>"},{"location":"codex_workflows/#rules-for-codex","title":"Rules for Codex","text":"<ul> <li>Do not overwrite files.</li> <li>Only modify sections relevant to the active module.</li> <li>Follow @codex header expectations.</li> <li>Preserve docstrings and method signatures.</li> <li>Never introduce cross-module logic.</li> </ul>"},{"location":"mvp/","title":"MVP Scope","text":"<p>FreeCAD Nesting Workbench Version: MVP Specification Author: Steven + ChatGPT</p>"},{"location":"mvp/#mvp-overview","title":"\ud83c\udfaf MVP Overview","text":"<p>SquatchCut is a FreeCAD Workbench that extracts 2D shapes from a user's active project, nests them across multiple sheets using rectangular optimization, generates layout geometry inside FreeCAD, and exports a full PDF/CSV report. CSV import is supported as a fallback, but the primary workflow is extracting geometry from FreeCAD.</p> <p>This document defines the locked, non-negotiable MVP requirements.</p>"},{"location":"mvp/#1-shape-extraction-from-freecad-primary-input","title":"\ud83d\udfe9 1. Shape Extraction From FreeCAD (Primary Input)","text":"<p>MVP must extract panel geometry directly from the active FreeCAD document.</p> <p>Supported sources:</p> <ul> <li>Sketcher sketches (closed profiles)</li> <li>Draft rectangles, polygons, and shapes</li> <li>Part::Box (projected to 2D bounding rectangle)</li> <li>Part::Feature objects with planar faces</li> </ul> <p>Extract for each shape:</p> <ul> <li>Width and height</li> <li>Bounding box in global XY</li> <li>Rotation allowed (true/false)</li> <li>Unique ID</li> <li>Naming from label or auto-generated</li> </ul> <p>User workflow:</p> <ul> <li>Select shapes \u2192 Click \u201cAdd Selected to Nesting\u201d</li> <li>Or auto-detect 2D shapes \u2192 present selectable list</li> </ul> <p>CSV is a fallback, not the primary method.</p>"},{"location":"mvp/#2-csv-import-fallback-mode","title":"\ud83d\udfe9 2. CSV Import (Fallback Mode)","text":"<p>CSV must support:</p> <p>Required fields:</p> <ul> <li>id</li> <li>width</li> <li>height</li> </ul> <p>Optional fields:</p> <ul> <li>grain_direction</li> </ul> <p>CSV validation:</p> <ul> <li>Reject zero or negative values</li> <li>Reject missing fields</li> <li>Human-readable error messages</li> </ul> <p>Users may optionally combine CSV-defined panels with FreeCAD geometry.</p>"},{"location":"mvp/#3-multi-sheet-nesting-mandatory","title":"\ud83d\udfe9 3. Multi-Sheet Nesting (Mandatory)","text":"<p>The MVP must support multi-sheet optimization.</p> <p>Required behaviors:</p> <ul> <li>User defines sheet size (width, height)</li> <li>Algorithm places as many panels per sheet as possible</li> <li>Generates new sheets when full</li> <li>Continues until all panels are placed</li> </ul> <p>Algorithm:</p> <ul> <li>Skyline or Guillotine rectangular nesting</li> <li>Rotation allowed only at 0\u00b0 or 90\u00b0</li> <li>Sorting strategies to reduce waste:</li> <li>Largest-first</li> <li>Height-first</li> <li>Width-first     (Meta-optimization optional: random shuffles for better pack)</li> </ul> <p>Output per placement:</p> <ul> <li>panel_id</li> <li>sheet_id</li> <li>x, y position</li> <li>rotation (0 or 90)</li> </ul>"},{"location":"mvp/#4-freecad-gui-integration-workbench","title":"\ud83d\udfe9 4. FreeCAD GUI Integration (Workbench)","text":"<p>The SquatchCut Workbench must add a toolbar with the following commands:</p> <ul> <li>Add Shapes to Nesting</li> <li>Import CSV</li> <li>Set Sheet Size</li> <li>Run Nesting</li> <li>Preferences</li> <li>Export Report</li> </ul> <p>Required dialogs:</p> <ul> <li>Shape selection dialog</li> <li>CSV import dialog</li> <li>Sheet size dialog</li> <li>Nesting results dialog</li> <li>Report export dialog</li> </ul> <p>Design: simple but functional, no fancy styling required.</p>"},{"location":"mvp/#5-preferences-pane-mandatory","title":"\ud83d\udfe9 5. Preferences Pane (Mandatory)","text":"<p>FreeCAD preferences window must include:</p> <ul> <li>Default sheet width/height</li> <li>Default kerf/spacing between panels</li> <li>Auto-detect shapes on open (yes/no)</li> <li>Allow rotations (yes/no)</li> <li>Default export directory</li> <li>Branding toggle (Sasquatch mode on/off)</li> </ul> <p>Preferences must persist across sessions.</p>"},{"location":"mvp/#6-nesting-report-export-mandatory","title":"\ud83d\udfe9 6. Nesting Report Export (Mandatory)","text":"<p>After nesting, SquatchCut must export a structured report.</p> <p>Report includes:</p> <ul> <li>Date/time</li> <li>FreeCAD project name (if available)</li> <li>Total number of sheets used</li> <li>Total panels</li> <li>Total material area</li> <li>Total waste (%)</li> <li>Efficiency (%)</li> </ul> <p>Per sheet:</p> <ul> <li>Sheet number</li> <li>Sheet dimensions</li> <li>List of placements:</li> <li>panel_id</li> <li>width</li> <li>height</li> <li>rotation</li> <li>x, y placement</li> </ul> <p>Output formats:</p> <ul> <li>PDF (primary)</li> <li>CSV summary (per-panel table)</li> <li>JSON optional but not required</li> </ul> <p>PDF may use ReportLab or FreeCAD\u2019s own export mechanisms.</p>"},{"location":"mvp/#7-nesting-geometry-output-in-freecad","title":"\ud83d\udfe9 7. Nesting Geometry Output in FreeCAD","text":"<p>For each sheet produced, SquatchCut must:</p> <ul> <li>Create a new FreeCAD group (Sheet_1, Sheet_2, etc.)</li> <li>Add Draft rectangles (or Sketch Rectangles) representing final panel positions</li> <li>Apply rotation, placement, and IDs</li> <li>Maintain consistent units (mm)</li> <li>Maintain accurate geometry</li> </ul> <p>Optional but helpful:</p> <ul> <li>Color code rectangles</li> </ul>"},{"location":"mvp/#8-branding-required","title":"\ud83d\udfe9 8. Branding (Required)","text":"<p>MVP must include:</p> <ul> <li>Workbench icon (Squatch/wood ape theme)</li> <li>Toolbar icons</li> <li>\u201cSquatchCut\u201d name visible in UI</li> <li>Optional \u201cSasquatch Mode\u201d toggle in preferences</li> </ul> <p>Branding is a first-class MVP requirement.</p>"},{"location":"mvp/#excluded-from-mvp","title":"\ud83d\udfe5 Excluded From MVP","text":"<p>The following features are intentionally excluded:</p> <ul> <li>Curved or arbitrary-shape polygon nesting</li> <li>FreeCAD Path Workbench integration (CAM, G-code)</li> <li>Grain direction optimization</li> <li>Bookmatching</li> <li>Advanced optimization algorithms (GA, deep nesting)</li> <li>Drag-and-drop sheet editor</li> <li>Material libraries</li> <li>Collaborative/cloud features</li> </ul> <p>These belong in post-MVP roadmap releases.</p>"},{"location":"mvp/#mvp-summary-in-one-sentence","title":"\ud83d\udfe9 MVP Summary in One Sentence","text":"<p>SquatchCut MVP provides a FreeCAD workbench that extracts 2D shapes from the active project (or CSV fallback), nests them across multiple sheets using rectangular optimization, generates corresponding geometry inside FreeCAD, and exports a full PDF report with sheets, placements, and efficiency metrics.</p>"},{"location":"mvp/#end-of-mvp-document","title":"End of MVP Document","text":""},{"location":"release-notes/","title":"Release Notes","text":""},{"location":"release-notes/#unreleased","title":"Unreleased","text":""},{"location":"release-notes/#highlights","title":"Highlights","text":"<ul> <li>Per-part 0\u00b0/90\u00b0 rotation support driven by optional <code>allow_rotate</code> CSV column and <code>SquatchCutCanRotate</code> property; defaults to no rotation when missing.</li> <li>Separate kerf (between adjacent parts) and gap/halo (around parts and sheet edges) controls passed into nesting.</li> <li>New Export Nesting CSV command with a save dialog; exports sheet index, part id, true dimensions, x/y, and angle without inflating sizes.</li> <li>Hardened CSV import with required-column validation, per-row skipping with warnings, and user-facing error dialogs.</li> </ul>"},{"location":"release-notes/#notes","title":"Notes","text":"<ul> <li><code>allow_rotate</code> is optional; omitting the column keeps rotation disabled for all parts.</li> <li>Kerf applies only between parts; gap pushes parts away from sheet edges.</li> </ul>"},{"location":"release-notes/#v010-first-prototype-release","title":"v0.1.0 \u2014 First prototype release","text":""},{"location":"release-notes/#highlights_1","title":"Highlights","text":"<ul> <li>FreeCAD workbench scaffolded with core commands: Add Shapes, Import CSV, Set Sheet Size, Run Nesting, Export Report, and Preferences.</li> <li>Nesting backend handles panel extraction, CSV loading, multi-sheet rectangular nesting (Skyline/Guillotine hybrid), geometry generation, and report exports.</li> <li>TypeScript CSV validation/preprocessing CLI (<code>npx squatchcut-csv</code>) for sanitizing panel lists before import.</li> <li>End-to-end coverage: FreeCAD CSV and geometry flows, plus Node-based CLI smoke tests with shared fixtures.</li> <li>Documentation and automation: MVP scope, architecture overview, testing guide, and Codex workflow playbooks published to the MkDocs site.</li> </ul>"},{"location":"release-notes/#notes-known-gaps","title":"Notes &amp; known gaps","text":"<ul> <li>Prototype focuses on rectangular panels; curved/grain-aware nesting and richer previews are future work.</li> <li>Expect iteration on export formats (DXF/SVG), material-aware optimization, and UI polish in subsequent releases.</li> </ul>"},{"location":"reporting_bugs/","title":"Feedback, Bugs, and Feature Requests","text":"<p>If you run into a problem with SquatchCut or have an idea to make it better, you\u2019re in the right place.</p>"},{"location":"reporting_bugs/#bug-reports","title":"Bug reports","text":"<p>Use a bug report when something is broken or clearly wrong, for example: - Crashes or errors - Parts overlapping unexpectedly - Layouts that don\u2019t match the input - UI elements that don\u2019t respond or behave strangely</p> <p>Where to report bugs: - GitHub Issues (Bug report template):   https://github.com/stevenfarmer/SquatchCut/issues/new/choose</p> <p>When you open a bug, it helps a lot if you include:</p> <ul> <li>What you were trying to do   e.g., \u201cImport CSV and run nesting on a 4x8 sheet using imperial units\u201d</li> <li>Steps to reproduce:</li> <li>Open FreeCAD</li> <li>Open SquatchCut</li> <li>Import CSV <code>&lt;filename&gt;</code></li> <li>Set sheet size to <code>...</code></li> <li>Click Preview SquatchCut</li> <li>What you expected to happen</li> <li>What actually happened (including any error messages)</li> <li>Attachments (if possible):</li> <li>The CSV file you used</li> <li>Screenshots of the layout or error</li> <li>Your FreeCAD version</li> <li>Your SquatchCut version</li> <li>Whether you used metric or imperial units, and CSV units</li> </ul> <p>You can also use the \u201cReport a Bug\u201d button in the SquatchCut Task Panel inside FreeCAD to open the issue tracker directly in your browser.</p>"},{"location":"reporting_bugs/#feature-requests-and-enhancements","title":"Feature requests and enhancements","text":"<p>Use a feature request when: - You\u2019d like SquatchCut to do something it doesn\u2019t do today - You want a workflow improvement or UX tweak - You have an idea for a new option, setting, export, or visualization</p> <p>Where to request features: - GitHub Issues (Feature request template):   https://github.com/stevenfarmer/SquatchCut/issues/new/choose</p> <p>When requesting a feature, please include:</p> <ul> <li>What problem you\u2019re trying to solve   e.g., \u201cI want to print labeled cut sheets for my cabinet shop\u201d</li> <li>How you work today (manual process, other tools, etc.)</li> <li>What an ideal solution in SquatchCut would look like</li> <li>Any example screenshots or attachments that help explain it</li> </ul> <p>Even small ideas are welcome; they help shape the roadmap.</p>"},{"location":"dev/testing/","title":"Testing","text":""},{"location":"dev/testing/#fixtures","title":"Fixtures","text":"<ul> <li>FreeCAD fixtures: <code>freecad/testing/</code></li> <li>CSV fixtures: <code>freecad/testing/csv/</code>, <code>ts-tools/test-data/</code></li> </ul>"},{"location":"dev/testing/#freecad-e2e","title":"FreeCAD E2E","text":"<ul> <li>CSV flow:   <code>python   from SquatchCut.testing.e2e_mvp_csv_flow import main   main()</code></li> <li>Geometry flow:   <code>python   from SquatchCut.testing.e2e_mvp_geometry_flow import main   main()</code></li> </ul>"},{"location":"dev/testing/#ts-tools-e2e","title":"TS Tools E2E","text":"<pre><code>cd ts-tools\nnpm run build\nnpm run e2e\n</code></pre>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>FreeCAD (recent stable release)</li> <li>Python (for running tests inside FreeCAD environment)</li> <li>Node.js and npm (for ts-tools)</li> </ul>"},{"location":"getting-started/installation/#installing-the-squatchcut-workbench","title":"Installing the SquatchCut workbench","text":"<ol> <li>Clone this repository into FreeCAD's Mod directory:</li> <li>Linux/macOS: <code>~/.local/share/FreeCAD/Mod/</code></li> <li>Windows: <code>%APPDATA%\\FreeCAD\\Mod\\</code></li> <li>Restart FreeCAD.</li> <li>Choose SquatchCut from the Workbench dropdown.</li> </ol>"},{"location":"getting-started/installation/#installing-ts-tools","title":"Installing ts-tools","text":"<pre><code>cd ts-tools\nnpm install\nnpm run build\n</code></pre>"},{"location":"getting-started/workflow/","title":"Basic Workflow","text":""},{"location":"getting-started/workflow/#typical-steps","title":"Typical Steps","text":"<ol> <li>Add shapes from the document or import a CSV panel list.</li> <li>Set sheet size and kerf.</li> <li>Run nesting.</li> <li>Inspect the generated layout in FreeCAD.</li> <li>Export reports (PDF/CSV).</li> </ol>"},{"location":"getting-started/workflow/#quickstart","title":"Quickstart","text":"<ol> <li>Open a document with rectangles (or import a CSV).</li> <li>Click Sheet Size and confirm dimensions/kerf.</li> <li>Click Run Nesting to generate sheet layouts.</li> <li>Check the created sheet groups and panel rectangles.</li> <li>Click Export Report to produce PDF/CSV outputs.</li> </ol>"},{"location":"user/commands/","title":"Commands &amp; Tools","text":""},{"location":"user/commands/#add-shapes","title":"Add Shapes","text":"<ul> <li>Extracts selected rectangles/shapes from the active document into panels.</li> <li>Use when you have geometry in FreeCAD to convert into panel data.</li> <li>Caveats: Works on supported planar shapes; skips unsupported objects.</li> </ul>"},{"location":"user/commands/#import-csv","title":"Import CSV","text":"<ul> <li>Loads panel data from a CSV file.</li> <li>Use when panel dimensions are defined externally.</li> <li>Caveats: Ensure required columns (id, width, height; optional grain_direction; optional allow_rotate). Missing <code>allow_rotate</code> defaults to no rotation. Invalid rows are skipped with warnings.</li> </ul>"},{"location":"user/commands/#run-nesting","title":"Run Nesting","text":"<ul> <li>Executes multi-sheet rectangular nesting for current panels.</li> <li>Use after panels are gathered and sheet size is set.</li> <li>Caveats: Panels must have valid dimensions; uses simple Skyline/Guillotine hybrid with per-part 0\u00b0/90\u00b0 rotation. Kerf applies between parts; gap/halo pushes parts off sheet edges. If nothing is selected, all tagged panels are used; if a subset is selected, only that subset nests.</li> </ul>"},{"location":"user/commands/#sheet-size","title":"Sheet Size","text":"<ul> <li>Configures sheet dimensions and spacing.</li> <li>Use before nesting to define material size.</li> <li>Caveats: Defaults to 2440 x 1220 if not set. Kerf (between parts) and gap/halo (around parts/edges) default to 0 and can be set on the document.</li> </ul>"},{"location":"user/commands/#export-report","title":"Export Report","text":"<ul> <li>Generates PDF/CSV reports from the last nesting run.</li> <li>Use after nesting completes.</li> <li>Caveats: Requires a completed nesting run in the current session.</li> </ul>"},{"location":"user/commands/#export-nesting-csv","title":"Export Nesting CSV","text":"<ul> <li>Saves the most recent nesting layout as a CSV (choose path via save dialog).</li> <li>Use after nesting completes.</li> <li>Caveats: Writes sheet index, part id, true width/height, x/y, and angle (0/90). Kerf/gap are layout-only and not exported.</li> </ul>"},{"location":"user/commands/#toggle-source-panels","title":"Toggle Source Panels","text":"<ul> <li>Shows/hides the original SourcePanels group.</li> <li>Use to reveal or hide the originals that were offset left when nesting.</li> <li>Caveats: SourcePanels remains unchanged; clones on sheets are independent.</li> </ul>"},{"location":"user/commands/#preferences","title":"Preferences","text":"<ul> <li>Accesses SquatchCut preference options.</li> <li>Use to adjust default behaviors.</li> <li>Caveats: Minimal UI in MVP; sheet size dialog handles key settings.</li> </ul>"},{"location":"user/csv_and_ts_tools/","title":"CSV &amp; TS Tools","text":""},{"location":"user/csv_and_ts_tools/#csv-panel-format","title":"CSV Panel Format","text":"<ul> <li>Required columns: <code>id</code>, <code>width</code>, <code>height</code></li> <li>Optional: <code>grain_direction</code> (or <code>grainDirection</code>)</li> <li>Units: millimeters</li> </ul>"},{"location":"user/csv_and_ts_tools/#validation-with-ts-tools","title":"Validation with ts-tools","text":"<ul> <li>The <code>ts-tools</code> package validates and normalizes panel CSVs.</li> <li>Errors are collected without aborting on first failure.</li> </ul>"},{"location":"user/csv_and_ts_tools/#cli-usage","title":"CLI Usage","text":"<pre><code>cd ts-tools\nnpm run build\nnpx squatchcut-csv path/to/file.csv\n</code></pre>"},{"location":"user/csv_and_ts_tools/#workflow-integration","title":"Workflow Integration","text":"<ul> <li>Validate CSVs before importing into FreeCAD.</li> <li>Use clean panels to improve nesting outcomes.</li> </ul>"}]}