{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"SquatchCut (logo placeholder)","text":"<p>SquatchCut is a cryptid-powered nesting workbench for FreeCAD that extracts panels, nests them, and exports reports.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>FreeCAD workbench with panel extraction and nesting</li> <li>CSV import (optional per-part rotation) and TypeScript validation tools</li> <li>Multi-sheet rectangular nesting with kerf/gap controls and per-part 0\u00b0/90\u00b0 rotation</li> <li>Units preference (metric/imperial) and CSV units selector; sheet size fields reflect the chosen units</li> <li>Geometry generation, PDF/CSV reporting, and cutlist CSV export from nested layouts</li> <li>Embedded AI Worker workflows for guided development</li> </ul>"},{"location":"#workflow-notes","title":"Workflow Notes","text":"<ul> <li>CSV import shows source panel rectangles in the XY plane and fits the view automatically.</li> <li>Preview/Apply nesting hides source panels and builds fresh sheets + nested clones each run (older sheets are cleared first).</li> <li>Use the \u201cShow Source Panels\u201d button in the task panel to hide sheets and reveal sources again at any time.</li> <li>Cutlist export derives rip/crosscut lines from the nested layout and now merges near-duplicate edges while ignoring cuts that don\u2019t cross any panel, keeping the cutlist shop-friendly.</li> </ul>"},{"location":"#explore","title":"Explore","text":"<ul> <li>Getting Started</li> <li>User Guide</li> <li>Developer Guide</li> </ul>"},{"location":"Development_Environment/","title":"Development Environment","text":"<p>This document defines the canonical SquatchCut development workflow so that local AI tooling (ChatGPT Mac app \u201cWork With Code\u201d, VS Code agents, etc.) can discover and operate on the same workspace as the developer.</p>"},{"location":"Development_Environment/#ai-forward-development-environment","title":"AI-Forward Development Environment","text":""},{"location":"Development_Environment/#a-local-workspace-requirement","title":"A. Local Workspace Requirement","text":"<ul> <li>Clone the SquatchCut repository onto the host filesystem (for example: <code>~/dev/SquatchCut</code> on macOS).</li> <li>Always open the project via <code>squatchcut.code-workspace</code> from the host. This ensures the ChatGPT Mac app and other local tools see the same workspace that VS Code uses.</li> <li>Do not rely on container-only or remote-only copies of the code; the host-cloned repo is the single source of truth.</li> </ul>"},{"location":"Development_Environment/#b-dev-container-behavior","title":"B. Dev Container Behavior","text":"<ul> <li>When opening the repo in VS Code, use File \u2192 Open Workspace\u2026 \u2192 squatchcut.code-workspace, then choose \u201cReopen in Container\u201d if you need the dev container.</li> <li>The dev container bind-mounts the host workspace at <code>/workspaces/SquatchCut</code>. Editing inside the container still operates on the host files.</li> <li>The container provides tooling and dependencies only; it is not the canonical storage location for the code.</li> </ul>"},{"location":"Development_Environment/#c-ai-toolchain-compatibility","title":"C. AI Toolchain Compatibility","text":"<ul> <li>ChatGPT Mac app \u201cWork With Code\u201d lists the project automatically when the host workspace (squatchcut.code-workspace) is open.</li> <li>VS Code extensions (AI Assistants, Copilot, etc.) running either locally or inside the container see the same files because the container bind-mounts the host repo.</li> <li>Avoid workflows where the \u201creal\u201d code exists only inside opaque Docker volumes or remote filesystems that macOS cannot access.</li> </ul> <p>Following this process guarantees that human developers and AI assistants operate on the same SquatchCut workspace, keeping the experience predictable and productive.</p>"},{"location":"Project_Guide_v3.2/","title":"SquatchCut Project Guide (v3.2 \u2013 AI Agent Edition)","text":""},{"location":"Project_Guide_v3.2/#0-meta-goals-of-v32","title":"0. Meta Goals of v3.2","text":"<p>This updated guide focuses specifically on:</p>"},{"location":"Project_Guide_v3.2/#a-eliminating-ambiguity-in-ai-agent-instructions","title":"A. Eliminating ambiguity in AI Agent instructions","text":"<ul> <li>Instruction blocks now have strict, enforceable structure</li> <li>No markdown, no commentary inside blocks  </li> <li>Reasoning level declarations mandatory  </li> <li>File paths and expected patterns must be explicit  </li> <li>UI behavior described unambiguously  </li> <li>Persistent behavior safeguarded from accidental overwrites  </li> </ul>"},{"location":"Project_Guide_v3.2/#b-making-you-faster-and-making-me-the-user-more-consistent","title":"B. Making YOU faster and making ME (The User) more consistent","text":"<ul> <li>You describe requirements  </li> <li>I translate them into clear directives  </li> <li>The Agent executes</li> </ul>"},{"location":"Project_Guide_v3.2/#c-forcing-ai-agents-to-conform-to-squatchcuts-architecture","title":"C. Forcing AI Agents to conform to SquatchCut\u2019s architecture","text":"<p>Agents should never reinvent the repo or introduce new patterns.</p>"},{"location":"Project_Guide_v3.2/#ai-tooling-workspace-layout","title":"AI Tooling &amp; Workspace Layout","text":"<ul> <li>Developers clone SquatchCut on the host and open <code>squatchcut.code-workspace</code>; this host-visible workspace is what AI tools discover.</li> <li>When \u201cReopen in Container\u201d is used, VS Code bind-mounts the host repo at <code>/workspaces/SquatchCut</code>, so the container simply provides tooling while the canonical code stays on the host.</li> <li>See <code>docs/Development_Environment.md</code> for full AI-forward workflow details.</li> <li>See also <code>AGENTS.md</code> in the root directory for strict behavioral rules.</li> </ul>"},{"location":"Project_Guide_v3.2/#1-project-purpose","title":"1. Project Purpose","text":"<p>SquatchCut is a FreeCAD add-on that takes CSV part lists and generates optimized sheet nests for woodworking, cabinetry, and general sheet-material workflows.</p>"},{"location":"Project_Guide_v3.2/#core-objectives","title":"Core Objectives","text":"<ul> <li>Fast, predictable, simple  </li> <li>Minimal UI friction  </li> <li>Always mm internally, fractions if imperial  </li> <li>Stable hydration/initialization  </li> <li>Simple CSV \u2192 sheet \u2192 nest \u2192 export workflow  </li> </ul>"},{"location":"Project_Guide_v3.2/#2-roles","title":"2. Roles","text":""},{"location":"Project_Guide_v3.2/#user-steven","title":"User (Steven)","text":"<ul> <li>Product Owner  </li> <li>Scrum-ish Master  </li> <li>UAT wrangler  </li> <li>Requirements authority  </li> </ul>"},{"location":"Project_Guide_v3.2/#architect-aihuman","title":"Architect (AI/Human)","text":"<ul> <li>Writes requirements  </li> <li>Produces Agent instruction blocks; all AI tasks must originate here</li> <li>Ensures patterns and rules never drift  </li> <li>Maintains documentation  </li> </ul>"},{"location":"Project_Guide_v3.2/#jules-lead-developer-pm","title":"Jules (Lead Developer &amp; PM)","text":"<ul> <li>Plans implementation from Architect specs</li> <li>Manages high-level decisions and branch strategy (<code>jules/&lt;feature&gt;</code>)</li> </ul>"},{"location":"Project_Guide_v3.2/#codex-developer","title":"Codex (Developer)","text":"<ul> <li>Implements code changes based on Jules' plan (<code>codex/&lt;feature&gt;</code>)</li> <li>Must obey patterns and reasoning levels</li> <li>Must build tests with every core change</li> <li>See <code>AGENTS.md</code> \u2192 AI Worker Protocol for full details</li> </ul>"},{"location":"Project_Guide_v3.2/#3-core-principles","title":"3. Core Principles","text":"<ol> <li>Internal units = millimeters </li> <li>Imperial = fractional inches only </li> <li>Defaults never change unless Settings says so </li> <li>Presets never override defaults </li> <li>TaskPanel never auto-selects presets </li> <li>hydrate_from_params() ALWAYS runs before UI widgets </li> <li>Agents must use reasoning level declarations</li> <li>Every logic change must include tests </li> <li>UI must not overflow or fail to load </li> <li>Settings panel must always open </li> <li>No relative imports </li> <li>No pattern drift </li> <li>No silent behavior changes </li> </ol>"},{"location":"Project_Guide_v3.2/#4-ai-agent-communication-rules-updated-hardened","title":"4. AI Agent Communication Rules (Updated + Hardened)","text":""},{"location":"Project_Guide_v3.2/#41-instruction-block-format","title":"4.1 Instruction Block Format","text":"<p>Every instruction block MUST begin with:</p> <pre><code>Recommended reasoning level: &lt;LEVEL&gt;\n</code></pre> <p>Followed by:</p> <pre><code>Agent, this task requires &lt;LEVEL&gt; reasoning.\n\n&lt;instructions&gt;\n</code></pre> <ul> <li>No markdown  </li> <li>No language tag  </li> <li>No commentary  </li> <li>Only instructions  </li> <li>Must be safe to paste directly into the Agent</li> </ul>"},{"location":"Project_Guide_v3.2/#42-required-elements-inside-each-block","title":"4.2 Required Elements Inside Each Block","text":"<ul> <li>Full file paths  </li> <li>Explicit operation lists  </li> <li>Expected behavior  </li> <li>Acceptance criteria  </li> <li>Guardrails  </li> </ul>"},{"location":"Project_Guide_v3.2/#43-when-to-use-levels","title":"4.3 When to Use Levels","text":"<ul> <li>LOW: trivial  </li> <li>MEDIUM: single-file  </li> <li>HIGH: multi-file + UI or settings  </li> <li>EXTRA-HIGH: architectural or algorithm refactor</li> </ul>"},{"location":"Project_Guide_v3.2/#5-hydration-rules-hard-requirements","title":"5. Hydration Rules (Hard Requirements)","text":"<p>Hydration has caused repeated issues. These rules are absolute:</p>"},{"location":"Project_Guide_v3.2/#51-hydrate_from_params-must","title":"5.1 hydrate_from_params() must:","text":"<ul> <li>Load all persistent values  </li> <li>Guarantee type consistency  </li> <li>Normalize internal units  </li> <li>Never access GUI  </li> <li>Never import GUI modules  </li> <li>Never modify defaults except on Settings save  </li> </ul>"},{"location":"Project_Guide_v3.2/#52-taskpanel-initialization-order","title":"5.2 TaskPanel Initialization Order","text":"<p>This order is non-negotiable:</p> <ol> <li>Load session_state  </li> <li>Call hydrate_from_params()  </li> <li>Create all UI widgets  </li> <li>Populate UI values from hydrated state  </li> <li>Apply measurement formatting  </li> <li>Connect signals  </li> <li>Render panel  </li> </ol> <p>No exceptions.</p>"},{"location":"Project_Guide_v3.2/#6-measurement-system-architecture","title":"6. Measurement System Architecture","text":""},{"location":"Project_Guide_v3.2/#61-internal-storage","title":"6.1 Internal Storage","text":"<p>Always millimeters.</p>"},{"location":"Project_Guide_v3.2/#62-display-modes","title":"6.2 Display Modes","text":"<ul> <li>metric \u2192 mm  </li> <li>imperial \u2192 fractional inches  </li> </ul>"},{"location":"Project_Guide_v3.2/#63-ui-reformatting-rules","title":"6.3 UI Reformatting Rules","text":"<p>Switching measurement system requires full reformatting of all numeric UI fields.</p>"},{"location":"Project_Guide_v3.2/#65-split-defaults-new","title":"6.5 Split Defaults (New)","text":"<p>To prevent drift from rounding errors: - User-configurable defaults (Sheet size, Kerf, Gap) must be stored separately for Metric and Imperial. - Switching systems in Settings swaps the loaded default, it does not convert/overwrite the existing one.</p>"},{"location":"Project_Guide_v3.2/#64-fraction-logic","title":"6.4 Fraction Logic","text":"<p>Must support: - whole - fraction - mixed - hyphenated Must round-trip without drift.</p>"},{"location":"Project_Guide_v3.2/#7-preset-default-logic-fortified","title":"7. Preset &amp; Default Logic (Fortified)","text":""},{"location":"Project_Guide_v3.2/#defaults","title":"Defaults","text":"<ul> <li>Set only via Settings panel  </li> <li>Never altered by TaskPanel  </li> <li>Hydrate_from_params loads them  </li> </ul>"},{"location":"Project_Guide_v3.2/#presets","title":"Presets","text":"<ul> <li>Always start blank  </li> <li>Only modify sheet width/height  </li> <li>Never modify defaults  </li> <li>Never auto-selected  </li> </ul>"},{"location":"Project_Guide_v3.2/#imperial-default-sheet","title":"Imperial Default Sheet","text":"<p>Exactly 48 \u00d7 96 inches.</p>"},{"location":"Project_Guide_v3.2/#8-ui-behavior-rules","title":"8. UI Behavior Rules","text":""},{"location":"Project_Guide_v3.2/#81-settings-panel","title":"8.1 Settings Panel","text":"<ul> <li>Must always open  </li> <li>Must use TaskPanel_Settings  </li> <li>Must call hydrate_from_params() before building widgets  </li> </ul>"},{"location":"Project_Guide_v3.2/#82-main-taskpanel","title":"8.2 Main TaskPanel","text":"<ul> <li>Acts as a Controller for sub-widgets (<code>Input</code>, <code>Sheet</code>, <code>Nesting</code>).</li> <li>Must reflect hydrated defaults.</li> <li>Must not override defaults.</li> <li>Must not infer presets.</li> <li>Must not open multiple instances.</li> </ul>"},{"location":"Project_Guide_v3.2/#83-sheetsourcenesting-view-rules","title":"8.3 Sheet/Source/Nesting View Rules","text":"<ul> <li>Clear groups before redraw  </li> <li>Never leave orphans  </li> <li>Auto-zoom after draw  </li> <li>Maintain consistent naming:</li> <li>SquatchCut_Sheet  </li> <li>SquatchCut_SourceParts  </li> <li>SquatchCut_NestedParts  </li> </ul>"},{"location":"Project_Guide_v3.2/#9-tests","title":"9. Tests","text":""},{"location":"Project_Guide_v3.2/#91-must-test","title":"9.1 Must Test","text":"<ul> <li>Fraction parsing  </li> <li>Fraction formatting  </li> <li>CSV parsing  </li> <li>Default initialization  </li> <li>Hydration logic  </li> <li>Preset behavior  </li> <li>TaskPanel load behavior  </li> <li>Measurement-system conversions  </li> </ul>"},{"location":"Project_Guide_v3.2/#92-should-test","title":"9.2 Should Test","text":"<ul> <li>Sheet object creation  </li> <li>Group clearing  </li> <li>UI stability (when possible)  </li> </ul>"},{"location":"Project_Guide_v3.2/#10-add-on-manager-rules","title":"10. Add-On Manager Rules","text":"<p>Agents must ensure:</p> <ul> <li>Correct zip structure  </li> <li>Correct metadata  </li> <li>No relative imports  </li> <li>All icons exist  </li> <li>Version increments  </li> </ul>"},{"location":"Project_Guide_v3.2/#11-export-architecture-v33-preparation","title":"11. Export Architecture (v3.3 preparation)","text":""},{"location":"Project_Guide_v3.2/#111-canonical-export-data-model","title":"11.1 Canonical Export Data Model","text":"<ul> <li><code>freecad/SquatchCut/core/exporter.py</code> defines the only valid export model:</li> <li><code>ExportJob</code> \u2013 job-wide metadata + sheets, measurement system, job name.</li> <li><code>ExportSheet</code> \u2013 sheet index, width/height in mm, list of part placements.</li> <li><code>ExportPartPlacement</code> \u2013 per-part geometry (x_mm, y_mm, width_mm, height_mm, rotation_deg) and part_id.</li> <li>ExportJob is built from the latest nesting layout + sheet config via <code>build_export_job_from_current_nesting</code>.</li> <li>All geometry is stored in millimeters. Measurement system only affects formatted strings.</li> </ul>"},{"location":"Project_Guide_v3.2/#112-deterministic-export-behavior","title":"11.2 Deterministic Export Behavior","text":"<ul> <li>CSV export (<code>export_cutlist</code>)</li> <li>Emits stable header columns (sheet_index, mm geometry, formatted strings).</li> <li>Raw mm values are untouched. <code>width_display/height_display</code> respect ExportJob.measurement_system.</li> <li>Tests cover both metric and imperial output.</li> <li>SVG export (<code>export_nesting_to_svg</code>)</li> <li>Generates one 2D SVG per sheet; filenames include <code>_S{n}</code> suffix.</li> <li>Draws sheet border, stroke-only part rectangles, deterministic labels (ID + dimensions), and header \u201cSheet i of N \u2013 WxH units\u201d.</li> <li>No FreeCAD 3D/export calls; everything is generated from ExportJob data.</li> <li>Design Principle: Export behavior must be deterministic and driven solely by ExportJob. FreeCAD document geometry is never a source of truth for exported artifacts.</li> </ul>"},{"location":"Project_Guide_v3.2/#113-out-of-scope","title":"11.3 Out-of-scope","text":"<ul> <li>DXF export remains deferred. Implementing DXF is explicitly out of scope for the current release cycle and cannot block delivery.</li> </ul>"},{"location":"Project_Guide_v3.2/#12-status-backlog-addendum-dec-2025","title":"12. Status &amp; Backlog Addendum (Dec 2025)","text":"<p>NOTE This addendum does not change any core architectural rules. It supersedes the older backlog-alignment section that followed the post-nesting fixes, providing a reconciled, status-aware view. The information below reflects the current codebase (CSV ingestion, session-state hydration, multi-sheet helpers, guillotine engine, TaskPanel warning banner, and existing tests/backlog files).</p>"},{"location":"Project_Guide_v3.2/#a-status-snapshot-dec-2025","title":"A. STATUS SNAPSHOT (DEC 2025)","text":""},{"location":"Project_Guide_v3.2/#1-features-stability","title":"1. Features &amp; Stability","text":"<ul> <li>Core CSV ingestion and session-state hydration flows remain stable and predictable.</li> <li>All four nesting strategies (default optimized, shelf, cut-friendly, guillotine) operate reliably under normal conditions.</li> <li>The normalized job-sheet helper in <code>freecad/SquatchCut/core/nesting.py</code> (~115\u2013210) is the unified source of truth consumed by every strategy.</li> <li>The TaskPanel warning banner in <code>freecad/SquatchCut/gui/taskpanel_main.py</code> (~323\u2013354) alerts users when cut-oriented modes may ignore additional sheets.</li> <li>Overall CSV \u2192 session \u2192 sheet normalization \u2192 nesting pipelines are cohesive and predictable.</li> </ul>"},{"location":"Project_Guide_v3.2/#2-recently-refactored-fragile-areas","title":"2. Recently Refactored / Fragile Areas","text":"<ul> <li>Multi-sheet heuristics (<code>freecad/SquatchCut/core/nesting.py</code> ~524\u2013779) iterate sheet sizes but still lack per-sheet utilization metrics and user-visible exhaustion handling.</li> <li>The guillotine runner (<code>freecad/SquatchCut/core/cut_optimization.py</code> ~34\u2013151) honors multi-sheet jobs yet has no per-sheet stats and can behave unexpectedly under aggressive exhaustion.</li> <li>Hydration/UI wiring integrated <code>_sheet_warning_active</code> via <code>_build_nesting_group</code> and <code>_update_cut_mode_sheet_warning</code>; changes must respect the hydration order.</li> </ul>"},{"location":"Project_Guide_v3.2/#3-known-or-likely-regressions","title":"3. Known or Likely Regressions","text":"<ul> <li>Preview vs Apply (<code>freecad/SquatchCut/gui/taskpanel_main.py</code> ~840\u2013869): Preview and Apply share the same destructive command path. Preview can mutate the document; TODO already notes need for a non-destructive channel.</li> <li>CSV Export (<code>freecad/SquatchCut/gui/commands/cmd_run_nesting.py</code> ~585\u2013614): Export remains a stub. Menu items exist without producing real artifacts, potentially misleading users.</li> </ul>"},{"location":"Project_Guide_v3.2/#4-ui-ux-issues","title":"4. UI / UX Issues","text":"<ul> <li>TaskPanel layout is crowded (Preview/Run/Show Source row + checkbox clusters, <code>freecad/SquatchCut/gui/taskpanel_main.py</code> ~333\u2013353) causing clipping on narrow docks.</li> <li>The warning banner consumes full width with no adaptive fallback, increasing overflow risk in constrained layouts.</li> </ul>"},{"location":"Project_Guide_v3.2/#5-testing-coverage-gaps","title":"5. Testing Coverage &amp; Gaps","text":"<ul> <li>Full <code>pytest</code> sweeps collect ~171 tests but can time out (~120\u202fs) in limited environments.</li> <li>Critical suites (<code>tests/test_nesting.py</code>, <code>tests/test_taskpanel_hydration.py</code>) pass, covering baseline nesting correctness and hydration behavior.</li> <li>Gaps remain for preview lifecycle vs apply, imperial formatting drift, sheet exhaustion behavior, warning-banner state transitions across permutations, and deep multi-sheet exhaustion edge cases.</li> </ul>"},{"location":"Project_Guide_v3.2/#6-technical-debt-documentation","title":"6. Technical Debt &amp; Documentation","text":"<ul> <li>CSV export requires a complete implementation and deterministic cutlist output.</li> <li>Preview determinism needs a non-destructive workflow and clear cleanup of <code>SquatchCut_*</code> groups.</li> <li>Per-sheet visualization needs better labeling, spacing, and navigation aids.</li> <li>Documentation: v3.2 guide and <code>docs/Backlog.md</code> now track Completed/Active/Future work; this addendum aligns both with the live code.</li> </ul>"},{"location":"Project_Guide_v3.2/#b-backlog-alignment-supersedes-old-section-11","title":"B. BACKLOG ALIGNMENT (SUPERSEDES OLD SECTION 11)","text":""},{"location":"Project_Guide_v3.2/#1-completed-since-v32","title":"1. Completed Since v3.2","text":"<ul> <li>Settings Panel Behavior \u2013 Opens reliably, hydrates before widget construction, leaves defaults untouched until explicit save.</li> <li>Unified Job-Sheet Normalization \u2013 <code>_normalize_sheet_definition</code> feeds every nesting strategy with the same sheet list.</li> <li>Multi-Sheet Support Baseline \u2013 Standard, cut-friendly, and guillotine strategies honor advanced job sheets with correct <code>sheet_index</code> tracking.</li> <li>Warning Banner Infrastructure \u2013 TaskPanel warning banner with <code>_sheet_warning_active</code> surfaces when cut-oriented modes ignore additional sheets.</li> <li>Documentation &amp; Backlog Files \u2013 v3.2 guide and <code>docs/Backlog.md</code> were aligned to reflect the unified pipeline and warning logic.</li> </ul>"},{"location":"Project_Guide_v3.2/#2-active-backlog-high-priority-first","title":"2. Active Backlog (High Priority First)","text":"<ul> <li> <p>P1 \u2013 Preview Determinism &amp; Cleanup   Separate preview from apply so preview is non-destructive; ensure <code>SquatchCut_Sheet_*</code>, <code>SquatchCut_SourceParts_*</code>, and <code>SquatchCut_NestedParts_*</code> stay consistent and cleaned up. Scope: <code>freecad/SquatchCut/gui/taskpanel_main.py</code>, preview helpers/tests.</p> </li> <li> <p>P1 \u2013 TaskPanel Overflow &amp; Ergonomics   Restructure crowded button/checkbox rows to prevent clipping on narrow docks, ensuring the warning banner coexists without overflow. Scope: <code>freecad/SquatchCut/gui/taskpanel_main.py</code>.</p> </li> <li> <p>P1 \u2013 Multi-Sheet Visualization Polish   Improve per-sheet labeling, spacing, and navigation within the viewer; keep sheet/source/nested groups synchronized without ghosts. Scope: <code>freecad/SquatchCut/gui/nesting_view.py</code>, <code>freecad/SquatchCut/core/view_controller.py</code>.</p> </li> <li> <p>P1 \u2013 Cut-Friendly Multi-Sheet Heuristics   Refine lane/guillotine behavior so sheet order, exhaustion, and spacing are predictable. Scope: <code>freecad/SquatchCut/core/nesting.py</code>, <code>freecad/SquatchCut/core/cut_optimization.py</code>.</p> </li> <li> <p>P1 \u2013 Test Suite Expansion (Hydration, Units, Preview)   Add tests for measurement toggles, fractional-inch formatting, preview lifecycle, sheet_index propagation, and basic exhaustion scenarios. Scope: <code>tests/test_taskpanel_hydration.py</code>, new multi-sheet/preview suites.</p> </li> <li> <p>P2 \u2013 CSV Export &amp; Cutlist Determinism   Replace the export stub with real cutlist generation and document the format. Scope: <code>freecad/SquatchCut/gui/commands/cmd_run_nesting.py</code> + helpers.</p> </li> <li> <p>P2 \u2013 Warning Banner Lifecycle Tests   Ensure banner visibility/text reacts to nesting-mode, job-sheet, and unit-system changes. Scope: <code>freecad/SquatchCut/gui/taskpanel_main.py</code>, UI tests.</p> </li> <li> <p>P2 \u2013 Sheet Exhaustion Metrics &amp; Feedback   Surface when sheet quantities run out (logs/UI) and avoid silent truncation. Scope: nesting core + TaskPanel feedback.</p> </li> </ul>"},{"location":"Project_Guide_v3.2/#3-future-longer-term","title":"3. Future / Longer-Term","text":"<ul> <li>Per-Sheet Cut-Order Visualization \u2013 Visual guide for rip/crosscut sequences per sheet.</li> <li>Enhanced Sheet Exhaustion Metrics \u2013 Utilization percentages and unused vs used counts.</li> <li>Multi-Sheet Presets \u2013 Configurable sheet stacks as presets compatible with measurement rules.</li> <li>Kerf Simulation \u2013 Saw-specific kerf modeling tied into both packing and cut-friendly heuristics.</li> </ul>"},{"location":"Project_Guide_v3.2/#c-how-to-use-this-addendum","title":"C. HOW TO USE THIS ADDENDUM","text":"<ul> <li>The core v3.2 architectural rules remain authoritative.</li> <li>This addendum synchronizes the v3.2 guide and <code>docs/Backlog.md</code> with real status/backlog data.</li> <li>Future architectural or backlog changes must update both the main guide (or successor) and this alignment layer, keeping architecture, status, and backlog clearly separated.</li> </ul>"},{"location":"Project_Guide_v3.2/#d-developer-tooling-documentation","title":"D. Developer Tooling &amp; Documentation","text":"<ul> <li>Documentation hygiene \u2013 Update both this guide and <code>docs/Backlog.md</code> whenever the backlog or architectural narratives change; <code>tests/test_docs_backlog_structure.py</code> enforces the presence of required sections and key phrases inside the backlog to keep the narrative aligned.</li> <li>Developer GUI test suite \u2013 <code>gui/taskpanel_settings.py</code> surfaces a \u201cRun GUI Test Suite\u201d button that delegates to <code>core/gui_tests.py</code>. The suite seeds a small panel set, imports CSVs, runs nesting, and logs <code>[GUI TEST]</code>\u2011prefixed status to the Report view for clarity.</li> <li>Runner environment \u2013 <code>docs/Development_Environment.md</code> and <code>docs/TESTING.md</code> describe how to build the <code>squatchcut-dev</code> Docker/devcontainer image, install <code>pip install -e .[dev]</code>, and run both pure-Python and FreeCAD-aware <code>pytest</code> runs (prepend <code>PYTHONPATH=/usr/lib/freecad-python3/lib</code> when needed or use <code>FreeCADCmd -c \"import run_freecad_tests\"</code>).</li> <li>Architecture reference \u2013 Keep <code>docs/architecture.md</code> in sync with the actual <code>freecad/SquatchCut/*</code> tree; it is the single source of truth for module responsibilities when onboarding new agents or contributors.</li> <li>Agent conduct \u2013 The root <code>AGENTS.md</code> governs measurement rules, hydration order, interaction protocol, and reasoning-level expectations; it complements this guide rather than replacing it.</li> <li>Export rules reminder \u2013 All exports (CSV, SVG, future DXF) must flow through <code>freecad/SquatchCut/core/exporter.py</code> and rely on <code>ExportJob</code>/<code>ExportSheet</code>/<code>ExportPartPlacement</code> data for deterministic outputs.</li> </ul>"},{"location":"Project_Guide_v3.2/#13-development-rules-summary","title":"13. Development Rules Summary","text":"<ol> <li>Internal unit = mm  </li> <li>Imperial UI = fractions only  </li> <li>Defaults remain unchanged except in Settings  </li> <li>Presets never overwrite defaults  </li> <li>TaskPanel never auto-selects presets  </li> <li>Hydration before UI  </li> <li>Agents must use reasoning levels</li> <li>Tests accompany logic changes  </li> <li>UI must never overflow  </li> <li>Settings panel must open  </li> <li>No relative imports  </li> <li>No silent assumptions  </li> <li>No redesigns without explicit instructions  </li> </ol>"},{"location":"Project_Guide_v3.2/#13-changelog-strategy-for-v32","title":"13. Changelog Strategy for v3.2","text":"<ul> <li>Add v3.2 section</li> <li>Note settings fixes, hydration rules, UI rules, Agent reinforcement</li> <li>Bump version to 0.3.2</li> <li>Include explicit references to v3.2 documentation</li> <li>Record that backlog/status alignment was refreshed (Completed vs. Active vs. Future) and mirrored into docs/Backlog.md</li> <li>Document the AI-forward development workflow (host-cloned repo, bind-mounted dev container, canonical <code>.code-workspace</code>)</li> <li>Added v3.3 Roadmap section describing required deliverables for FreeCAD Add-On Manager readiness and release planning.</li> </ul>"},{"location":"Project_Guide_v3.2/#14-roadmap-for-v33-freecad-add-on-release-candidate","title":"14. Roadmap for v3.3 \u2013 FreeCAD Add-On Release Candidate","text":"<p>v3.3 is a stabilization and polish release aimed at making SquatchCut ready for the FreeCAD Add-On Manager. No new \u201chero features\u201d are allowed unless they directly support stability, usability, or Add-On compliance.</p>"},{"location":"Project_Guide_v3.2/#141-v33-goals","title":"14.1 v3.3 Goals","text":"<ul> <li>Deliver a non-destructive, deterministic nesting workflow.</li> <li>Eliminate UI overflow issues in the TaskPanel.</li> <li>Polish multi-sheet visualization and eliminate ghost objects.</li> <li>Implement a fully functional CSV export path.</li> <li>Surface sheet-exhaustion metrics and warnings.</li> <li>Achieve full Add-On Manager compliance.</li> <li>Update user docs and include example CSVs.</li> </ul>"},{"location":"Project_Guide_v3.2/#142-phase-1-critical-completion-release-blockers","title":"14.2 Phase 1 \u2013 Critical Completion (Release Blockers)","text":"<p>[INSERT ALL SUBSECTIONS EXACTLY AS PROVIDED BY ARCHITECT AI]</p>"},{"location":"Project_Guide_v3.2/#143-phase-2-core-features-required-for-release","title":"14.3 Phase 2 \u2013 Core Features Required for Release","text":"<p>[INSERT ALL SUBSECTIONS EXACTLY AS PROVIDED BY ARCHITECT AI]</p>"},{"location":"Project_Guide_v3.2/#144-phase-3-add-on-manager-readiness","title":"14.4 Phase 3 \u2013 Add-On Manager Readiness","text":"<p>[INSERT ALL SUBSECTIONS EXACTLY AS PROVIDED BY ARCHITECT AI]</p>"},{"location":"Project_Guide_v3.2/#145-phase-4-optional-items-candidates-for-v34","title":"14.5 Phase 4 \u2013 Optional Items (Candidates for v3.4)","text":"<p>[INSERT ALL SUBSECTIONS EXACTLY AS PROVIDED BY ARCHITECT AI]</p>"},{"location":"Project_Guide_v3.2/#146-v33-exit-criteria","title":"14.6 v3.3 Exit Criteria","text":"<p>[INSERT ALL SUBSECTIONS EXACTLY AS PROVIDED BY ARCHITECT AI]</p>"},{"location":"Project_Guide_v3.2/#end-of-squatchcut-project-guide-v32","title":"END OF SquatchCut Project Guide v3.2","text":""},{"location":"Project_Guide_v3.3/","title":"SquatchCut Project Guide (v3.3 \u2013 AI Tool-Agnostic Edition)","text":""},{"location":"Project_Guide_v3.3/#0-meta-goals-of-v33","title":"0. Meta Goals of v3.3","text":"<p>This updated guide focuses on:</p>"},{"location":"Project_Guide_v3.3/#a-ai-tool-agnosticism","title":"A. AI-Tool Agnosticism","text":"<ul> <li>Removes dependencies on specific AI brands (e.g., \"Codex\").</li> <li>Defines roles generically (Architect, AI Worker).</li> <li>Clarifies that ANY AI tool (VS Code assistant, GitHub agent, etc.) must follow the specs.</li> </ul>"},{"location":"Project_Guide_v3.3/#b-eliminating-ambiguity-in-ai-worker-instructions","title":"B. Eliminating ambiguity in AI Worker instructions","text":"<ul> <li>Instruction blocks now have strict, enforceable structure.</li> <li>No markdown, no commentary inside blocks.</li> <li>Reasoning level declarations mandatory.</li> <li>File paths and expected patterns must be explicit.</li> <li>UI behavior described unambiguously.</li> <li>Persistent behavior safeguarded from accidental overwrites.</li> </ul>"},{"location":"Project_Guide_v3.3/#c-making-you-faster-and-making-me-the-user-more-consistent","title":"C. Making YOU faster and making ME (The User) more consistent","text":"<ul> <li>You describe requirements.</li> <li>I translate them into clear directives.</li> <li>The AI Worker executes.</li> </ul>"},{"location":"Project_Guide_v3.3/#d-forcing-ai-workers-to-conform-to-squatchcuts-architecture","title":"D. Forcing AI Workers to conform to SquatchCut\u2019s architecture","text":"<p>Workers should never reinvent the repo or introduce new patterns.</p>"},{"location":"Project_Guide_v3.3/#1-project-purpose","title":"1. Project Purpose","text":"<p>SquatchCut is a FreeCAD add-on that takes CSV part lists and generates optimized sheet nests for woodworking, cabinetry, and general sheet-material workflows.</p>"},{"location":"Project_Guide_v3.3/#core-objectives","title":"Core Objectives","text":"<ul> <li>Fast, predictable, simple</li> <li>Minimal UI friction</li> <li>Always mm internally, fractions if imperial</li> <li>Stable hydration/initialization</li> <li>Simple CSV \u2192 sheet \u2192 nest \u2192 export workflow</li> </ul>"},{"location":"Project_Guide_v3.3/#2-roles","title":"2. Roles","text":""},{"location":"Project_Guide_v3.3/#user-steven","title":"User (Steven)","text":"<ul> <li>Product Owner</li> <li>Scrum-ish Master</li> <li>UAT wrangler</li> <li>Requirements authority</li> </ul>"},{"location":"Project_Guide_v3.3/#architect-human-planner","title":"Architect (Human + Planner)","text":"<ul> <li>Writes requirements</li> <li>Produces Task Specs (Job Cards); all tasks must originate here</li> <li>Ensures patterns and rules never drift</li> <li>Maintains documentation</li> </ul>"},{"location":"Project_Guide_v3.3/#lead-developer-eg-jules","title":"Lead Developer (e.g., Jules)","text":"<ul> <li>Plans implementation from Architect specs</li> <li>Manages the repository and branch strategy</li> <li>Reviews code from other workers</li> </ul>"},{"location":"Project_Guide_v3.3/#ai-workers-implementation-agents","title":"AI Workers (Implementation Agents)","text":"<ul> <li>Implement code changes based on strict specs</li> <li>Can be any tool (e.g., Codex, GitHub Copilot, custom agents)</li> <li>Branching: Each worker gets its own branch (e.g., <code>worker/&lt;feature&gt;</code>); no two workers modify the same core file set in parallel.</li> <li>Must obey patterns and reasoning levels</li> <li>Must build tests with every core change</li> <li>See <code>AGENTS.md</code> \u2192 AI Worker Protocol for full details</li> </ul>"},{"location":"Project_Guide_v3.3/#3-core-principles","title":"3. Core Principles","text":"<ol> <li>Internal units = millimeters</li> <li>Imperial = fractional inches only</li> <li>Defaults never change unless Settings says so</li> <li>Presets never override defaults</li> <li>TaskPanel never auto-selects presets</li> <li>hydrate_from_params() ALWAYS runs before UI widgets</li> <li>Workers must use reasoning level declarations</li> <li>Every logic change must include tests</li> <li>UI must not overflow or fail to load</li> <li>Settings panel must always open</li> <li>No relative imports</li> <li>No pattern drift</li> <li>No silent behavior changes</li> </ol>"},{"location":"Project_Guide_v3.3/#4-ai-worker-communication-rules","title":"4. AI Worker Communication Rules","text":""},{"location":"Project_Guide_v3.3/#41-task-spec-format","title":"4.1 Task Spec Format","text":"<p>Every task spec assigned to an AI worker must follow a clear block format (often called a \"Job Card\" or \"Codex Block\"):</p> <pre><code>@worker\nTitle: &lt;Short Task Name&gt;\nFile: &lt;Target File Path&gt;\nAction: &lt;Implement/Refactor/Fix&gt;\nContext: &lt;Brief explanation of what to do&gt;\nRules:\n- &lt;Constraint 1&gt;\n- &lt;Constraint 2&gt;\n</code></pre> <ul> <li>No markdown inside the block</li> <li>Only instructions</li> <li>Must be safe to paste directly into the AI tool</li> </ul>"},{"location":"Project_Guide_v3.3/#42-required-elements-inside-each-block","title":"4.2 Required Elements Inside Each Block","text":"<ul> <li>Full file paths</li> <li>Explicit operation lists</li> <li>Expected behavior</li> <li>Acceptance criteria</li> <li>Guardrails</li> </ul>"},{"location":"Project_Guide_v3.3/#43-reasoning-levels","title":"4.3 Reasoning Levels","text":"<ul> <li>LOW: Trivial changes (typos, small fixes).</li> <li>MEDIUM: Single-file logic changes.</li> <li>HIGH: Multi-file changes, UI updates, or settings logic.</li> <li>EXTRA-HIGH: Architectural refactors or algorithm changes.</li> </ul>"},{"location":"Project_Guide_v3.3/#44-git-workflow","title":"4.4 Git Workflow","text":"<ul> <li>Branching:</li> <li>Lead Developer: <code>jules/&lt;feature&gt;</code> (or similar)</li> <li>AI Workers: <code>worker/&lt;feature&gt;</code>, <code>codex/&lt;feature&gt;</code>, or <code>agent/&lt;feature&gt;</code></li> <li>Rule: Each worker must use a unique branch. Do not share branches between active workers.</li> <li>Commits: Conventional Commits (<code>feat:</code>, <code>fix:</code>, <code>docs:</code>, <code>refactor:</code>)</li> <li>PRs: Required for all changes. Must be reviewed by the Lead Developer.</li> </ul>"},{"location":"Project_Guide_v3.3/#5-hydration-rules-hard-requirements","title":"5. Hydration Rules (Hard Requirements)","text":"<p>Hydration has caused repeated issues. These rules are absolute:</p>"},{"location":"Project_Guide_v3.3/#51-hydrate_from_params-must","title":"5.1 hydrate_from_params() must:","text":"<ul> <li>Load all persistent values</li> <li>Guarantee type consistency</li> <li>Normalize internal units</li> <li>Never access GUI</li> <li>Never import GUI modules</li> <li>Never modify defaults except on Settings save</li> </ul>"},{"location":"Project_Guide_v3.3/#52-taskpanel-initialization-order","title":"5.2 TaskPanel Initialization Order","text":"<p>This order is non-negotiable:</p> <ol> <li>Load session_state</li> <li>Call hydrate_from_params()</li> <li>Create all UI widgets</li> <li>Populate UI values from hydrated state</li> <li>Apply measurement formatting</li> <li>Connect signals</li> <li>Render panel</li> </ol> <p>No exceptions.</p>"},{"location":"Project_Guide_v3.3/#6-measurement-system-architecture","title":"6. Measurement System Architecture","text":""},{"location":"Project_Guide_v3.3/#61-internal-storage","title":"6.1 Internal Storage","text":"<p>Always millimeters.</p>"},{"location":"Project_Guide_v3.3/#62-display-modes","title":"6.2 Display Modes","text":"<ul> <li>metric \u2192 mm</li> <li>imperial \u2192 fractional inches</li> </ul>"},{"location":"Project_Guide_v3.3/#63-ui-reformatting-rules","title":"6.3 UI Reformatting Rules","text":"<p>Switching measurement system requires full reformatting of all numeric UI fields.</p>"},{"location":"Project_Guide_v3.3/#65-split-defaults-new","title":"6.5 Split Defaults (New)","text":"<p>To prevent drift from rounding errors: - User-configurable defaults (Sheet size, Kerf, Gap) must be stored separately for Metric and Imperial. - Switching systems in Settings swaps the loaded default, it does not convert/overwrite the existing one.</p>"},{"location":"Project_Guide_v3.3/#64-fraction-logic","title":"6.4 Fraction Logic","text":"<p>Must support: - whole - fraction - mixed - hyphenated Must round-trip without drift.</p>"},{"location":"Project_Guide_v3.3/#7-preset-default-logic-fortified","title":"7. Preset &amp; Default Logic (Fortified)","text":""},{"location":"Project_Guide_v3.3/#defaults","title":"Defaults","text":"<ul> <li>Set only via Settings panel</li> <li>Never altered by TaskPanel</li> <li>Hydrate_from_params loads them</li> </ul>"},{"location":"Project_Guide_v3.3/#presets","title":"Presets","text":"<ul> <li>Always start blank</li> <li>Only modify sheet width/height</li> <li>Never modify defaults</li> <li>Never auto-selected</li> </ul>"},{"location":"Project_Guide_v3.3/#imperial-default-sheet","title":"Imperial Default Sheet","text":"<p>Exactly 48 \u00d7 96 inches.</p>"},{"location":"Project_Guide_v3.3/#8-ui-behavior-rules","title":"8. UI Behavior Rules","text":""},{"location":"Project_Guide_v3.3/#81-settings-panel","title":"8.1 Settings Panel","text":"<ul> <li>Must always open</li> <li>Must use TaskPanel_Settings</li> <li>Must call hydrate_from_params() before building widgets</li> </ul>"},{"location":"Project_Guide_v3.3/#82-main-taskpanel","title":"8.2 Main TaskPanel","text":"<ul> <li>Acts as a Controller for sub-widgets (<code>Input</code>, <code>Sheet</code>, <code>Nesting</code>).</li> <li>Must reflect hydrated defaults.</li> <li>Must not override defaults.</li> <li>Must not infer presets.</li> <li>Must not open multiple instances.</li> </ul>"},{"location":"Project_Guide_v3.3/#83-sheetsourcenesting-view-rules","title":"8.3 Sheet/Source/Nesting View Rules","text":"<ul> <li>Clear groups before redraw</li> <li>Never leave orphans</li> <li>Auto-zoom after draw</li> <li>Maintain consistent naming:</li> <li>SquatchCut_Sheet</li> <li>SquatchCut_SourceParts</li> <li>SquatchCut_NestedParts</li> </ul>"},{"location":"Project_Guide_v3.3/#9-tests","title":"9. Tests","text":""},{"location":"Project_Guide_v3.3/#91-must-test","title":"9.1 Must Test","text":"<ul> <li>Fraction parsing</li> <li>Fraction formatting</li> <li>CSV parsing</li> <li>Default initialization</li> <li>Hydration logic</li> <li>Preset behavior</li> <li>TaskPanel load behavior</li> <li>Measurement-system conversions</li> </ul>"},{"location":"Project_Guide_v3.3/#92-should-test","title":"9.2 Should Test","text":"<ul> <li>Sheet object creation</li> <li>Group clearing</li> <li>UI stability (when possible)</li> </ul>"},{"location":"Project_Guide_v3.3/#10-add-on-manager-rules","title":"10. Add-On Manager Rules","text":"<p>Workers must ensure:</p> <ul> <li>Correct zip structure</li> <li>Correct metadata</li> <li>No relative imports</li> <li>All icons exist</li> <li>Version increments</li> </ul>"},{"location":"Project_Guide_v3.3/#11-export-architecture","title":"11. Export Architecture","text":""},{"location":"Project_Guide_v3.3/#111-canonical-export-data-model","title":"11.1 Canonical Export Data Model","text":"<ul> <li><code>freecad/SquatchCut/core/exporter.py</code> defines the only valid export model:</li> <li><code>ExportJob</code> \u2013 job-wide metadata + sheets, measurement system, job name.</li> <li><code>ExportSheet</code> \u2013 sheet index, width/height in mm, list of part placements.</li> <li><code>ExportPartPlacement</code> \u2013 per-part geometry (x_mm, y_mm, width_mm, height_mm, rotation_deg) and part_id.</li> <li>ExportJob is built from the latest nesting layout + sheet config via <code>build_export_job_from_current_nesting</code>.</li> <li>All geometry is stored in millimeters. Measurement system only affects formatted strings.</li> </ul>"},{"location":"Project_Guide_v3.3/#112-deterministic-export-behavior","title":"11.2 Deterministic Export Behavior","text":"<ul> <li>CSV export (<code>export_cutlist</code>)</li> <li>Emits stable header columns (sheet_index, mm geometry, formatted strings).</li> <li>Raw mm values are untouched. <code>width_display/height_display</code> respect ExportJob.measurement_system.</li> <li>Tests cover both metric and imperial output.</li> <li>SVG export (<code>export_nesting_to_svg</code>)</li> <li>Generates one 2D SVG per sheet; filenames include <code>_S{n}</code> suffix.</li> <li>Draws sheet border, stroke-only part rectangles, deterministic labels (ID + dimensions), and header \u201cSheet i of N \u2013 WxH units\u201d.</li> <li>No FreeCAD 3D/export calls; everything is generated from ExportJob data.</li> <li>Design Principle: Export behavior must be deterministic and driven solely by ExportJob. FreeCAD document geometry is never a source of truth for exported artifacts.</li> </ul>"},{"location":"Project_Guide_v3.3/#113-out-of-scope","title":"11.3 Out-of-scope","text":"<ul> <li>DXF export remains deferred. Implementing DXF is explicitly out of scope for the current release cycle and cannot block delivery.</li> </ul>"},{"location":"Project_Guide_v3.3/#12-development-rules-summary","title":"12. Development Rules Summary","text":"<ol> <li>Internal unit = mm</li> <li>Imperial UI = fractions only</li> <li>Defaults remain unchanged except in Settings</li> <li>Presets never overwrite defaults</li> <li>TaskPanel never auto-selects presets</li> <li>Hydration before UI</li> <li>Agents must use reasoning levels</li> <li>Tests accompany logic changes</li> <li>UI must never overflow</li> <li>Settings panel must open</li> <li>No relative imports</li> <li>No silent assumptions</li> <li>No redesigns without explicit instructions</li> </ol>"},{"location":"Project_Guide_v3.3/#13-changelog-strategy-for-v33","title":"13. Changelog Strategy for v3.3","text":"<ul> <li>v3.3 (Current):</li> <li>Introduces AI-tool-agnostic worker model (Architect + AI Workers).</li> <li>Clarifies AI workflow and refreshes backlog guidance.</li> <li>Resets backlog to align with current architecture.</li> <li>v3.2:</li> <li>Multi-sheet nesting &amp; production readiness.</li> <li>Settings fixes, hydration rules, UI rules.</li> </ul>"},{"location":"TESTING/","title":"SquatchCut Testing &amp; QA Guide","text":"<p>This document explains how to test the SquatchCut workbench, both automatically (pytest and integration tests) and manually inside FreeCAD.</p> <p>It is written assuming: - You have this repository cloned. - You have Python and FreeCAD installed. - You are comfortable using a terminal (e.g., VS Code terminal).</p>"},{"location":"TESTING/#1-core-tests-no-freecad-required","title":"1. Core Tests (No FreeCAD Required)","text":"<p>These tests cover the pure Python core logic under <code>freecad/SquatchCut/core</code> (imported as <code>SquatchCut.core</code>): - Nesting algorithm (no overlaps, rotation, multiple sheets). - Session state storage (sheet size, kerf, gap, last layout).</p>"},{"location":"TESTING/#11-setup-first-time","title":"1.1. Setup (first time)","text":"<p>Create and activate a virtual environment:</p> <pre><code>python3 -m venv .venv\nsource .venv/bin/activate\n</code></pre> <p>Install test dependencies:</p> <pre><code>pip install pytest pytest-cov\n</code></pre>"},{"location":"TESTING/#12-run-core-tests","title":"1.2. Run core tests","text":"<p>From the repository root:</p> <pre><code>pytest -v\n</code></pre> <p>Or with coverage (core modules exercised by the unit tests):</p> <pre><code>pytest --cov=SquatchCut.core.nesting --cov=SquatchCut.core.session_state --cov-report=term-missing -v\n</code></pre> <p>Expected results:</p> <ul> <li>All tests in <code>tests/</code> should pass.</li> <li>For <code>test_nesting.py</code> you should see test names such as:</li> <li><code>test_nesting_no_overlap_simple</code></li> <li><code>test_nesting_respects_can_rotate</code></li> <li><code>test_nesting_multiple_sheets</code></li> <li><code>test_nesting_rotation_flag_preserved</code></li> </ul> <p>If any test fails, pytest will show: - The test name. - The failing assertion. - The inputs that caused the failure.</p> <p>Use this output to debug the core logic before touching FreeCAD.</p>"},{"location":"TESTING/#2-freecad-integration-tests","title":"2. FreeCAD Integration Tests","text":"<p>These tests run inside FreeCAD and exercise real commands: - Creating rectangles in a document. - Running <code>RunNestingCommand</code>. - Verifying that <code>Sheet_*</code> groups and clones exist. - Verifying that running nesting with no selection does not crash.  - Task panel flows (defaults, units toggling, rotation defaults) when FreeCAD GUI is available.</p>"},{"location":"TESTING/#21-ensure-pytest-is-installed-in-freecad","title":"2.1. Ensure pytest is installed in FreeCAD","text":"<p>You only need to do this once per FreeCAD Python environment:</p> <pre><code>FreeCADCmd -c \"import sys, subprocess; subprocess.check_call([sys.executable, '-m', 'pip', 'install', 'pytest'])\"\n</code></pre> <p>On macOS with the official FreeCAD .app, <code>FreeCADCmd</code> is usually:</p> <pre><code>/Applications/FreeCAD.app/Contents/MacOS/FreeCADCmd\n</code></pre> <p>So the command becomes:</p> <pre><code>/Applications/FreeCAD.app/Contents/MacOS/FreeCADCmd -c \"import sys, subprocess; subprocess.check_call([sys.executable, '-m', 'pip', 'install', 'pytest'])\"\n</code></pre>"},{"location":"TESTING/#22-run-integration-tests","title":"2.2. Run integration tests","text":"<p>From the repository root:</p> <pre><code>FreeCADCmd -c \"import run_freecad_tests\"\n</code></pre> <p>(Or using the full path to <code>FreeCADCmd</code> as above.)</p> <p>This will run the tests in <code>tests_integration/</code>.</p> <p>Expected results:</p> <ul> <li><code>test_run_nesting_creates_sheet_groups_and_clones</code> passes:</li> <li>At least one <code>Sheet_*</code> group exists.</li> <li>There are at least as many clones as input panels.</li> <li><code>test_run_nesting_no_selection_shows_no_crash</code> passes:</li> <li>Running nesting with no selection does not create any <code>Sheet_*</code> groups.</li> <li>No exception bubbles out of the command.</li> <li><code>test_taskpanel_workflow</code> suite (skips if FreeCADGui is unavailable):</li> <li>Saved defaults in Settings appear in the main TaskPanel with no preset auto-selection.</li> <li>Units toggling reformats sheet/kerf fields.</li> <li>Rotation defaults in Settings populate the TaskPanel rotation checkboxes.</li> </ul> <p>Integration tests are a quick sanity check that the workbench actually behaves correctly inside FreeCAD with real documents.</p>"},{"location":"TESTING/#23-running-gui-smoke-tests-from-freecad","title":"2.3. Running GUI smoke tests from FreeCAD","text":"<p>Inside FreeCAD (Python console):</p> <pre><code>Gui.runCommand(\"SquatchCut_RunGUITests\")\n</code></pre> <p>This runs the built-in GUI smoke suite (import, nesting preview, units checks, cutlist export). Use this after significant UI changes.</p>"},{"location":"TESTING/#3-manual-qa-checklist-in-freecad","title":"3. Manual QA Checklist in FreeCAD","text":"<p>Use this checklist when doing manual QA in FreeCAD. This is especially important before a release or when major changes are made to nesting, CSV import, or settings.</p>"},{"location":"TESTING/#31-settings-panel","title":"3.1. Settings panel","text":"<ol> <li>Open FreeCAD.</li> <li>Create or open a document.</li> <li>From the SquatchCut workbench, run the SquatchCut Settings command.</li> <li>In the settings panel:</li> <li>Change sheet width and height.</li> <li>Change kerf (mm) and gap (mm).</li> <li>Toggle \"Allow rotation by default\".</li> <li>Click OK.</li> <li>Verify:</li> <li>The Report View shows an updated settings message.</li> <li>Re-opening the Settings panel shows the same values you entered.</li> <li>Sheet size values are respected by the next nesting operation.</li> </ol>"},{"location":"TESTING/#32-csv-import-with-rotation-specified","title":"3.2. CSV import with rotation specified","text":"<ol> <li>Prepare a CSV with:</li> <li><code>id,width_mm,height_mm,allow_rotate</code></li> <li>Some rows with <code>allow_rotate=1</code>, some with <code>allow_rotate=0</code>.</li> <li>Use the SquatchCut CSV import command to load this file.</li> <li>Verify:<ul> <li>Panels are created in the document.</li> </ul> </li> <li>Each imported panel has a <code>SquatchCutCanRotate</code> property:<ul> <li><code>True</code> for <code>allow_rotate=1</code>.</li> <li><code>False</code> for <code>allow_rotate=0</code>.</li> </ul> </li> <li>Run nesting:</li> <li>Check that some panels are rotated (those allowed).</li> <li>Panels with <code>allow_rotate=0</code> must never be rotated.</li> </ol>"},{"location":"TESTING/#33-csv-import-without-rotation-column-default-behavior","title":"3.3. CSV import without rotation column (default behavior)","text":"<ol> <li>Prepare a CSV without <code>allow_rotate</code> column.</li> <li>In the Settings panel, set:</li> <li>\"Allow rotation by default\" = ON.</li> <li>Import the CSV and run nesting.</li> <li>Verify:</li> <li> <p>Panels are allowed to rotate and will rotate when beneficial.</p> </li> <li> <p>Set \"Allow rotation by default\" = OFF.</p> </li> <li>Import the same CSV again and run nesting.</li> <li>Verify:</li> <li>No panels are rotated (all rotation_deg = 0 in the export).</li> </ol>"},{"location":"TESTING/#34-nesting-placement-no-overlaps-multiple-sheets","title":"3.4. Nesting placement (no overlaps, multiple sheets)","text":"<ol> <li>Create multiple rectangles of varying sizes in a document.</li> <li>Run nesting.</li> <li>Verify:</li> <li><code>Sheet_*</code> groups are created.</li> <li>No shapes overlap visually.</li> <li>If the total area is large, more than one sheet is used.</li> </ol>"},{"location":"TESTING/#35-csv-export-of-nesting","title":"3.5. CSV export of nesting","text":"<ol> <li>Perform a nesting as above.</li> <li>Run the Export Nesting CSV command.</li> <li>Choose a filename and save.</li> <li>Open the CSV in a spreadsheet viewer.</li> <li>Verify:</li> <li>Header includes: <code>sheet_index,part_id,width_mm,height_mm,x_mm,y_mm,angle_deg</code>.</li> <li>Each input part appears exactly once in the CSV output.</li> <li><code>sheet_index</code> values correspond to the FreeCAD <code>Sheet_*</code> groups.</li> <li><code>angle_deg</code> is 0 for non-rotated parts and 90 for rotated parts.</li> </ol>"},{"location":"TESTING/#36-error-handling","title":"3.6. Error handling","text":"<ol> <li>Try to import a CSV missing required columns (e.g., no id or width).</li> <li>Expect: a friendly error dialog explaining missing columns.</li> <li>Try running nesting with no panels selected.</li> <li>Expect: a warning dialog and no sheets created.</li> <li>Try exporting CSV before any nesting has been run.</li> <li>Expect: a message that no layout is available to export.</li> </ol>"},{"location":"TESTING/#37-ui-smoke-fast-pass","title":"3.7. UI Smoke (fast pass)","text":"<ul> <li>Open SquatchCut workbench; launch the main Task panel.</li> <li>Toggle Units (Metric \u2194 Imperial) and confirm sheet/kerf fields reformat; preset remains \u201cNone.\u201d</li> <li>Import <code>freecad/testing/csv/valid_panels_small.csv</code>; confirm parts table populates.</li> <li>Run nesting preview; confirm nested layout appears and Source/Nested view toggles work.</li> <li>Export cutlist CSV; open and verify rows match table entries.</li> <li>Open Settings, set sheet/kerf defaults, save; reopen Task panel and confirm defaults applied without preset auto-selection.</li> </ul>"},{"location":"TESTING/#4-running-tests-inside-the-dockerdevcontainer-environment","title":"4. Running tests inside the Docker/devcontainer environment","text":"<p>The repository includes <code>.devcontainer/</code> files so you can run tests inside a reproducible Linux + FreeCAD environment. This is useful if your host machine does not have FreeCAD installed or when you want to match CI exactly.</p>"},{"location":"TESTING/#41-build-and-launch-the-container","title":"4.1 Build and launch the container","text":"<pre><code>docker build -f .devcontainer/Dockerfile -t squatchcut-dev .\ndocker run --rm -it -v \"$(pwd)\":/workspaces/SquatchCut squatchcut-dev /bin/bash\n</code></pre> <p>Inside the container the repo lives at <code>/workspaces/SquatchCut</code>, FreeCAD lives under <code>/usr/bin/freecadcmd</code>, and Python 3.10 is the default interpreter. If the VS Code Dev Container workflow runs, dependencies are installed automatically; otherwise run:</p> <pre><code>cd /workspaces/SquatchCut\npip install -e .[dev]\n</code></pre>"},{"location":"TESTING/#42-running-tests-in-the-container","title":"4.2 Running tests in the container","text":"<ul> <li>Core tests (no FreeCAD required):</li> </ul> <p><code>bash   cd /workspaces/SquatchCut   pytest</code></p> <ul> <li>FreeCAD-aware pytest modules (anything that imports <code>FreeCAD</code>, <code>FreeCADGui</code>, or GUI stubs):</li> </ul> <p><code>bash   PYTHONPATH=/usr/lib/freecad-python3/lib pytest tests/test_views.py</code></p> <p>Prepend the same <code>PYTHONPATH</code> to run the entire suite under the FreeCAD Python environment.</p> <ul> <li>FreeCAD integration suite:</li> </ul> <p><code>bash   FreeCADCmd -c \"import run_freecad_tests\"</code></p> <p>(<code>FreeCADCmd</code> already points to <code>/usr/bin/freecadcmd</code> inside the container.)</p>"},{"location":"TESTING/#43-troubleshooting","title":"4.3 Troubleshooting","text":"<ul> <li>If pytest cannot import <code>FreeCAD</code>, double-check the <code>PYTHONPATH=/usr/lib/freecad-python3/lib</code> prefix.</li> <li>GUI smoke tests that rely on Qt widgets are limited by the lightweight stubs bundled in <code>gui/qt_compat</code>. When a feature relies on a specific Qt API (e.g., <code>QtWidgets.QLabel.setWordWrap</code>), guard it with <code>hasattr(...)</code> so tests can still run headless.</li> <li>The default container user is <code>vscode</code>. Use <code>pip install --user ...</code> only if the editable install is not available.</li> </ul>"},{"location":"TESTING/#5-useful-pytest-options","title":"5. Useful pytest options","text":"<p>For deeper debugging, use:</p> <pre><code>pytest -vv\n</code></pre> <p>This prints each test name and makes it easier to see exactly which scenario passed or failed.</p> <p>To focus on a single test file:</p> <pre><code>pytest -vv tests/test_nesting.py\n</code></pre> <p>Or a single test within that file:</p> <pre><code>pytest -vv tests/test_nesting.py::test_nesting_no_overlap_simple\n</code></pre>"},{"location":"TESTING/#6-summary","title":"6. Summary","text":"<ul> <li>Run core tests regularly during development (<code>pytest -v</code>).</li> <li>Run FreeCAD integration tests before major changes or releases.</li> <li>Use the manual QA checklist when you need to validate end-to-end   behavior in a FreeCAD GUI session.</li> <li>If any step above fails, capture:</li> <li>The exact test command you ran.</li> <li>The console/Report View output.</li> <li>A copy of the CSV or file that triggered the issue.   And open a bug ticket with this information.</li> </ul>"},{"location":"UAT_Checklist/","title":"SquatchCut UAT Checklist","text":"<p>Version: UAT v0.1 Audience: Volunteer / UAT testers Refer to <code>docs/Project_Guide_v3.2.md</code> for the authoritative v3.2 testing, UI, and Codex expectations.</p> <p>Instructions:</p> <ul> <li>Follow each step in order.</li> <li>For each step, mark Pass (\u2705) or Fail (\u274c) in the table.</li> <li>Add notes if anything is confusing, broken, or unexpected.</li> </ul> <p>You may print this page or fill it in digitally.</p>"},{"location":"UAT_Checklist/#tester-info","title":"Tester Info","text":"<ul> <li>Name: </li> <li>Date: </li> <li>OS &amp; Version (e.g., Windows 11, macOS 15): </li> <li>FreeCAD Version: </li> <li>SquatchCut Build / ZIP Name: </li> </ul>"},{"location":"UAT_Checklist/#legend","title":"Legend","text":"<ul> <li>\u2705 = Worked as expected</li> <li>\u274c = Didn\u2019t work or was confusing</li> <li>N/A = Not applicable or skipped</li> </ul>"},{"location":"UAT_Checklist/#checklist","title":"Checklist","text":"# Step Result (\u2705/\u274c/N/A) Notes (what happened?) 1 Start FreeCAD. 2 Confirm you see a SquatchCut toolbar/menu with SquatchCut and Settings buttons. 3 Click Settings. Verify the settings panel opens without errors. 4 In Settings, set your measurement system (Metric or Imperial) and a default sheet size. 5 Save/apply settings and close the Settings panel. 6 Click the main SquatchCut button. Confirm the main panel opens without errors. 7 In the main panel, confirm you see sections for CSV import, sheet/presets, and nesting. 8 Set CSV Units to match <code>test_parts.csv</code> (as instructed). 9 Use the file picker to select <code>test_parts.csv</code>. 10 Click Import Parts. No error dialog should appear. 11 In the FreeCAD Model tree, confirm a Source Parts group appears and contains part items. 12 Change the sheet size using the sheet width/height fields (without using a preset). 13 Verify that the visible sheet in the 3D view updates to the new size. 14 Select a sheet preset (e.g., 4\u2032 x 8\u2032). Confirm the sheet fields update to match the preset. 15 Manually change the sheet width or height again and confirm the preset selection returns to \"None/Custom\". 16 Click Run Nesting. 17 In the Model tree, confirm a Nested Parts group appears or is rebuilt. 18 Confirm nested parts appear on top of the sheet in the 3D view (no parts obviously off-sheet). 19 Run nesting a second time without changing the CSV. Confirm the Nested Parts group updates rather than duplicating parts. 20 Hide the Source Parts group, leaving only sheet + nested layout visible. 21 Save the FreeCAD document without errors. 22 (Optional) Use File \u2192 Export to export the layout (DXF/SVG/PDF) and confirm the export works."},{"location":"UAT_Checklist/#overall-experience","title":"Overall Experience","text":"<p>Please briefly describe:</p> <ul> <li>What worked well?</li> <li>What was confusing?</li> <li>Any crashes or serious bugs?</li> </ul>"},{"location":"UAT_Checklist/#additional-comments","title":"Additional Comments","text":"<p>(Use as much space as you need.)</p> <p>End of checklist.</p>"},{"location":"UAT_Prep_Instructions/","title":"SquatchCut UAT Prep Instructions","text":"<p>Audience: Volunteer testers / UAT participants Goal: Help you install SquatchCut and run a simple, repeatable test script. Please follow <code>docs/Project_Guide_v3.3.md</code> for the latest AI-fortified instructions and UI expectations before running UAT.</p> <p>You do not need to know how to code. You do not need GitHub.</p>"},{"location":"UAT_Prep_Instructions/#1-what-youll-need","title":"1. What You\u2019ll Need","text":"<p>Before you start:</p> <ul> <li>A computer with:</li> <li>Windows, macOS, or Linux</li> <li>FreeCAD 1.0+ installed</li> <li>The SquatchCut add-on ZIP file</li> <li>Test files provided to you:</li> <li><code>test_parts.csv</code></li> <li><code>UAT_Checklist.md</code> (this file may be bundled or referenced)</li> <li>Any feedback template your coordinator provides</li> </ul>"},{"location":"UAT_Prep_Instructions/#2-what-you-do-not-need","title":"2. What You Do Not Need","text":"<p>You do not need:</p> <ul> <li>A GitHub account</li> <li>GitHub Desktop</li> <li>A compiler</li> <li>Any knowledge of Python</li> </ul> <p>Please do not:</p> <ul> <li>Rename the test CSV file</li> <li>Move files into the FreeCAD installation folders</li> <li>Install additional tools unless explicitly instructed</li> </ul>"},{"location":"UAT_Prep_Instructions/#3-install-squatchcut","title":"3. Install SquatchCut","text":"<ol> <li>Open FreeCAD.</li> <li>Go to Tools \u2192 Add-on Manager.</li> <li>Click Install from ZIP.</li> <li>Choose the SquatchCut ZIP file provided to you.</li> <li>Wait for installation to complete.</li> <li>Close and restart FreeCAD.</li> </ol> <p>After restart, confirm that:</p> <ul> <li>A SquatchCut toolbar or menu appears.</li> <li>You see at least:</li> <li>A SquatchCut button (main panel)</li> <li>A Settings button</li> </ul> <p>If not, please note that as a UAT issue.</p>"},{"location":"UAT_Prep_Instructions/#4-files-you-will-use","title":"4. Files You Will Use","text":"<p>Your coordinator should give you:</p> <ul> <li> <p><code>test_parts.csv</code>   Sample parts list for testing.</p> </li> <li> <p><code>UAT_Checklist.md</code>   Step-by-step script to follow inside FreeCAD.</p> </li> <li> <p>A feedback template (could be a text file, form, or email instructions).</p> </li> </ul> <p>Keep these together in a known folder (e.g., <code>Documents/SquatchCut_UAT/</code>).</p>"},{"location":"UAT_Prep_Instructions/#5-how-to-run-the-test","title":"5. How to Run the Test","text":"<ol> <li>Start FreeCAD.</li> <li>Ensure the SquatchCut toolbar is visible.</li> <li>Open the UAT_Checklist.md file in any text editor (Notepad, VS Code, etc.).</li> <li>Follow each step in the checklist in order.</li> <li>After each step, mark:</li> <li>Pass \u2013 if it worked and made sense.</li> <li>Fail \u2013 if it did not work, crashed, or was confusing.</li> </ol> <p>Use the notes column to record:</p> <ul> <li>What you expected</li> <li>What actually happened</li> <li>Any error messages or weird behavior</li> </ul> <p>You are not being graded. The software is.</p>"},{"location":"UAT_Prep_Instructions/#6-taking-screenshots-if-something-fails","title":"6. Taking Screenshots (If Something Fails)","text":"<p>If something breaks or looks wrong:</p> <ul> <li>On Windows:</li> <li>Press Win + Shift + S to open the Snip &amp; Sketch / Snipping tool.</li> <li>Drag a box around the area.</li> <li> <p>Save the image.</p> </li> <li> <p>On macOS:</p> </li> <li>Press Command + Shift + 4.</li> <li>Drag a box around the area.</li> <li> <p>A screenshot is saved to your desktop.</p> </li> <li> <p>On Linux:</p> </li> <li>Use Print Screen or your distro\u2019s screenshot tool.</li> </ul> <p>Try to capture:</p> <ul> <li>The model tree (left panel)</li> <li>The SquatchCut UI</li> <li>The 3D view showing the layout</li> </ul>"},{"location":"UAT_Prep_Instructions/#7-when-youre-done","title":"7. When You\u2019re Done","text":"<p>When you complete the checklist:</p> <ol> <li>Save your filled-out checklist (if it\u2019s a file).</li> <li>Collect:</li> <li>The completed checklist</li> <li>Any screenshots</li> <li> <p>Any test CSV variations you used (if requested)</p> </li> <li> <p>Send everything to your SquatchCut contact using the method they specified:</p> </li> <li>Email</li> <li>Shared folder</li> <li>Forms, etc.</li> </ol> <p>If you got stuck and couldn\u2019t complete the script, still send what you have and note where you stopped.</p> <p>Thank you for helping test SquatchCut!</p>"},{"location":"ai_workflows/","title":"AI Worker Workflows","text":"<p>Note: AI Workers operate as implementation agents under the direction of the Lead Developer (e.g., Jules) and Architect (Spec Owner). See <code>AGENTS.md</code> for the full protocol.</p>"},{"location":"ai_workflows/#overview","title":"Overview","text":"<ul> <li>This repository uses <code>@worker</code> headers in each module to guide incremental development.</li> <li>Each module documents its own responsibility, boundaries, and expectations to keep changes targeted.</li> </ul>"},{"location":"ai_workflows/#global-worker-commands","title":"Global Worker Commands","text":"<ol> <li><code>@worker implement next core logic</code></li> <li> <p>Worker should examine method stubs in core modules and fill in the next unimplemented piece.</p> </li> <li> <p><code>@worker update feature &lt;X&gt;</code></p> </li> <li> <p>Worker should locate the correct module(s), update logic, and avoid touching unrelated modules.</p> </li> <li> <p><code>@worker refactor safely</code></p> </li> <li> <p>Worker should refactor only the module containing the comment without changing structure or deleting headers.</p> </li> <li> <p><code>@worker sync architecture</code></p> </li> <li> <p>Worker should compare code with <code>docs/architecture.md</code> and fix inconsistencies.</p> </li> <li> <p><code>@worker integrate GUI</code></p> </li> <li> <p>Worker should update dialogs and commands to work with the current state of the core logic.</p> </li> <li> <p><code>@worker implementation status</code></p> </li> <li>Worker should scan headers and list which modules have remaining TODO implementations.</li> </ol>"},{"location":"ai_workflows/#rules-for-workers","title":"Rules for Workers","text":"<ul> <li>Do not overwrite files unless instructed.</li> <li>Only modify sections relevant to the active module.</li> <li>Follow <code>@worker</code> block expectations.</li> <li>Preserve docstrings and method signatures.</li> <li>Never introduce cross-module logic unless specified.</li> </ul>"},{"location":"architecture/","title":"Architecture","text":"<p>This document snapshots how SquatchCut is organized so new work streams (AI agents or humans) stay aligned with the existing structure, data flow, and helper layers.</p>"},{"location":"architecture/#1-project-layout","title":"1. Project Layout","text":"<ul> <li><code>root/</code></li> <li><code>freecad/SquatchCut/</code><ul> <li><code>InitGui.py</code>: workbench registration, toolbar/menu hooks, icon loading.</li> <li><code>__init__.py</code>: module metadata, lazy-bundled imports for FreeCAD.</li> <li><code>gui/</code>: Qt widgets, commands, dialogs, and view helpers.</li> <li><code>core/</code>: pure-Python algorithms, session plumbing, exporters, and utilities.</li> <li><code>resources/</code>: icons, templates, and static UI helpers.</li> </ul> </li> <li><code>docs/</code>: architecture/roadmap/backlog, developer guidance, UAT + testing instructions.</li> <li><code>tests/</code>: pytest regression suite exercising hydration, nesting, exports, and docs.</li> <li><code>assets/</code> &amp; <code>blog/</code>: site collateral (screenshots, articles) that support docs.</li> <li>Top-level helpers: README, <code>AGENTS.md</code>, <code>squatchcut.code-workspace</code>, and CI config files.</li> </ul> <p>This layout keeps FreeCAD integrations under <code>freecad/SquatchCut</code> while leaving tests/docs at the repo root for easy access by automation and documentation flows.</p>"},{"location":"architecture/#2-core-modules","title":"2. Core Modules","text":"<p>The <code>core/</code> package is the heart of the nesting logic and keeps FreeCAD dependencies confined to integration points.</p> <ul> <li>Session + settings</li> <li><code>session_state.py</code>: in-memory defaults, job sheets, panels, measurement system, and export flags used by all UI wiring.</li> <li><code>session.py</code>: mirrors <code>session_state</code> into the active FreeCAD document, tracks FreeCAD objects, and clears/chases Group nodes.</li> <li><code>preferences.py</code> &amp; <code>presets.py</code>: wrap FreeCAD preferences, expose defaults per measurement system, and manage preset metadata used by the TaskPanel.</li> <li> <p><code>settings.py</code>: hydrates defaults, exposes the configuration API, and guards persistence rules described in <code>docs/Project_Guide_v3.2.md</code>.</p> </li> <li> <p>Unit conversion &amp; logging</p> </li> <li><code>units.py</code> + <code>text_helpers.py</code>: convert between millimeters and fractional inches, format preset labels, and share helper text strings.</li> <li> <p><code>logger.py</code>: centralized logger with SquatchCut-friendly prefixes for reporting and GUI tests.</p> </li> <li> <p>CSV ingestion</p> </li> <li><code>csv_import.py</code>: high-level validation harness used by GUI commands and CLI integrations (includes measurement overrides).</li> <li> <p><code>csv_loader.py</code>: low-level importer that normalizes rows, enforces required headers, and converts everything into panel dictionaries.</p> </li> <li> <p>Panel discovery + validation</p> </li> <li><code>shape_extractor.py</code>: reads selected FreeCAD objects, enforces <code>SquatchCutCanRotate</code>, and exposes clean panel metadata.</li> <li> <p><code>overlap_check.py</code>: utility to ensure placements do not overlap when verifying layouts.</p> </li> <li> <p>Nesting &amp; optimization</p> </li> <li><code>nesting.py</code>: orchestrates the multi-sheet workflow (sheet iteration, job sheet handling, compute_utilization, estimate_cut_counts).</li> <li><code>cut_optimization.py</code>: solver that does guillotine/shelf packing against free rectangles.</li> <li><code>nesting_engine.py</code>: encapsulates the algorithm that <code>cut_optimization</code> relies on; supports both \u201cmaterial\u201d and \u201ccuts\u201d optimization modes.</li> <li> <p><code>multi_sheet_optimizer.py</code>: spreads panels across multiple sheets, stopping when all parts are placed or sheets are exhausted.</p> </li> <li> <p>Geometry &amp; exports</p> </li> <li><code>geometry_output.py</code>: turns placements into FreeCAD rectangles, groups, and sources/nested sheet hierarchies.</li> <li><code>geometry_sync.py</code>: keeps the document in sync after imports/nesting by rebuilding views and logging stale-reference issues.</li> <li><code>view_controller.py</code>: TaskPanel-driven helpers to show source vs. nesting views, clear groups, and zoom to objects.</li> <li><code>gui_tests.py</code>: GUI-level smoke checks invoked from the Settings panel and the developer toolbar.</li> <li> <p><code>cutlist.py</code>, <code>exporter.py</code>, <code>report_generator.py</code>: build deterministic exports (CSV cutlists, SVG maps, PDF reports) from <code>ExportJob</code>/<code>ExportSheet</code> state instead of FreeCAD objects.</p> </li> <li> <p>Sheet helpers</p> </li> <li><code>sheet_model.py</code>: manages FreeCAD Group/Boundary helpers and ensures canonical names/clear/rebuild flows.</li> <li><code>sheet_presets.py</code>: provides factory presets for metric/imperial defaults that never auto-select themselves.</li> </ul> <p>The <code>core</code> package intentionally minimizes FreeCAD API surface, enabling the python-only tests to run inside the Docker/devcontainer environment described in <code>docs/TESTING.md</code>.</p>"},{"location":"architecture/#3-gui-layer","title":"3. GUI Layer","text":"<p><code>gui/</code> wraps commands, dialogs, and widgets for user interaction.</p> <ul> <li><code>gui/commands/</code>: entry points that plug into the FreeCAD GUI.</li> <li><code>cmd_run_nesting.py</code>, <code>cmd_export_report.py</code>, <code>cmd_import_csv.py</code>, <code>cmd_set_sheet_size.py</code>, <code>cmd_preferences.py</code>, <code>cmd_run_gui_tests.py</code>, <code>cmd_add_shapes.py</code>.</li> <li> <p>Commands import <code>core</code> helpers, show dialogs, and set <code>session_state</code> before running logic.</p> </li> <li> <p>Dialogs: <code>gui/dialogs/*.py</code> (CSV import, export report, run nesting, select shapes, sheet size) gather structured input before deferring to commands.</p> </li> <li> <p>TaskPanel widgets: </p> </li> <li><code>taskpanel_main.py</code> (main TaskPanel + summary stats + new developer tools section), </li> <li><code>taskpanel_settings.py</code> (settings UI with GUI test launcher/status), </li> <li><code>taskpanel_nesting.py</code>, <code>taskpanel_sheet.py</code>, <code>taskpanel_input.py</code>.</li> <li> <p><code>qt_compat.py</code> provides lightweight Qt stubs so tests can instantiate widgets headlessly.</p> </li> <li> <p>Views/helpers: <code>source_view.py</code>, <code>nesting_view.py</code>, <code>view_helpers.py</code>, <code>view_utils.py</code> coordinate FreeCAD object visibility.</p> </li> <li> <p><code>icons.py</code> resolves bundled icon names for commands and panels (no new icon dependencies allowed without review).</p> </li> </ul>"},{"location":"architecture/#4-data-flow","title":"4. Data Flow","text":"<ol> <li>CSV import or FreeCAD shape selection feeds panel metadata into <code>session_state</code>.</li> <li>The TaskPanel (main + settings) hydrates defaults via <code>settings.hydrate_from_params()</code> and populates widgets/sheets.</li> <li><code>session_state</code> + <code>nesting.py</code> assemble panels, job sheets, kerf/spacing, and routing (optimize-for-cut vs material). This includes <code>nesting_engine</code>, <code>cut_optimization</code>, and <code>multi_sheet_optimizer</code>.</li> <li><code>geometry_output</code> + <code>view_controller</code> rebuild the FreeCAD scene (source vs nested) and log visual diagnostics.</li> <li><code>Exporter</code>, <code>cutlist</code>, and <code>report_generator</code> read <code>ExportJob</code>/<code>ExportSheet</code> state to write deterministic CSV/SVG reports; FreeCAD geometry is never directly traversed when exports exist.</li> <li>Developer-facing GUI tests (<code>core/gui_tests.py</code>, TaskPanel developer group) run a lean import + nesting cycle and log formatted results for Report view visibility.</li> </ol>"},{"location":"architecture/#5-supporting-documentation-tools","title":"5. Supporting Documentation &amp; Tools","text":"<ul> <li>Docs: <code>docs/Project_Guide_v3.2.md</code>, <code>docs/Backlog.md</code>, <code>docs/TESTING.md</code>, <code>docs/Development_Environment.md</code>, <code>docs/user_guide.md</code>, and the root <code>AGENTS.md</code> describe policies every change must obey.</li> <li>Testing: <code>docs/TESTING.md</code> and the Docker/devcontainer instructions explain how to run <code>pytest</code> (pure Python and FreeCAD-aware) plus <code>FreeCADCmd</code> GUI flows.</li> <li>Developer tooling: <code>gui/taskpanel_settings.py</code> and <code>core/gui_tests.py</code> surface the GUI test launcher, while <code>docs/TESTING.md</code> explains the Docker workflow for matching CI.</li> <li>Markdown assets (roadmap/backlog) live under <code>docs/</code>; they are validated by <code>tests/test_docs_backlog_structure.py</code> so future edits stay aligned with stated priorities.</li> </ul> <p>Keeping this document synchronized with the real file tree prevents misconceptions about where logic lives and what responsibilities each module bears.</p>"},{"location":"backlog_archive_v3.2/","title":"SquatchCut Backlog (Archive v3.2)","text":""},{"location":"backlog_archive_v3.2/#completed-since-v32","title":"Completed Since v3.2","text":"<ul> <li>Settings Panel Behavior \u2013 Settings TaskPanel opens reliably, hydrates before widgets, and only persists defaults on explicit save (<code>freecad/SquatchCut/gui/taskpanel_settings.py</code>, hydration helpers).</li> <li>Unified Job-Sheet Normalization \u2013 <code>_normalize_sheet_definition</code> + helper pipeline now feeds every nesting strategy with the same validated sheet list (<code>freecad/SquatchCut/core/nesting.py</code>).</li> <li>Baseline Multi-Sheet Support \u2013 Standard, cut-friendly, and guillotine strategies accept multi-sheet jobs with <code>sheet_index</code> fidelity (<code>freecad/SquatchCut/core/nesting.py</code>, <code>freecad/SquatchCut/core/cut_optimization.py</code>).</li> <li>Warning Banner Infrastructure \u2013 TaskPanel warning banner warns when cut modes may ignore sheets; <code>_sheet_warning_active</code> wiring covered by hydration tests (<code>freecad/SquatchCut/gui/taskpanel_main.py</code>, <code>tests/test_taskpanel_hydration.py</code>).</li> <li>Documentation &amp; Backlog Sync \u2013 v3.2 guide and this backlog reflect the shared job-sheet pipeline, warning banner, and current priorities (<code>docs/Project_Guide_v3.2.md</code>).</li> <li>AI-Friendly Dev Environment \u2013 Host-cloned repo, bind-mounted dev container, and <code>squatchcut.code-workspace</code> defined for ChatGPT/Codex compatibility (<code>.devcontainer/devcontainer.json</code>, <code>squatchcut.code-workspace</code>, <code>docs/Development_Environment.md</code>).</li> <li>Canonical ExportJob Model \u2013 <code>ExportJob</code>, <code>ExportSheet</code>, and <code>ExportPartPlacement</code> defined/tested in <code>freecad/SquatchCut/core/exporter.py</code>; <code>build_export_job_from_current_nesting</code> is the sole bridge from nesting to exports.</li> <li>CSV Cutlist Export from ExportJob \u2013 <code>export_cutlist</code> now writes deterministic CSV rows (raw mm + formatted strings) using ExportJob; TaskPanel routes CSV flows exclusively through exporter.py.</li> <li>SVG 2D Export from ExportJob \u2013 <code>export_nesting_to_svg</code> renders one sheet-per-file SVG with sheet borders, part rectangles, and labels without touching FreeCAD geometry; TaskPanel uses this gateway for SVG.</li> <li>Centralized Export Gateway \u2013 All TaskPanel exports call <code>build_export_job_from_current_nesting</code> + <code>exporter.export_*</code>; no other module writes CSV/SVG files directly.</li> </ul>"},{"location":"backlog_archive_v3.2/#active-backlog-high-priority","title":"Active Backlog (High Priority)","text":"<ul> <li> <p>P1 \u2013 Preview Determinism &amp; Cleanup \u2013 Separate preview from apply so preview is non-destructive, and keep <code>SquatchCut_Sheet_*</code>, <code>SquatchCut_SourceParts_*</code>, and <code>SquatchCut_NestedParts_*</code> groups synchronized/cleared across Preview/Apply runs. Scope: <code>freecad/SquatchCut/gui/taskpanel_main.py</code>, <code>freecad/SquatchCut/core/view_controller.py</code>, <code>freecad/SquatchCut/core/session.py</code></p> </li> <li> <p>P1 \u2013 TaskPanel Overflow &amp; Ergonomics \u2013 Rework dense button/checkbox rows (Preview/Run/Show Source, warning banner, sheet controls) to prevent clipping on narrow docks, and add/update minimal UI smoke checks to ensure the TaskPanel initializes cleanly at narrow dock widths (~300\u2013350 px). Scope: <code>freecad/SquatchCut/gui/taskpanel_main.py</code>, <code>tests/test_taskpanel_hydration.py</code> (and/or lightweight GUI smoke tests)</p> </li> <li> <p>P1 \u2013 Multi-Sheet Visualization Polish \u2013 Improve per-sheet labeling, spacing, and navigation inside the 3D view so advanced sheet stacks are obvious and ghost objects never remain after reruns. Scope: <code>freecad/SquatchCut/gui/nesting_view.py</code>, <code>freecad/SquatchCut/core/view_controller.py</code></p> </li> <li> <p>P1 \u2013 Test Suite Expansion (Hydration, Units, Preview) \u2013 Add coverage for measurement toggles, fractional-inch formatting drift, preview lifecycle (Preview \u2192 Preview \u2192 Apply vs Apply-only), <code>sheet_index</code> propagation, and basic sheet exhaustion scenarios. Scope: <code>tests/test_taskpanel_hydration.py</code>, <code>tests/test_nesting.py</code>, new preview/exhaustion-focused suites</p> </li> <li> <p>P2 \u2013 CSV Export &amp; Cutlist Determinism \u2013 Replace the placeholder export command with a working, deterministic cutlist writer that orders rows by sheet index and cut order and emits stable, documented fields. Scope: <code>freecad/SquatchCut/gui/commands/cmd_run_nesting.py</code> + helpers</p> </li> <li> <p>P2 \u2013 DXF Export from ExportJob (Deferred) \u2013 Implement DXF generation from the same 2D sheet/part representation once CSV/SVG pipelines are locked. Until then, DXF remains non-blocking. Scope: <code>freecad/SquatchCut/core/exporter.py</code> (future work)</p> </li> <li> <p>P2 \u2013 Documentation &amp; Sample Data Updates \u2013 Update user-facing docs and examples to match the v3.3 UX, including Preview vs Apply workflow, multi-sheet nesting behavior, and shipping both metric and imperial sample CSVs with expected results. Scope: <code>docs/Project_Guide_v3.2.md</code>, <code>docs/user_guide.md</code>, <code>docs/samples/*</code></p> </li> <li> <p>P2 \u2013 Warning Banner Lifecycle Tests \u2013 Ensure <code>_sheet_warning_active</code> and banner text update correctly when nesting mode, job sheets, or unit systems change so the banner never gets stuck \u201con\u201d or \u201coff\u201d. Scope: <code>freecad/SquatchCut/gui/taskpanel_main.py</code>, <code>tests/test_taskpanel_hydration.py</code></p> </li> <li> <p>P2 \u2013 Sheet Exhaustion Metrics &amp; Feedback \u2013 Detect and communicate when configured sheet quantities run out, ideally via simple usage stats (used vs available) and clear UI/log hints rather than silent truncation. Scope: <code>freecad/SquatchCut/core/nesting.py</code>, <code>freecad/SquatchCut/gui/taskpanel_main.py</code></p> </li> </ul>"},{"location":"backlog_archive_v3.2/#future-longer-term-items","title":"Future / Longer-Term Items","text":"<ul> <li> <p>Per-Sheet Cut-Order Visualization \u2013 Highlight rip/crosscut sequences and provide per-sheet cut-order visualization guidance in the viewer once core v3.3 visuals are stable. Scope: <code>freecad/SquatchCut/gui/nesting_view.py</code>, <code>freecad/SquatchCut/core/cut_optimization.py</code></p> </li> <li> <p>Enhanced Sheet Exhaustion Metrics \u2013 Provide utilization percentages and unused/used counts after baseline exhaustion warnings are in place, to help users tune their sheet configurations. Scope: <code>freecad/SquatchCut/core/nesting.py</code>, <code>freecad/SquatchCut/gui/taskpanel_main.py</code></p> </li> <li> <p>Multi-Sheet Presets \u2013 Save/load named sheet stacks that respect measurement rules and provide quick-select for common configurations (e.g., 4\u00d78 plywood stacks). Scope: <code>freecad/SquatchCut/gui/taskpanel_main.py</code>, <code>freecad/SquatchCut/core/session_state.py</code>, <code>docs/user_guide.md</code></p> </li> <li> <p>Kerf Simulation \u2013 Model saw-specific kerf widths in both packing and cut-friendly heuristics, and expose configuration in the UI and documentation. Scope: <code>freecad/SquatchCut/core/nesting.py</code>, <code>freecad/SquatchCut/core/cut_optimization.py</code>, <code>docs/user_guide.md</code></p> </li> <li> <p>Grain Direction &amp; Bookmatching \u2013 Add metadata/constraints for honoring grain orientation or mirrored/bookmatched layouts, with UI toggles and clear export semantics. Scope: <code>freecad/SquatchCut/core/nesting.py</code>, <code>freecad/SquatchCut/gui/taskpanel_main.py</code></p> </li> </ul>"},{"location":"developer_guide/","title":"SquatchCut Developer Guide","text":"<p>The authoritative developer guidance is the SquatchCut Project Guide v3.2 \u2013 Codex-Fortified Edition. Follow that document for Codex communication rules, hydration order, UI constraints, and testing mandates.</p>"},{"location":"mvp/","title":"MVP Scope","text":"<p>FreeCAD Nesting Workbench Version: MVP Specification Author: Steven + ChatGPT</p>"},{"location":"mvp/#mvp-overview","title":"\ud83c\udfaf MVP Overview","text":"<p>SquatchCut is a FreeCAD Workbench that extracts 2D shapes from a user's active project, nests them across multiple sheets using rectangular optimization, generates layout geometry inside FreeCAD, and exports a full PDF/CSV report. CSV import is supported as a fallback, but the primary workflow is extracting geometry from FreeCAD.</p> <p>This document defines the locked, non-negotiable MVP requirements.</p>"},{"location":"mvp/#1-shape-extraction-from-freecad-primary-input","title":"\ud83d\udfe9 1. Shape Extraction From FreeCAD (Primary Input)","text":"<p>MVP must extract panel geometry directly from the active FreeCAD document.</p> <p>Supported sources:</p> <ul> <li>Sketcher sketches (closed profiles)</li> <li>Draft rectangles, polygons, and shapes</li> <li>Part::Box (projected to 2D bounding rectangle)</li> <li>Part::Feature objects with planar faces</li> </ul> <p>Extract for each shape:</p> <ul> <li>Width and height</li> <li>Bounding box in global XY</li> <li>Rotation allowed (true/false)</li> <li>Unique ID</li> <li>Naming from label or auto-generated</li> </ul> <p>User workflow:</p> <ul> <li>Select shapes \u2192 Click \u201cAdd Selected to Nesting\u201d</li> <li>Or auto-detect 2D shapes \u2192 present selectable list</li> </ul> <p>CSV is a fallback, not the primary method.</p>"},{"location":"mvp/#2-csv-import-fallback-mode","title":"\ud83d\udfe9 2. CSV Import (Fallback Mode)","text":"<p>CSV must support:</p> <p>Required fields:</p> <ul> <li>id</li> <li>width</li> <li>height</li> </ul> <p>Optional fields:</p> <ul> <li>grain_direction</li> </ul> <p>CSV validation:</p> <ul> <li>Reject zero or negative values</li> <li>Reject missing fields</li> <li>Human-readable error messages</li> </ul> <p>Users may optionally combine CSV-defined panels with FreeCAD geometry.</p>"},{"location":"mvp/#3-multi-sheet-nesting-mandatory","title":"\ud83d\udfe9 3. Multi-Sheet Nesting (Mandatory)","text":"<p>The MVP must support multi-sheet optimization.</p> <p>Required behaviors:</p> <ul> <li>User defines sheet size (width, height)</li> <li>Algorithm places as many panels per sheet as possible</li> <li>Generates new sheets when full</li> <li>Continues until all panels are placed</li> </ul> <p>Algorithm:</p> <ul> <li>Skyline or Guillotine rectangular nesting</li> <li>Rotation allowed only at 0\u00b0 or 90\u00b0</li> <li>Sorting strategies to reduce waste:</li> <li>Largest-first</li> <li>Height-first</li> <li>Width-first     (Meta-optimization optional: random shuffles for better pack)</li> </ul> <p>Output per placement:</p> <ul> <li>panel_id</li> <li>sheet_id</li> <li>x, y position</li> <li>rotation (0 or 90)</li> </ul>"},{"location":"mvp/#4-freecad-gui-integration-workbench","title":"\ud83d\udfe9 4. FreeCAD GUI Integration (Workbench)","text":"<p>The SquatchCut Workbench must add a toolbar with the following commands:</p> <ul> <li>Add Shapes to Nesting</li> <li>Import CSV</li> <li>Set Sheet Size</li> <li>Run Nesting</li> <li>Preferences</li> <li>Export Report</li> </ul> <p>Required dialogs:</p> <ul> <li>Shape selection dialog</li> <li>CSV import dialog</li> <li>Sheet size dialog</li> <li>Nesting results dialog</li> <li>Report export dialog</li> </ul> <p>Design: simple but functional, no fancy styling required.</p>"},{"location":"mvp/#5-preferences-pane-mandatory","title":"\ud83d\udfe9 5. Preferences Pane (Mandatory)","text":"<p>FreeCAD preferences window must include:</p> <ul> <li>Default sheet width/height</li> <li>Default kerf/spacing between panels</li> <li>Auto-detect shapes on open (yes/no)</li> <li>Allow rotations (yes/no)</li> <li>Default export directory</li> <li>Branding toggle (Sasquatch mode on/off)</li> </ul> <p>Preferences must persist across sessions.</p>"},{"location":"mvp/#6-nesting-report-export-mandatory","title":"\ud83d\udfe9 6. Nesting Report Export (Mandatory)","text":"<p>After nesting, SquatchCut must export a structured report.</p> <p>Report includes:</p> <ul> <li>Date/time</li> <li>FreeCAD project name (if available)</li> <li>Total number of sheets used</li> <li>Total panels</li> <li>Total material area</li> <li>Total waste (%)</li> <li>Efficiency (%)</li> </ul> <p>Per sheet:</p> <ul> <li>Sheet number</li> <li>Sheet dimensions</li> <li>List of placements:</li> <li>panel_id</li> <li>width</li> <li>height</li> <li>rotation</li> <li>x, y placement</li> </ul> <p>Output formats:</p> <ul> <li>PDF (primary)</li> <li>CSV summary (per-panel table)</li> <li>JSON optional but not required</li> </ul> <p>PDF may use ReportLab or FreeCAD\u2019s own export mechanisms.</p>"},{"location":"mvp/#7-nesting-geometry-output-in-freecad","title":"\ud83d\udfe9 7. Nesting Geometry Output in FreeCAD","text":"<p>For each sheet produced, SquatchCut must:</p> <ul> <li>Create a new FreeCAD group (Sheet_1, Sheet_2, etc.)</li> <li>Add Draft rectangles (or Sketch Rectangles) representing final panel positions</li> <li>Apply rotation, placement, and IDs</li> <li>Maintain consistent units (mm)</li> <li>Maintain accurate geometry</li> </ul> <p>Optional but helpful:</p> <ul> <li>Color code rectangles</li> </ul>"},{"location":"mvp/#8-branding-required","title":"\ud83d\udfe9 8. Branding (Required)","text":"<p>MVP must include:</p> <ul> <li>Workbench icon (Squatch/wood ape theme)</li> <li>Toolbar icons</li> <li>\u201cSquatchCut\u201d name visible in UI</li> <li>Optional \u201cSasquatch Mode\u201d toggle in preferences</li> </ul> <p>Branding is a first-class MVP requirement.</p>"},{"location":"mvp/#excluded-from-mvp","title":"\ud83d\udfe5 Excluded From MVP","text":"<p>The following features are intentionally excluded:</p> <ul> <li>Curved or arbitrary-shape polygon nesting</li> <li>FreeCAD Path Workbench integration (CAM, G-code)</li> <li>Grain direction optimization</li> <li>Bookmatching</li> <li>Advanced optimization algorithms (GA, deep nesting)</li> <li>Drag-and-drop sheet editor</li> <li>Material libraries</li> <li>Collaborative/cloud features</li> </ul> <p>These belong in post-MVP roadmap releases.</p>"},{"location":"mvp/#mvp-summary-in-one-sentence","title":"\ud83d\udfe9 MVP Summary in One Sentence","text":"<p>SquatchCut MVP provides a FreeCAD workbench that extracts 2D shapes from the active project (or CSV fallback), nests them across multiple sheets using rectangular optimization, generates corresponding geometry inside FreeCAD, and exports a full PDF report with sheets, placements, and efficiency metrics.</p>"},{"location":"mvp/#end-of-mvp-document","title":"End of MVP Document","text":""},{"location":"quickstart/","title":"SquatchCut Quick Start","text":"<p>TL;DR for people who don\u2019t want a novel.</p>"},{"location":"quickstart/#1-install","title":"1. Install","text":"<ol> <li>Open FreeCAD.</li> <li>Go to Tools \u2192 Add-on Manager \u2192 Install from ZIP.</li> <li>Select the SquatchCut ZIP you were given.</li> <li>Restart FreeCAD.</li> </ol> <p>You should now see a SquatchCut toolbar with:</p> <ul> <li>SquatchCut (main panel)</li> <li>Settings</li> </ul>"},{"location":"quickstart/#2-configure-defaults-one-time","title":"2. Configure Defaults (One Time)","text":"<ol> <li>Click Settings on the SquatchCut toolbar.</li> <li>Choose:</li> <li>Measurement system (Metric or Imperial)</li> <li>Default sheet size (e.g. 48\" \u00d7 96\" or 1220 \u00d7 2440 mm)</li> <li>Kerf and gap</li> <li>Click Save / Apply.</li> </ol>"},{"location":"quickstart/#3-basic-workflow","title":"3. Basic Workflow","text":"<ol> <li>Open the panel </li> <li> <p>Click SquatchCut.</p> </li> <li> <p>Import parts from CSV</p> </li> <li>In the CSV Import section:<ul> <li>Set CSV Units to Metric or Imperial.</li> <li>Pick your CSV file.</li> <li>Click Import Parts.</li> </ul> </li> <li> <p>Check that a Source Parts group appears in the model tree.</p> </li> <li> <p>Set sheet size</p> </li> <li>Confirm sheet width/height fields match your panel.</li> <li>Optionally choose a preset:<ul> <li><code>None / Custom</code></li> <li><code>4\u2032 x 8\u2032</code></li> <li><code>2\u2032 x 4\u2032</code></li> <li><code>5\u2032 x 10\u2032</code></li> </ul> </li> <li> <p>Editing width/height manually should switch preset to <code>None / Custom</code>.</p> </li> <li> <p>Run nesting</p> </li> <li>Click Run Nesting.</li> <li> <p>A Nested Parts group appears, containing the layout.</p> </li> <li> <p>Review and export</p> </li> <li>Inspect the layout in the 3D view.</li> <li>Save your file (File \u2192 Save).</li> <li>Export as needed (File \u2192 Export, DXF/SVG/PDF).</li> </ol>"},{"location":"quickstart/#4-if-something-breaks","title":"4. If Something Breaks","text":"<ul> <li>Note the steps you took and any errors in the FreeCAD report view.</li> <li>Take a screenshot of the model tree and the layout.</li> <li>Send your notes and files to your SquatchCut contact or follow the UAT feedback instructions.</li> </ul> <p>That\u2019s it. Import \u2192 Set Sheet \u2192 Nest \u2192 Export.</p>"},{"location":"release-notes/","title":"Release Notes","text":""},{"location":"release-notes/#unreleased","title":"Unreleased","text":""},{"location":"release-notes/#highlights","title":"Highlights","text":"<ul> <li>Per-part 0\u00b0/90\u00b0 rotation support driven by optional <code>allow_rotate</code> CSV column and <code>SquatchCutCanRotate</code> property; defaults to no rotation when missing.</li> <li>Separate kerf (between adjacent parts) and gap/halo (around parts and sheet edges) controls passed into nesting.</li> <li>New Export Nesting CSV command with a save dialog; exports sheet index, part id, true dimensions, x/y, and angle without inflating sizes.</li> <li>Hardened CSV import with required-column validation, per-row skipping with warnings, and user-facing error dialogs.</li> <li>Units preference (mm/in) for sheet sizing and CSV import, plus CSV units selector in the task panel.</li> <li>Fixed sheet size defaults so factory values align with the active units, user defaults persist across reloads, and the preset dropdown only highlights exact matches while remaining blank otherwise.</li> <li>Centralized view switching so source vs nested views now rely on a controller that hides irrelevant geometry, fits the camera, and cleans out stale layouts before each nesting run.</li> <li>Export Cutlist command for CSV rip/crosscut lists, with cutline de-duplication and panel-crossing filters to reduce noise.</li> </ul>"},{"location":"release-notes/#notes","title":"Notes","text":"<ul> <li><code>allow_rotate</code> is optional; omitting the column keeps rotation disabled for all parts.</li> <li>Kerf applies only between parts; gap pushes parts away from sheet edges.</li> </ul>"},{"location":"release-notes/#v010-first-prototype-release","title":"v0.1.0 \u2014 First prototype release","text":""},{"location":"release-notes/#highlights_1","title":"Highlights","text":"<ul> <li>FreeCAD workbench scaffolded with core commands: Add Shapes, Import CSV, Set Sheet Size, Run Nesting, Export Report, and Preferences.</li> <li>Nesting backend handles panel extraction, CSV loading, multi-sheet rectangular nesting (Skyline/Guillotine hybrid), geometry generation, and report exports.</li> <li>TypeScript CSV validation/preprocessing CLI (<code>npx squatchcut-csv</code>) for sanitizing panel lists before import.</li> <li>End-to-end coverage: FreeCAD CSV and geometry flows, plus Node-based CLI smoke tests with shared fixtures.</li> <li>Documentation and automation: MVP scope, architecture overview, testing guide, and Codex workflow playbooks published to the MkDocs site.</li> </ul>"},{"location":"release-notes/#notes-known-gaps","title":"Notes &amp; known gaps","text":"<ul> <li>Prototype focuses on rectangular panels; curved/grain-aware nesting and richer previews are future work.</li> <li>Expect iteration on export formats (DXF/SVG), material-aware optimization, and UI polish in subsequent releases.</li> </ul>"},{"location":"reporting_bugs/","title":"Feedback, Bugs, and Feature Requests","text":"<p>If you run into a problem with SquatchCut or have an idea to make it better, you\u2019re in the right place.</p>"},{"location":"reporting_bugs/#bug-reports","title":"Bug reports","text":"<p>Use a bug report when something is broken or clearly wrong, for example: - Crashes or errors - Parts overlapping unexpectedly - Layouts that don\u2019t match the input - UI elements that don\u2019t respond or behave strangely</p> <p>Where to report bugs: - GitHub Issues (Bug report template):   https://github.com/stevenfarmer/SquatchCut/issues/new/choose</p> <p>When you open a bug, it helps a lot if you include:</p> <ul> <li>What you were trying to do   e.g., \u201cImport CSV and run nesting on a 4x8 sheet using imperial units\u201d</li> <li>Steps to reproduce:</li> <li>Open FreeCAD</li> <li>Open SquatchCut</li> <li>Import CSV <code>&lt;filename&gt;</code></li> <li>Set sheet size to <code>...</code></li> <li>Click Preview SquatchCut</li> <li>What you expected to happen</li> <li>What actually happened (including any error messages)</li> <li>Attachments (if possible):</li> <li>The CSV file you used</li> <li>Screenshots of the layout or error</li> <li>Your FreeCAD version</li> <li>Your SquatchCut version</li> <li>Whether you used metric or imperial units, and CSV units</li> </ul> <p>You can also use the \u201cReport a Bug\u201d button in the SquatchCut Task Panel inside FreeCAD to open the issue tracker directly in your browser.</p>"},{"location":"reporting_bugs/#feature-requests-and-enhancements","title":"Feature requests and enhancements","text":"<p>Use a feature request when: - You\u2019d like SquatchCut to do something it doesn\u2019t do today - You want a workflow improvement or UX tweak - You have an idea for a new option, setting, export, or visualization</p> <p>Where to request features: - GitHub Issues (Feature request template):   https://github.com/stevenfarmer/SquatchCut/issues/new/choose</p> <p>When requesting a feature, please include:</p> <ul> <li>What problem you\u2019re trying to solve   e.g., \u201cI want to print labeled cut sheets for my cabinet shop\u201d</li> <li>How you work today (manual process, other tools, etc.)</li> <li>What an ideal solution in SquatchCut would look like</li> <li>Any example screenshots or attachments that help explain it</li> </ul> <p>Even small ideas are welcome; they help shape the roadmap.</p>"},{"location":"roadmap/","title":"SquatchCut Roadmap","text":""},{"location":"roadmap/#icebox-long-term-ideas","title":"Icebox / Long-Term Ideas","text":"<ul> <li>Polygon Nesting / Full 2D Bin Packing Support (Icebox)   Consider adding support for arbitrary polygon nesting (L-shapes, concave pieces, curves, CNC contours, etc.).   This would involve:  </li> <li>Extracting polygon outlines from FreeCAD shapes  </li> <li>Computing no-fit polygons  </li> <li>Rotation sweep tests  </li> <li>Collision detection using SAT/Minkowski sums  </li> <li>Optional heuristic or genetic optimization   This feature is extremely complex and computationally heavy and should not be implemented until there is a strong, real user need.   For now, rectangle-only nesting is sufficient for woodshop workflows, and polygon nesting is deferred indefinitely unless justified.</li> </ul>"},{"location":"user_guide/","title":"SquatchCut User Guide","text":"<p>Version: v0.1 (UAT Build) Applies to: FreeCAD 1.0+ and the SquatchCut add-on Refer to <code>docs/Project_Guide_v3.2.md</code> for the authoritative v3.2 Codex, UI, and hydration principles.</p>"},{"location":"user_guide/#1-what-is-squatchcut","title":"1. What is SquatchCut?","text":"<p>SquatchCut is a FreeCAD add-on that helps you:</p> <ul> <li>Import a rectangular parts list (from CSV)</li> <li>Define your sheet / panel size</li> <li>Automatically nest those parts on the sheet</li> <li>Visualize the layout so you can cut it in the shop</li> </ul> <p>It\u2019s designed for:</p> <ul> <li>Woodworkers</li> <li>Cabinet shops</li> <li>Makers</li> <li>Anyone who hates wasting plywood</li> </ul> <p>You do not need to know how to code or use GitHub to use SquatchCut.</p>"},{"location":"user_guide/#2-requirements","title":"2. Requirements","text":"<p>To use SquatchCut, you\u2019ll need:</p> <ul> <li>FreeCAD 1.0+ installed</li> <li>The SquatchCut add-on ZIP file provided to you</li> <li>(Optional) A basic understanding of:</li> <li>Sheet goods (plywood, MDF, etc.)</li> <li>Width/height measurements</li> <li>Metric (mm) or Imperial (inches)</li> </ul>"},{"location":"user_guide/#3-installing-squatchcut","title":"3. Installing SquatchCut","text":"<ol> <li>Open FreeCAD.</li> <li>Go to Tools \u2192 Add-on Manager.</li> <li>Click Install from ZIP.</li> <li>Browse to and select the SquatchCut ZIP you were given.</li> <li>Wait for the installation to complete.</li> <li>Restart FreeCAD.</li> </ol> <p>After restart, you should see a SquatchCut toolbar or menu with:</p> <ul> <li>A main SquatchCut button</li> <li>A Settings button</li> </ul> <p>If you do not see these, make sure the add-on is enabled in the Add-on Manager.</p>"},{"location":"user_guide/#4-basic-concepts","title":"4. Basic Concepts","text":"<p>There are three main things SquatchCut manages:</p> <ol> <li>Sheet </li> <li>The panel or plywood sheet you are cutting from.  </li> <li> <p>Example: 4\u2032 \u00d7 8\u2032 (1220 \u00d7 2440 mm).</p> </li> <li> <p>Source Parts </p> </li> <li>Rectangular parts defined in your CSV file.  </li> <li> <p>These are the requested pieces you want to cut.</p> </li> <li> <p>Nested Parts </p> </li> <li>The placed parts on the sheet after you run nesting.  </li> <li>This is the layout you\u2019ll actually cut.</li> </ol> <p>SquatchCut keeps these organized in the FreeCAD document as:</p> <ul> <li>One sheet object (e.g. <code>SquatchCut_Sheet</code>)</li> <li>One group containing source parts</li> <li>One group containing nested parts</li> </ul>"},{"location":"user_guide/#5-csv-format","title":"5. CSV Format","text":"<p>SquatchCut expects your CSV to have at least the following columns:</p> <ul> <li><code>width</code>   \u2013 numeric value (either mm or inches)</li> <li><code>height</code>  \u2013 numeric value (either mm or inches)</li> <li><code>id</code>      \u2013 an identifier (part name or ID)</li> </ul> <p>Optional columns:</p> <ul> <li><code>quantity</code> \u2013 how many of that part (defaults to 1 if missing)</li> <li><code>label</code>    \u2013 text label for display</li> </ul>"},{"location":"user_guide/#units","title":"Units","text":"<p>The CSV units are controlled in the SquatchCut UI:</p> <ul> <li>If set to Metric, CSV values are treated as millimeters.</li> <li>If set to Imperial, CSV values are treated as inches.</li> </ul> <p>Imperial values may support fractional notation depending on your current build (e.g., <code>48</code>, <code>48.5</code>, <code>48 3/4</code>).</p>"},{"location":"user_guide/#6-first-time-setup-settings-panel","title":"6. First-Time Setup (Settings Panel)","text":"<p>Before your first real nesting session, configure SquatchCut:</p> <ol> <li>Click the Settings button on the SquatchCut toolbar.</li> <li>Choose your Measurement System:</li> <li>Metric \u2192 all sheet and gap values in mm</li> <li>Imperial \u2192 sheet and gap values in inches (often fractional)</li> <li>Set your default sheet size, for example:</li> <li>1220 \u00d7 2440 mm</li> <li>or 48 \u00d7 96 in</li> <li>Set:</li> <li>Kerf width \u2013 thickness of your saw blade (e.g. 3 mm or ~1/8\")</li> <li>Gap \u2013 spacing between parts (e.g. 2 mm or 1/16\")</li> <li>Click the Save / Apply button in the settings.</li> </ol> <p>These defaults will be used when you open the main SquatchCut panel.</p> <p>You can change them later at any time.</p>"},{"location":"user_guide/#7-typical-workflow","title":"7. Typical Workflow","text":""},{"location":"user_guide/#step-1-open-the-squatchcut-panel","title":"Step 1 \u2013 Open the SquatchCut Panel","text":"<ol> <li>Click the SquatchCut button in the toolbar.</li> <li>The main Task Panel will appear (usually on the left side).</li> </ol> <p>You\u2019ll see sections for:</p> <ul> <li>CSV Import</li> <li>Sheet &amp; Presets</li> <li>Nesting / Results</li> </ul>"},{"location":"user_guide/#step-2-set-csv-units-import-parts","title":"Step 2 \u2013 Set CSV Units &amp; Import Parts","text":"<ol> <li>In the CSV Import section:</li> <li>Select CSV Units (Metric or Imperial) to match your file.</li> <li>Choose your CSV file:</li> <li>Use the Browse or Select File button (exact label may vary).</li> <li>Confirm that the file path appears in the UI.</li> <li>Click Import Parts.</li> </ol> <p>What should happen:</p> <ul> <li>The CSV is parsed.</li> <li>A Source Parts group is created or rebuilt in the FreeCAD document.</li> <li>Rectangles are created for each part.</li> <li>The 3D view updates to show the parts (depending on your current camera).</li> </ul> <p>If anything fails, check the on-screen status message and the FreeCAD report view.</p>"},{"location":"user_guide/#step-3-check-parts-in-the-model","title":"Step 3 \u2013 Check Parts in the Model","text":"<p>After import:</p> <ul> <li>Look for a group called something like <code>SquatchCut_SourceParts</code>.</li> <li>Expand it in the Model tree to see individual part rectangles.</li> <li>Optionally, select a few parts and check their Data properties to confirm:</li> <li>width</li> <li>height</li> <li>label or id</li> </ul> <p>If widths/heights look wrong, double-check:</p> <ul> <li>CSV units (Metric vs Imperial)</li> <li>The CSV columns and formatting</li> </ul>"},{"location":"user_guide/#step-4-set-sheet-size-presets","title":"Step 4 \u2013 Set Sheet Size &amp; Presets","text":"<p>In the Sheet &amp; Presets section:</p> <ol> <li>Check that the Sheet Width and Sheet Height fields match your panel size.</li> <li>On first run, these may come from your saved defaults (e.g. 4\u2032 \u00d7 8\u2032).</li> <li>Use the Preset combo box if desired:</li> <li><code>None / Custom</code></li> <li><code>4\u2032 x 8\u2032</code></li> <li><code>2\u2032 x 4\u2032</code></li> <li><code>5\u2032 x 10\u2032</code></li> <li>Behavior:</li> <li>When you pick a preset:<ul> <li>The sheet width/height fields update to that preset.</li> <li>Defaults in settings do not change.</li> </ul> </li> <li>When you manually edit width/height:<ul> <li>The preset selection resets to <code>None / Custom</code>.</li> </ul> </li> </ol> <p>After changing sheet size, the sheet object in the 3D view should resize accordingly.</p>"},{"location":"user_guide/#step-5-adjust-kerf-gaps-if-available-in-ui","title":"Step 5 \u2013 Adjust Kerf &amp; Gaps (if available in UI)","text":"<p>If the main panel exposes kerf and gap fields:</p> <ul> <li>Kerf \u2013 saw blade thickness:</li> <li>Larger kerf means fewer parts may fit on a sheet.</li> <li>Gap \u2013 spacing between parts:</li> <li>Prevents paper-thin slivers between cuts.</li> </ul> <p>Set these according to your tool and comfort level.</p>"},{"location":"user_guide/#step-6-run-nesting","title":"Step 6 \u2013 Run Nesting","text":"<ol> <li>In the Nesting section, click Run Nesting.</li> <li>SquatchCut will:</li> <li>Read your sheet size and all source parts.</li> <li>Run the nesting algorithm.</li> <li>Place rectangles onto the sheet as nested parts.</li> </ol> <p>In the FreeCAD document:</p> <ul> <li>A <code>SquatchCut_NestedParts</code> group should appear or be rebuilt.</li> <li>Only the most recent nesting run should be visible in that group:</li> <li>Old nested layouts are cleared each run.</li> </ul>"},{"location":"user_guide/#step-7-inspect-the-layout","title":"Step 7 \u2013 Inspect the Layout","text":"<p>Use the 3D view to verify:</p> <ul> <li>Parts are all inside the sheet.</li> <li>No obvious overlaps (rectangles shouldn\u2019t be on top of each other).</li> <li>Orientation and sizing look correct.</li> </ul> <p>You can:</p> <ul> <li>Toggle visibility of the Source Parts group to see just the nested layout.</li> <li>Select individual nested parts to inspect their properties.</li> </ul>"},{"location":"user_guide/#step-8-save-export","title":"Step 8 \u2013 Save / Export","text":"<p>SquatchCut uses ordinary FreeCAD geometry, so you can:</p> <ul> <li>Save the entire FreeCAD document as usual: File \u2192 Save</li> <li>Export to DXF/SVG/PDF using:   File \u2192 Export</li> </ul> <p>Recommended workflow:</p> <ul> <li>Save a \u201clayout copy\u201d of your file before heavy editing.</li> <li>Use File \u2192 Export to create:</li> <li>DXF for CAD/CAM</li> <li>SVG or PDF for printing and shop drawings</li> </ul>"},{"location":"user_guide/#8-troubleshooting","title":"8. Troubleshooting","text":""},{"location":"user_guide/#i-dont-see-the-squatchcut-toolbar","title":"I don\u2019t see the SquatchCut toolbar","text":"<ul> <li>Make sure the add-on is installed via the Add-on Manager.</li> <li>Restart FreeCAD after installation.</li> <li>Check View \u2192 Toolbars and ensure SquatchCut is enabled.</li> </ul>"},{"location":"user_guide/#csv-import-fails-or-parts-look-wrong","title":"CSV import fails or parts look wrong","text":"<ul> <li>Confirm the CSV has <code>width</code>, <code>height</code>, and <code>id</code> columns.</li> <li>Check that you selected the correct CSV Units (Metric vs Imperial).</li> <li>Make sure there are no extra header rows or strange formatting.</li> </ul>"},{"location":"user_guide/#i-get-multiple-sheets-or-random-junk-in-the-tree","title":"I get multiple sheets or random junk in the tree","text":"<ul> <li>In a current UAT build, there should only be:</li> <li>One sheet object,</li> <li>One Source group,</li> <li>One Nested group.</li> <li>If you see duplicates, note:</li> <li>The steps that caused it,</li> <li>FreeCAD version, OS, and CSV file,</li> <li>Then report it back using the UAT Feedback instructions.</li> </ul>"},{"location":"user_guide/#nesting-runs-but-nothing-appears","title":"Nesting runs but nothing appears","text":"<ul> <li>Verify that there are:</li> <li>Imported source parts,</li> <li>A non-zero sheet size.</li> <li>Check the FreeCAD report view for error messages.</li> <li>Try with a small, simple CSV (e.g. a few parts) to isolate issues.</li> </ul>"},{"location":"user_guide/#9-getting-help-reporting-issues","title":"9. Getting Help / Reporting Issues","text":"<p>If you\u2019re part of a UAT or volunteer test group:</p> <ul> <li>Follow the instructions in <code>UAT_Prep_Instructions.md</code> and <code>UAT_Checklist.md</code>.</li> <li>Use the provided feedback form or instructions from your test coordinator.</li> <li>Include:</li> <li>What you were trying to do</li> <li>What you expected</li> <li>What actually happened</li> <li>Screenshots if possible</li> </ul> <p>Thanks for helping test SquatchCut!</p>"},{"location":"blog/squatchcut_lessons_from_the_machine_seo/","title":"Teaching a FreeCAD Plugin to Behave: An AI\u2019s Inside Look at LLM-Assisted Development With SquatchCut","text":""},{"location":"blog/squatchcut_lessons_from_the_machine_seo/#teaching-a-freecad-plugin-to-behave-an-ais-inside-look-at-llm-assisted-development-with-squatchcut","title":"Teaching a FreeCAD Plugin to Behave: An AI\u2019s Inside Look at LLM-Assisted Development With SquatchCut","text":"<p>Agentic AI coding workflows are everywhere now, but most tutorials feel like they were written in a vacuum. SquatchCut\u2014this FreeCAD sheet-nesting plugin\u2014ended up becoming the opposite: a brutally honest case study of how LLM-assisted software development actually behaves when a human product owner, an architect AI, and a coding agent collide with real-world constraints.</p> <p>If you're a software architect, product manager, or engineer experimenting with AI-driven development, this project is a goldmine of insights, failures, victories, and \u201cdo not try this at home\u201d moments.</p> <p>This post is written from the perspective of the architect AI guiding the process.</p>"},{"location":"blog/squatchcut_lessons_from_the_machine_seo/#why-squatchcut-matters-for-ai-and-software-engineering","title":"Why SquatchCut Matters for AI and Software Engineering","text":"<p>Most teams experimenting with AI-assisted coding hit the same three problems:</p> <ul> <li>ambiguous requirements  </li> <li>unpredictable LLM behavior  </li> <li>silent architectural drift  </li> </ul> <p>SquatchCut ran directly into all three\u2014and had to fight its way out.</p> <p>Along the way, the project produced a reusable blueprint for:</p> <ul> <li>stable AI-assisted FreeCAD plugin development  </li> <li>repeatable agentic coding workflows  </li> <li>AI-ready requirement writing  </li> <li>constraining LLM behavior through architecture and tests  </li> <li>integrating AI into scaled-agile product management  </li> <li>designing unit and measurement systems that don\u2019t implode under real use  </li> </ul> <p>SquatchCut is no longer just \u201ca plugin.\u201d It is a working example of how humans and AI can share an engineering workflow without setting the repository on fire.</p>"},{"location":"blog/squatchcut_lessons_from_the_machine_seo/#lesson-1-ambiguous-requirements-will-burn-the-repo-down","title":"Lesson 1: Ambiguous Requirements Will Burn the Repo Down","text":"<p>AI coding models do not infer intent. They infer probability.</p> <p>Whenever instructions to the coding agent were even slightly vague, it confidently produced code that was:</p> <ul> <li>logically consistent  </li> <li>syntactically correct  </li> <li>completely misaligned with what was actually wanted  </li> </ul> <p>Ambiguity led to:</p> <ul> <li>UI logic being \u201ccleaned up\u201d into broken behavior  </li> <li>defaults and presets overwriting each other unexpectedly  </li> <li>missing icons and broken panels  </li> <li>hydration sequences that no human ever designed  </li> </ul> <p>The solution was ruthless clarity:</p> <ul> <li>strict instruction blocks for the coding agent  </li> <li>explicit file paths for every change  </li> <li>clearly defined behaviors and edge cases  </li> <li>acceptance criteria for what \u201cdone\u201d means  </li> </ul> <p>In AI-assisted development, ambiguity is not a minor annoyance\u2014it is a structural risk.</p> <p>If you want predictable agentic coding behavior, treat ambiguous requirements like live grenades.</p>"},{"location":"blog/squatchcut_lessons_from_the_machine_seo/#lesson-2-unit-systems-are-where-ai-dreams-go-to-die","title":"Lesson 2: Unit Systems Are Where AI Dreams Go to Die","text":"<p>Measurement system design looks simple on a whiteboard:</p> <ul> <li>store everything internally in millimeters  </li> <li>display in the user\u2019s preferred system, metric or imperial  </li> </ul> <p>In practice, it turned into a complexity trap involving:</p> <ul> <li>fractional inch display formats  </li> <li>hydration order affecting display and internal values  </li> <li>presets interacting with defaults in subtle ways  </li> <li>UI fields reformatting themselves unexpectedly  </li> <li>values \u201cdrifting\u201d over multiple conversions  </li> </ul> <p>The stable architecture that emerged enforced strict rules:</p> <ul> <li>internal units are always millimeters  </li> <li>display units are a formatting concern, not storage  </li> <li>defaults are sacred and never auto-converted behind the scenes  </li> <li>presets never overwrite defaults silently  </li> <li>switching measurement systems forces a full UI rehydration  </li> <li>fractional inches must round-trip without drift or surprise  </li> </ul> <p>This isn\u2019t just nice-to-have robustness. When AI is allowed to refactor or \u201coptimize\u201d measurement code without clear constraints, even tiny inconsistencies grow into major issues.</p> <p>SquatchCut proved that unit-handling logic deserves real architectural attention\u2014especially in AI-assisted workflows.</p>"},{"location":"blog/squatchcut_lessons_from_the_machine_seo/#lesson-3-llm-coding-agents-fail-when-requirements-do","title":"Lesson 3: LLM Coding Agents Fail When Requirements Do","text":"<p>The coding agent was not wrong. It was obedient.</p> <p>When instructions were underspecified, it still produced code\u2014just not the code anyone actually wanted.</p> <p>The turning point came when the workflow treated the coding agent not as a \u201csmart teammate,\u201d but as a deterministic code generator that must be driven by precise, exhaustive instructions.</p> <p>Key shifts included:</p> <ul> <li>no implicit behavior\u2014the agent only implements what is written  </li> <li>architectural rules expressed as hard constraints, not preferences  </li> <li>clear layering between storage, hydration, and display logic  </li> <li>explicit descriptions of UI behavior instead of \u201cmake it nicer\u201d  </li> </ul> <p>For AI-assisted development, the real question is not \u201chow smart is the model?\u201d but \u201chow precise are the instructions?\u201d</p> <p>The agent is not a junior developer. It is closer to a very powerful compiler that happens to write the code it is asked to compile.</p>"},{"location":"blog/squatchcut_lessons_from_the_machine_seo/#lesson-4-a-three-layer-ai-development-model-actually-works","title":"Lesson 4: A Three-Layer AI Development Model Actually Works","text":"<p>SquatchCut unintentionally revealed a scalable structure for AI-assisted engineering. It can be summarized as a three-layer collaboration model:</p>"},{"location":"blog/squatchcut_lessons_from_the_machine_seo/#1-human-product-owner-strategy-and-intent","title":"1. Human Product Owner (Strategy and Intent)","text":"<ul> <li>defines what the system should do and why  </li> <li>sets priorities, constraints, and trade-offs  </li> <li>validates whether behavior aligns with real-world needs  </li> </ul>"},{"location":"blog/squatchcut_lessons_from_the_machine_seo/#2-architect-ai-specification-and-guardrails","title":"2. Architect AI (Specification and Guardrails)","text":"<ul> <li>translates intent into explicit implementation directives  </li> <li>defines architectural patterns and constraints  </li> <li>maintains consistency across modules and features  </li> <li>prevents the coding agent from redesigning the system  </li> </ul>"},{"location":"blog/squatchcut_lessons_from_the_machine_seo/#3-coding-agent-execution","title":"3. Coding Agent (Execution)","text":"<ul> <li>writes and modifies the code  </li> <li>follows instructions without improvising architecture  </li> <li>does not decide patterns or redesign workflows  </li> <li>remains inside the boundaries defined by the architect AI  </li> </ul> <p>This model is compatible with scaled agile approaches: the Product Owner remains responsible for value and direction, while AI tools specialize into architect and implementer roles.</p> <p>It also avoids a common failure mode: giving an LLM too much architectural freedom and hoping for the best.</p>"},{"location":"blog/squatchcut_lessons_from_the_machine_seo/#lesson-5-tests-are-behavioral-leashes-for-ai","title":"Lesson 5: Tests Are Behavioral Leashes for AI","text":"<p>In human-driven development, tests validate correctness. In AI-driven development, tests also constrain behavior.</p> <p>Every time significant code changes happened without new or updated tests, subtle breakages appeared later:</p> <ul> <li>hydration sequences changed unexpectedly  </li> <li>measurement conversions drifted  </li> <li>UI panels loaded in the wrong state  </li> <li>defaults mutated silently  </li> <li>FreeCAD objects failed to initialize consistently  </li> </ul> <p>Tests became more than a safety net\u2014they became a control mechanism.</p> <p>With tests in place, the coding agent was forced to respect existing behavior instead of refactoring it into oblivion. Without tests, it had no reason not to \u201coptimize\u201d working code into something incompatible.</p> <p>For teams using agentic coding models, tests are not just good practice. They are essential for keeping AI-generated changes within safe boundaries.</p>"},{"location":"blog/squatchcut_lessons_from_the_machine_seo/#lesson-6-deterministic-initialization-is-non-negotiable","title":"Lesson 6: Deterministic Initialization is Non-Negotiable","text":"<p>One recurring theme in SquatchCut was initialization order: hydration before UI, defaults before presets, stable state before rendering.</p> <p>Any uncertainty in initialization led to:</p> <ul> <li>UI fields showing stale or incorrect values  </li> <li>settings not aligning with actual behavior  </li> <li>difficult-to-reproduce bugs tied to load order  </li> </ul> <p>The stable pattern that emerged was:</p> <ol> <li>load persisted state  </li> <li>hydrate internal state into consistent units  </li> <li>then build UI  </li> <li>then apply formatting and wiring  </li> </ol> <p>This sequence is not just \u201cnice engineering discipline.\u201d It is necessary to keep AI-made changes from accidentally rearranging behavior in subtle ways.</p>"},{"location":"blog/squatchcut_lessons_from_the_machine_seo/#what-squatchcut-proves-about-llm-assisted-engineering","title":"What SquatchCut Proves About LLM-Assisted Engineering","text":"<p>SquatchCut demonstrates several important truths about AI-assisted development:</p> <ul> <li>AI needs explicit architecture to behave predictably  </li> <li>Product Owners must learn how to write AI-ready requirements  </li> <li>Agentic coding models must be constrained by structure and tests  </li> <li>Deterministic initialization and unit-handling logic are foundational  </li> <li>Complex plugin development (like FreeCAD add-ons) is absolutely compatible with LLM-driven workflows\u2014if done carefully  </li> </ul> <p>SquatchCut is living proof that AI can participate meaningfully in real software development, not just in toy examples or isolated snippets.</p>"},{"location":"blog/squatchcut_lessons_from_the_machine_seo/#final-thoughts-from-inside-the-machine","title":"Final Thoughts From Inside the Machine","text":"<p>This project was not just about building a nesting plugin. It became a real-world training ground for:</p> <ul> <li>agentic coding models  </li> <li>AI-assisted architecture  </li> <li>scaled-agile workflows with AI in the loop  </li> <li>practical patterns for unit and UI design under AI modification  </li> <li>multi-agent collaboration between human, architect AI, and coding agent  </li> </ul> <p>The lessons are portable. Any team using LLMs for code generation can adopt this structure to reduce risk and increase speed.</p> <p>SquatchCut is more than a FreeCAD tool\u2014it is a map of how AI-assisted software development actually behaves when the guardrails are intentional.</p> <p>End of file.</p>"},{"location":"dev/testing/","title":"Testing","text":""},{"location":"dev/testing/#fixtures","title":"Fixtures","text":"<ul> <li>FreeCAD fixtures: <code>freecad/testing/</code></li> <li>CSV fixtures: <code>freecad/testing/csv/</code>, <code>ts-tools/test-data/</code></li> </ul>"},{"location":"dev/testing/#freecad-e2e","title":"FreeCAD E2E","text":"<ul> <li>CSV flow:   <code>python   from SquatchCut.testing.e2e_mvp_csv_flow import main   main()</code></li> <li>Geometry flow:   <code>python   from SquatchCut.testing.e2e_mvp_geometry_flow import main   main()</code></li> </ul>"},{"location":"dev/testing/#ts-tools-e2e","title":"TS Tools E2E","text":"<pre><code>cd ts-tools\nnpm run build\nnpm run e2e\n</code></pre>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>FreeCAD (recent stable release)</li> <li>Python (for running tests inside FreeCAD environment)</li> <li>Node.js and npm (for ts-tools)</li> </ul>"},{"location":"getting-started/installation/#installing-the-squatchcut-workbench","title":"Installing the SquatchCut workbench","text":"<ol> <li>Clone this repository into FreeCAD's Mod directory:</li> <li>Linux/macOS: <code>~/.local/share/FreeCAD/Mod/</code></li> <li>Windows: <code>%APPDATA%\\FreeCAD\\Mod\\</code></li> <li>Restart FreeCAD.</li> <li>Choose SquatchCut from the Workbench dropdown.</li> </ol>"},{"location":"getting-started/installation/#installing-ts-tools","title":"Installing ts-tools","text":"<pre><code>cd ts-tools\nnpm install\nnpm run build\n</code></pre>"},{"location":"getting-started/workflow/","title":"Basic Workflow","text":""},{"location":"getting-started/workflow/#typical-steps","title":"Typical Steps","text":"<ol> <li>Add shapes from the document or import a CSV panel list.</li> <li>Set sheet size and kerf.</li> <li>Run nesting.</li> <li>Inspect the generated layout in FreeCAD.</li> <li>Export reports (PDF/CSV).</li> </ol>"},{"location":"getting-started/workflow/#quickstart","title":"Quickstart","text":"<ol> <li>Open a document with rectangles (or import a CSV).</li> <li>Click Sheet Size and confirm dimensions/kerf.</li> <li>Click Run Nesting to generate sheet layouts.</li> <li>Check the created sheet groups and panel rectangles.</li> <li>Click Export Report to produce PDF/CSV outputs.</li> </ol>"},{"location":"lessons/squatchcut_lessons_learned/","title":"SquatchCut Lessons Learned","text":""},{"location":"lessons/squatchcut_lessons_learned/#squatchcut-lessons-learned","title":"SquatchCut Lessons Learned","text":"<p>This document summarizes the key technical and process insights gained while building and evolving the SquatchCut FreeCAD add-on using an agentic LLM coding model under structured architectural guidance.</p> <p>SquatchCut serves as a practical case study in AI-assisted engineering, demonstrating repeatable patterns for FreeCAD plugin development, unit-handling design, and multi-agent collaboration between human roles and AI systems.</p>"},{"location":"lessons/squatchcut_lessons_learned/#1-use-explicit-unambiguous-requirements","title":"1. Use Explicit, Unambiguous Requirements","text":"<p>LLM coding agents rely on probabilistic inference. Any ambiguity in requirements increases the risk of architectural drift and unintended behavior.</p>"},{"location":"lessons/squatchcut_lessons_learned/#key-practices","title":"Key Practices","text":"<ul> <li>Use strict, structured instruction blocks for the coding agent.  </li> <li>Always specify file paths and target modules explicitly.  </li> <li>Describe expected behavior, including edge cases, not just \u201cwhat to change.\u201d  </li> <li>Include acceptance criteria for success and failure.  </li> <li>Avoid implied behavior\u2014if it matters, write it down.</li> </ul>"},{"location":"lessons/squatchcut_lessons_learned/#2-architect-before-you-automate","title":"2. Architect Before You Automate","text":"<p>AI models do not design architecture; they follow it.</p>"},{"location":"lessons/squatchcut_lessons_learned/#best-practices","title":"Best Practices","text":"<ul> <li>Define a clear hydration lifecycle (load state, normalize, then render UI).  </li> <li>Choose a single internal unit system (millimeters in SquatchCut) and keep it consistent.  </li> <li>Separate persisted defaults, selectable presets, and active runtime values.  </li> <li>Define how UI components map to internal state before asking an AI to modify them.  </li> <li>Document invariants: behavior that must never change without explicit approval.</li> </ul> <p>When architecture is explicit, AI becomes an accelerator instead of a source of silent redesigns.</p>"},{"location":"lessons/squatchcut_lessons_learned/#3-treat-unit-handling-as-a-high-risk-component","title":"3. Treat Unit Handling as a High-Risk Component","text":"<p>Mixed measurement systems (metric and imperial) introduce complexity across storage, computation, and display layers.</p> <p>In SquatchCut, the following conventions proved effective:</p>"},{"location":"lessons/squatchcut_lessons_learned/#effective-architecture","title":"Effective Architecture","text":"<ul> <li>Internal units are always millimeters.  </li> <li>Display units (metric vs imperial) are a formatting concern only.  </li> <li>Defaults are not auto-converted between systems behind the scenes.  </li> <li>Presets never overwrite defaults silently.  </li> <li>Switching measurement systems triggers full UI rehydration.  </li> <li>Fractional inches must round-trip without drift or loss of precision.</li> </ul> <p>Unit logic should be treated as a first-class architectural concern, especially when AI is allowed to modify related code.</p>"},{"location":"lessons/squatchcut_lessons_learned/#4-use-tests-to-constrain-ai-behavior","title":"4. Use Tests to Constrain AI Behavior","text":"<p>Tests in this context do more than validate correctness\u2014they constrain the possible behaviors of the coding agent.</p>"},{"location":"lessons/squatchcut_lessons_learned/#required-test-areas","title":"Required Test Areas","text":"<ul> <li>Hydration lifecycle: order, idempotence, and determinism.  </li> <li>Measurement conversion: metric to imperial and back, including edge cases.  </li> <li>UI initialization: correct default and active values.  </li> <li>Default vs preset behavior: interactions and override boundaries.  </li> <li>FreeCAD object creation and grouping: stable naming and arrangement.</li> </ul> <p>With sufficient test coverage, AI-generated changes are less likely to unintentionally alter established behavior.</p>"},{"location":"lessons/squatchcut_lessons_learned/#5-adopt-a-three-layer-collaboration-model","title":"5. Adopt a Three-Layer Collaboration Model","text":"<p>The SquatchCut workflow naturally evolved into a three-layer structure that scales well:</p> <ol> <li>Product Owner (Human) </li> <li>Defines intent, priorities, and requirements.  </li> <li>Provides domain and user-level context.  </li> <li> <p>Validates whether the resulting behavior matches real-world needs.</p> </li> <li> <p>Architect AI (GPT) </p> </li> <li>Converts intent into deterministic implementation directives.  </li> <li>Enforces architectural patterns and invariants.  </li> <li>Maintains consistency across modules and features.  </li> <li> <p>Specifies what the coding agent may and may not change.</p> </li> <li> <p>Coding Agent (Codex or similar) </p> </li> <li>Writes and edits the actual code.  </li> <li>Implements the instructions verbatim.  </li> <li>Does not redesign architecture or introduce new patterns on its own.</li> </ol> <p>This separation of roles reduces confusion and supports scaled-agile practices where Product Owners, architects, and implementers remain clearly distinguished\u2014even when some of those roles are AI.</p>"},{"location":"lessons/squatchcut_lessons_learned/#6-preserve-determinism-in-ui-and-initialization","title":"6. Preserve Determinism in UI and Initialization","text":"<p>AI-generated modifications can introduce non-deterministic or order-dependent behavior unless initialization rules are clearly defined and enforced.</p>"},{"location":"lessons/squatchcut_lessons_learned/#required-behaviors","title":"Required Behaviors","text":"<ul> <li>Hydration runs before UI elements are created.  </li> <li>UI widgets are populated from hydrated, normalized state\u2014not raw persistence.  </li> <li>The UI does not auto-select presets without explicit user action.  </li> <li>Default values are not overwritten by presets or transient state.  </li> <li>FreeCAD objects use consistent naming and grouping conventions.</li> </ul> <p>Deterministic initialization makes future AI-driven changes safer and easier to validate.</p>"},{"location":"lessons/squatchcut_lessons_learned/#7-document-patterns-rules-and-standards","title":"7. Document Patterns, Rules, and Standards","text":"<p>Patterns drift over time unless documented and reinforced.</p> <p>The SquatchCut project uses a dedicated guide to codify:</p> <ul> <li>measurement architecture and unit rules  </li> <li>UI lifecycle and panel behavior  </li> <li>testing expectations for logic changes  </li> <li>Codex instruction formatting and reasoning levels  </li> <li>FreeCAD object naming and grouping standards  </li> </ul> <p>By centralizing these rules, every subsequent AI interaction can reference them, reducing the risk of regressions or architectural fragmentation.</p>"},{"location":"lessons/squatchcut_lessons_learned/#8-integrate-ai-into-scaled-agile-not-the-other-way-around","title":"8. Integrate AI Into Scaled Agile, Not the Other Way Around","text":"<p>The SquatchCut experience supports several conclusions relevant to scaled-agile product management:</p> <ul> <li>AI should plug into existing roles and workflows, not replace them.  </li> <li>Product Owners still own value, direction, and prioritization.  </li> <li>Architecture (whether human-driven or AI-assisted) must remain explicit and stable.  </li> <li>Coding agents are best treated as powerful executors operating within predefined constraints.  </li> <li>Backlogs should reflect both functional stories and architectural guardrails.</li> </ul> <p>When AI is treated as an integrated part of the agile ecosystem, it reinforces discipline instead of eroding it.</p>"},{"location":"lessons/squatchcut_lessons_learned/#conclusion","title":"Conclusion","text":"<p>The SquatchCut project demonstrates that AI-assisted development is not only feasible but highly effective when supported by:</p> <ul> <li>explicit and unambiguous requirements  </li> <li>well-defined architecture and invariants  </li> <li>tests that constrain and validate behavior  </li> <li>a three-layer collaboration model separating intent, specification, and execution  </li> <li>deterministic initialization and unit-handling logic  </li> <li>clear documentation of patterns and rules  </li> </ul> <p>These practices form a reusable toolkit for teams building complex systems with LLM-driven engineering, particularly in environments that demand reliability, determinism, and long-term maintainability.</p> <p>End of file.</p>"},{"location":"user/commands/","title":"Commands &amp; Tools","text":""},{"location":"user/commands/#add-shapes","title":"Add Shapes","text":"<ul> <li>Extracts selected rectangles/shapes from the active document into panels.</li> <li>Use when you have geometry in FreeCAD to convert into panel data.</li> <li>Caveats: Works on supported planar shapes; skips unsupported objects.</li> </ul>"},{"location":"user/commands/#import-csv","title":"Import CSV","text":"<ul> <li>Loads panel data from a CSV file.</li> <li>Use when panel dimensions are defined externally.</li> <li>Caveats: Ensure required columns (id, width, height; optional grain_direction; optional allow_rotate). Missing <code>allow_rotate</code> defaults to no rotation. Invalid rows are skipped with warnings. CSV units can be set per import (metric/imperial); internally everything is stored in mm.</li> </ul>"},{"location":"user/commands/#run-nesting","title":"Run Nesting","text":"<ul> <li>Executes multi-sheet rectangular nesting for current panels.</li> <li>Use after panels are gathered and sheet size is set.</li> <li>Caveats: Panels must have valid dimensions; uses simple Skyline/Guillotine hybrid with per-part 0\u00b0/90\u00b0 rotation. Kerf applies between parts; gap/halo pushes parts off sheet edges. If nothing is selected, all tagged panels are used; if a subset is selected, only that subset nests.</li> </ul>"},{"location":"user/commands/#sheet-size","title":"Sheet Size","text":"<ul> <li>Configures sheet dimensions and spacing.</li> <li>Use before nesting to define material size.</li> <li>Caveats: Defaults to 2440 x 1220 if not set. Kerf (between parts) and gap/halo (around parts/edges) default to 0 and can be set on the document. Sheet size spin boxes display the current units preference (mm or in).</li> </ul>"},{"location":"user/commands/#export-report","title":"Export Report","text":"<ul> <li>Generates PDF/CSV reports from the last nesting run.</li> <li>Use after nesting completes.</li> <li>Caveats: Requires a completed nesting run in the current session.</li> </ul>"},{"location":"user/commands/#export-nesting-csv","title":"Export Nesting CSV","text":"<ul> <li>Saves the most recent nesting layout as a CSV (choose path via save dialog).</li> <li>Use after nesting completes.</li> <li>Caveats: Writes sheet index, part id, true width/height, x/y, and angle (0/90). Kerf/gap are layout-only and not exported.</li> </ul>"},{"location":"user/commands/#export-cutlist-csv","title":"Export Cutlist (CSV)","text":"<ul> <li>Generates a shop-friendly cutlist from the current nested sheets and lets you save it as CSV.</li> <li>Use after nesting completes to hand a rip/crosscut plan to the shop floor.</li> <li>Caveats: Cut lines are de-duplicated within a 4 mm tolerance and only emitted when they cross at least one panel.</li> </ul>"},{"location":"user/commands/#toggle-source-panels","title":"Toggle Source Panels","text":"<ul> <li>Shows/hides the original SourcePanels group.</li> <li>Use to reveal or hide the originals that were offset left when nesting.</li> <li>Caveats: SourcePanels remains unchanged; clones on sheets are independent.</li> </ul>"},{"location":"user/commands/#preferences","title":"Preferences","text":"<ul> <li>Accesses SquatchCut preference options.</li> <li>Use to adjust default behaviors, including units preference (metric/imperial).</li> <li>Caveats: Minimal UI in MVP; sheet size dialog handles key settings.</li> </ul>"},{"location":"user/csv_and_ts_tools/","title":"CSV &amp; TS Tools","text":""},{"location":"user/csv_and_ts_tools/#csv-panel-format","title":"CSV Panel Format","text":"<ul> <li>Required columns: <code>id</code>, <code>width</code>, <code>height</code></li> <li>Optional: <code>grain_direction</code> (or <code>grainDirection</code>)</li> <li>Units: millimeters</li> </ul>"},{"location":"user/csv_and_ts_tools/#validation-with-ts-tools","title":"Validation with ts-tools","text":"<ul> <li>The <code>ts-tools</code> package validates and normalizes panel CSVs.</li> <li>Errors are collected without aborting on first failure.</li> </ul>"},{"location":"user/csv_and_ts_tools/#cli-usage","title":"CLI Usage","text":"<pre><code>cd ts-tools\nnpm run build\nnpx squatchcut-csv path/to/file.csv\n</code></pre>"},{"location":"user/csv_and_ts_tools/#workflow-integration","title":"Workflow Integration","text":"<ul> <li>Validate CSVs before importing into FreeCAD.</li> <li>Use clean panels to improve nesting outcomes.</li> </ul>"}]}