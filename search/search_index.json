{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"SquatchCut (logo placeholder)","text":"<p>SquatchCut is a cryptid-powered nesting workbench for FreeCAD that extracts panels, nests them, and exports reports.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>FreeCAD workbench with panel extraction and nesting</li> <li>CSV import (optional per-part rotation) and TypeScript validation tools</li> <li>Multi-sheet rectangular nesting with kerf/gap controls and per-part 0\u00b0/90\u00b0 rotation</li> <li>Units preference (metric/imperial) and CSV units selector; sheet size fields reflect the chosen units</li> <li>Geometry generation, PDF/CSV reporting, and cutlist CSV export from nested layouts</li> <li>Embedded Codex workflows for guided development</li> </ul>"},{"location":"#workflow-notes","title":"Workflow Notes","text":"<ul> <li>CSV import shows source panel rectangles in the XY plane and fits the view automatically.</li> <li>Preview/Apply nesting hides source panels and builds fresh sheets + nested clones each run (older sheets are cleared first).</li> <li>Use the \u201cShow Source Panels\u201d button in the task panel to hide sheets and reveal sources again at any time.</li> <li>Cutlist export derives rip/crosscut lines from the nested layout and now merges near-duplicate edges while ignoring cuts that don\u2019t cross any panel, keeping the cutlist shop-friendly.</li> </ul>"},{"location":"#explore","title":"Explore","text":"<ul> <li>Getting Started</li> <li>User Guide</li> <li>Developer Guide</li> </ul>"},{"location":"Project_Guide_v3.2/","title":"SquatchCut Project Guide (v3.2 \u2013 Codex-Fortified Edition)","text":""},{"location":"Project_Guide_v3.2/#0-meta-goals-of-v32","title":"0. Meta Goals of v3.2","text":"<p>This updated guide focuses specifically on:</p>"},{"location":"Project_Guide_v3.2/#a-eliminating-ambiguity-in-codex-instructions","title":"A. Eliminating ambiguity in Codex instructions","text":"<ul> <li>Codex blocks now have strict, enforceable structure  </li> <li>No markdown, no commentary inside blocks  </li> <li>Reasoning level declarations mandatory  </li> <li>File paths and expected patterns must be explicit  </li> <li>UI behavior described unambiguously  </li> <li>Persistent behavior safeguarded from accidental overwrites  </li> </ul>"},{"location":"Project_Guide_v3.2/#b-making-you-faster-and-making-me-gpt-more-consistent","title":"B. Making YOU faster and making ME (GPT) more consistent","text":"<ul> <li>You describe requirements  </li> <li>I translate them into clear directives  </li> <li>Codex executes  </li> </ul>"},{"location":"Project_Guide_v3.2/#c-forcing-codex-to-conform-to-squatchcuts-architecture","title":"C. Forcing Codex to conform to SquatchCut\u2019s architecture","text":"<p>Codex should never reinvent the repo or introduce new patterns.</p>"},{"location":"Project_Guide_v3.2/#1-project-purpose","title":"1. Project Purpose","text":"<p>SquatchCut is a FreeCAD add-on that takes CSV part lists and generates optimized sheet nests for woodworking, cabinetry, and general sheet-material workflows.</p>"},{"location":"Project_Guide_v3.2/#core-objectives","title":"Core Objectives","text":"<ul> <li>Fast, predictable, simple  </li> <li>Minimal UI friction  </li> <li>Always mm internally, fractions if imperial  </li> <li>Stable hydration/initialization  </li> <li>Simple CSV \u2192 sheet \u2192 nest \u2192 export workflow  </li> </ul>"},{"location":"Project_Guide_v3.2/#2-roles","title":"2. Roles","text":""},{"location":"Project_Guide_v3.2/#you-steven","title":"You (Steven)","text":"<ul> <li>Product Owner  </li> <li>Scrum-ish Master  </li> <li>UAT wrangler  </li> <li>Requirements authority  </li> </ul>"},{"location":"Project_Guide_v3.2/#chatgpt-architect-pm-spec-writer","title":"ChatGPT (Architect / PM / Spec Writer)","text":"<ul> <li>Writes requirements  </li> <li>Produces Codex instruction blocks  </li> <li>Ensures patterns and rules never drift  </li> <li>Maintains documentation  </li> </ul>"},{"location":"Project_Guide_v3.2/#codex-engineering-automaton","title":"Codex (Engineering Automaton)","text":"<ul> <li>Writes code  </li> <li>Must obey patterns  </li> <li>Must obey reasoning levels  </li> <li>Must never \u201cguess\u201d  </li> <li>Must build tests with every core change  </li> </ul>"},{"location":"Project_Guide_v3.2/#3-core-principles","title":"3. Core Principles","text":"<ol> <li>Internal units = millimeters </li> <li>Imperial = fractional inches only </li> <li>Defaults never change unless Settings says so </li> <li>Presets never override defaults </li> <li>TaskPanel never auto-selects presets </li> <li>hydrate_from_params() ALWAYS runs before UI widgets </li> <li>Codex must use reasoning level declarations </li> <li>Every logic change must include tests </li> <li>UI must not overflow or fail to load </li> <li>Settings panel must always open </li> <li>No relative imports </li> <li>No pattern drift </li> <li>No silent behavior changes </li> </ol>"},{"location":"Project_Guide_v3.2/#4-codex-communication-rules-updated-hardened","title":"4. Codex Communication Rules (Updated + Hardened)","text":""},{"location":"Project_Guide_v3.2/#41-codex-block-format","title":"4.1 Codex Block Format","text":"<p>Every Codex block MUST begin with:</p> <pre><code>Recommended Codex reasoning level: &lt;LEVEL&gt;\n</code></pre> <p>Followed by:</p> <pre><code>Codex, this task requires &lt;LEVEL&gt; reasoning.\n\n&lt;instructions&gt;\n</code></pre> <ul> <li>No markdown  </li> <li>No language tag  </li> <li>No commentary  </li> <li>Only instructions  </li> <li>Must be safe to paste directly into Codex  </li> </ul>"},{"location":"Project_Guide_v3.2/#42-required-elements-inside-each-block","title":"4.2 Required Elements Inside Each Block","text":"<ul> <li>Full file paths  </li> <li>Explicit operation lists  </li> <li>Expected behavior  </li> <li>Acceptance criteria  </li> <li>Guardrails  </li> </ul>"},{"location":"Project_Guide_v3.2/#43-when-to-use-levels","title":"4.3 When to Use Levels","text":"<ul> <li>LOW: trivial  </li> <li>MEDIUM: single-file  </li> <li>HIGH: multi-file + UI or settings  </li> <li>EXTRA-HIGH: architecture or algorithm refactor  </li> </ul>"},{"location":"Project_Guide_v3.2/#5-hydration-rules-hard-requirements","title":"5. Hydration Rules (Hard Requirements)","text":"<p>Hydration has caused repeated issues. These rules are absolute:</p>"},{"location":"Project_Guide_v3.2/#51-hydrate_from_params-must","title":"5.1 hydrate_from_params() must:","text":"<ul> <li>Load all persistent values  </li> <li>Guarantee type consistency  </li> <li>Normalize internal units  </li> <li>Never access GUI  </li> <li>Never import GUI modules  </li> <li>Never modify defaults except on Settings save  </li> </ul>"},{"location":"Project_Guide_v3.2/#52-taskpanel-initialization-order","title":"5.2 TaskPanel Initialization Order","text":"<p>This order is non-negotiable:</p> <ol> <li>Load session_state  </li> <li>Call hydrate_from_params()  </li> <li>Create all UI widgets  </li> <li>Populate UI values from hydrated state  </li> <li>Apply measurement formatting  </li> <li>Connect signals  </li> <li>Render panel  </li> </ol> <p>No exceptions.</p>"},{"location":"Project_Guide_v3.2/#6-measurement-system-architecture","title":"6. Measurement System Architecture","text":""},{"location":"Project_Guide_v3.2/#61-internal-storage","title":"6.1 Internal Storage","text":"<p>Always millimeters.</p>"},{"location":"Project_Guide_v3.2/#62-display-modes","title":"6.2 Display Modes","text":"<ul> <li>metric \u2192 mm  </li> <li>imperial \u2192 fractional inches  </li> </ul>"},{"location":"Project_Guide_v3.2/#63-ui-reformatting-rules","title":"6.3 UI Reformatting Rules","text":"<p>Switching measurement system requires full reformatting of all numeric UI fields.</p>"},{"location":"Project_Guide_v3.2/#64-fraction-logic","title":"6.4 Fraction Logic","text":"<p>Must support: - whole - fraction - mixed - hyphenated Must round-trip without drift.</p>"},{"location":"Project_Guide_v3.2/#7-preset-default-logic-fortified","title":"7. Preset &amp; Default Logic (Fortified)","text":""},{"location":"Project_Guide_v3.2/#defaults","title":"Defaults","text":"<ul> <li>Set only via Settings panel  </li> <li>Never altered by TaskPanel  </li> <li>Hydrate_from_params loads them  </li> </ul>"},{"location":"Project_Guide_v3.2/#presets","title":"Presets","text":"<ul> <li>Always start blank  </li> <li>Only modify sheet width/height  </li> <li>Never modify defaults  </li> <li>Never auto-selected  </li> </ul>"},{"location":"Project_Guide_v3.2/#imperial-default-sheet","title":"Imperial Default Sheet","text":"<p>Exactly 48 \u00d7 96 inches.</p>"},{"location":"Project_Guide_v3.2/#8-ui-behavior-rules","title":"8. UI Behavior Rules","text":""},{"location":"Project_Guide_v3.2/#81-settings-panel","title":"8.1 Settings Panel","text":"<ul> <li>Must always open  </li> <li>Must use TaskPanel_Settings  </li> <li>Must call hydrate_from_params() before building widgets  </li> </ul>"},{"location":"Project_Guide_v3.2/#82-main-taskpanel","title":"8.2 Main TaskPanel","text":"<ul> <li>Must reflect hydrated defaults  </li> <li>Must not override defaults  </li> <li>Must not infer presets  </li> <li>Must not open multiple instances  </li> </ul>"},{"location":"Project_Guide_v3.2/#83-sheetsourcenesting-view-rules","title":"8.3 Sheet/Source/Nesting View Rules","text":"<ul> <li>Clear groups before redraw  </li> <li>Never leave orphans  </li> <li>Auto-zoom after draw  </li> <li>Maintain consistent naming:</li> <li>SquatchCut_Sheet  </li> <li>SquatchCut_SourceParts  </li> <li>SquatchCut_NestedParts  </li> </ul>"},{"location":"Project_Guide_v3.2/#9-tests","title":"9. Tests","text":""},{"location":"Project_Guide_v3.2/#91-must-test","title":"9.1 Must Test","text":"<ul> <li>Fraction parsing  </li> <li>Fraction formatting  </li> <li>CSV parsing  </li> <li>Default initialization  </li> <li>Hydration logic  </li> <li>Preset behavior  </li> <li>TaskPanel load behavior  </li> <li>Measurement-system conversions  </li> </ul>"},{"location":"Project_Guide_v3.2/#92-should-test","title":"9.2 Should Test","text":"<ul> <li>Sheet object creation  </li> <li>Group clearing  </li> <li>UI stability (when possible)  </li> </ul>"},{"location":"Project_Guide_v3.2/#10-add-on-manager-rules","title":"10. Add-On Manager Rules","text":"<p>Codex must ensure:</p> <ul> <li>Correct zip structure  </li> <li>Correct metadata  </li> <li>No relative imports  </li> <li>All icons exist  </li> <li>Version increments  </li> </ul>"},{"location":"Project_Guide_v3.2/#11-backlog-v32","title":"11. Backlog (v3.2)","text":""},{"location":"Project_Guide_v3.2/#critical","title":"Critical","text":"<ul> <li>Settings panel stability  </li> <li>Hydration order correctness  </li> <li>TaskPanel initialization ordering  </li> <li>UI width/overflow fixes  </li> </ul>"},{"location":"Project_Guide_v3.2/#medium","title":"Medium","text":"<ul> <li>Multi-sheet nesting  </li> <li>Layout exports  </li> <li>More robust heuristics  </li> </ul>"},{"location":"Project_Guide_v3.2/#future","title":"Future","text":"<ul> <li>Grain direction support  </li> <li>Bookmatching  </li> <li>Kerf simulation  </li> </ul>"},{"location":"Project_Guide_v3.2/#12-development-rules-summary","title":"12. Development Rules Summary","text":"<ol> <li>Internal unit = mm  </li> <li>Imperial UI = fractions only  </li> <li>Defaults remain unchanged except in Settings  </li> <li>Presets never overwrite defaults  </li> <li>TaskPanel never auto-selects presets  </li> <li>Hydration before UI  </li> <li>Codex must use reasoning levels  </li> <li>Tests accompany logic changes  </li> <li>UI must never overflow  </li> <li>Settings panel must open  </li> <li>No relative imports  </li> <li>No silent assumptions  </li> <li>No redesigns without explicit instructions  </li> </ol>"},{"location":"Project_Guide_v3.2/#13-changelog-strategy-for-v32","title":"13. Changelog Strategy for v3.2","text":"<ul> <li>Add v3.2 section  </li> <li>Note settings fixes, hydration rules, UI rules, Codex reinforcement  </li> <li>Bump version to 0.3.2  </li> <li>Include explicit references to v3.2 documentation  </li> </ul>"},{"location":"Project_Guide_v3.2/#end-of-squatchcut-project-guide-v32","title":"END OF SquatchCut Project Guide v3.2","text":""},{"location":"TESTING/","title":"SquatchCut Testing &amp; QA Guide","text":"<p>This document explains how to test the SquatchCut workbench, both automatically (pytest and integration tests) and manually inside FreeCAD.</p> <p>It is written assuming: - You have this repository cloned. - You have Python and FreeCAD installed. - You are comfortable using a terminal (e.g., VS Code terminal).</p>"},{"location":"TESTING/#1-core-tests-no-freecad-required","title":"1. Core Tests (No FreeCAD Required)","text":"<p>These tests cover the pure Python core logic under <code>freecad/SquatchCut/core</code> (imported as <code>SquatchCut.core</code>): - Nesting algorithm (no overlaps, rotation, multiple sheets). - Session state storage (sheet size, kerf, gap, last layout).</p>"},{"location":"TESTING/#11-setup-first-time","title":"1.1. Setup (first time)","text":"<p>Create and activate a virtual environment:</p> <pre><code>python3 -m venv .venv\nsource .venv/bin/activate\n</code></pre> <p>Install test dependencies:</p> <pre><code>pip install pytest pytest-cov\n</code></pre>"},{"location":"TESTING/#12-run-core-tests","title":"1.2. Run core tests","text":"<p>From the repository root:</p> <pre><code>pytest -v\n</code></pre> <p>Or with coverage (core modules exercised by the unit tests):</p> <pre><code>pytest --cov=SquatchCut.core.nesting --cov=SquatchCut.core.session_state --cov-report=term-missing -v\n</code></pre> <p>Expected results:</p> <ul> <li>All tests in <code>tests/</code> should pass.</li> <li>For <code>test_nesting.py</code> you should see test names such as:</li> <li><code>test_nesting_no_overlap_simple</code></li> <li><code>test_nesting_respects_can_rotate</code></li> <li><code>test_nesting_multiple_sheets</code></li> <li><code>test_nesting_rotation_flag_preserved</code></li> </ul> <p>If any test fails, pytest will show: - The test name. - The failing assertion. - The inputs that caused the failure.</p> <p>Use this output to debug the core logic before touching FreeCAD.</p>"},{"location":"TESTING/#2-freecad-integration-tests","title":"2. FreeCAD Integration Tests","text":"<p>These tests run inside FreeCAD and exercise real commands: - Creating rectangles in a document. - Running <code>RunNestingCommand</code>. - Verifying that <code>Sheet_*</code> groups and clones exist. - Verifying that running nesting with no selection does not crash.  - Task panel flows (defaults, units toggling, rotation defaults) when FreeCAD GUI is available.</p>"},{"location":"TESTING/#21-ensure-pytest-is-installed-in-freecad","title":"2.1. Ensure pytest is installed in FreeCAD","text":"<p>You only need to do this once per FreeCAD Python environment:</p> <pre><code>FreeCADCmd -c \"import sys, subprocess; subprocess.check_call([sys.executable, '-m', 'pip', 'install', 'pytest'])\"\n</code></pre> <p>On macOS with the official FreeCAD .app, <code>FreeCADCmd</code> is usually:</p> <pre><code>/Applications/FreeCAD.app/Contents/MacOS/FreeCADCmd\n</code></pre> <p>So the command becomes:</p> <pre><code>/Applications/FreeCAD.app/Contents/MacOS/FreeCADCmd -c \"import sys, subprocess; subprocess.check_call([sys.executable, '-m', 'pip', 'install', 'pytest'])\"\n</code></pre>"},{"location":"TESTING/#22-run-integration-tests","title":"2.2. Run integration tests","text":"<p>From the repository root:</p> <pre><code>FreeCADCmd -c \"import run_freecad_tests\"\n</code></pre> <p>(Or using the full path to <code>FreeCADCmd</code> as above.)</p> <p>This will run the tests in <code>tests_integration/</code>.</p> <p>Expected results:</p> <ul> <li><code>test_run_nesting_creates_sheet_groups_and_clones</code> passes:</li> <li>At least one <code>Sheet_*</code> group exists.</li> <li>There are at least as many clones as input panels.</li> <li><code>test_run_nesting_no_selection_shows_no_crash</code> passes:</li> <li>Running nesting with no selection does not create any <code>Sheet_*</code> groups.</li> <li>No exception bubbles out of the command.</li> <li><code>test_taskpanel_workflow</code> suite (skips if FreeCADGui is unavailable):</li> <li>Saved defaults in Settings appear in the main TaskPanel with no preset auto-selection.</li> <li>Units toggling reformats sheet/kerf fields.</li> <li>Rotation defaults in Settings populate the TaskPanel rotation checkboxes.</li> </ul> <p>Integration tests are a quick sanity check that the workbench actually behaves correctly inside FreeCAD with real documents.</p>"},{"location":"TESTING/#23-running-gui-smoke-tests-from-freecad","title":"2.3. Running GUI smoke tests from FreeCAD","text":"<p>Inside FreeCAD (Python console):</p> <pre><code>Gui.runCommand(\"SquatchCut_RunGUITests\")\n</code></pre> <p>This runs the built-in GUI smoke suite (import, nesting preview, units checks, cutlist export). Use this after significant UI changes.</p>"},{"location":"TESTING/#3-manual-qa-checklist-in-freecad","title":"3. Manual QA Checklist in FreeCAD","text":"<p>Use this checklist when doing manual QA in FreeCAD. This is especially important before a release or when major changes are made to nesting, CSV import, or settings.</p>"},{"location":"TESTING/#31-settings-panel","title":"3.1. Settings panel","text":"<ol> <li>Open FreeCAD.</li> <li>Create or open a document.</li> <li>From the SquatchCut workbench, run the SquatchCut Settings command.</li> <li>In the settings panel:</li> <li>Change sheet width and height.</li> <li>Change kerf (mm) and gap (mm).</li> <li>Toggle \"Allow rotation by default\".</li> <li>Click OK.</li> <li>Verify:</li> <li>The Report View shows an updated settings message.</li> <li>Re-opening the Settings panel shows the same values you entered.</li> <li>Sheet size values are respected by the next nesting operation.</li> </ol>"},{"location":"TESTING/#32-csv-import-with-rotation-specified","title":"3.2. CSV import with rotation specified","text":"<ol> <li>Prepare a CSV with:</li> <li><code>id,width_mm,height_mm,allow_rotate</code></li> <li>Some rows with <code>allow_rotate=1</code>, some with <code>allow_rotate=0</code>.</li> <li>Use the SquatchCut CSV import command to load this file.</li> <li>Verify:<ul> <li>Panels are created in the document.</li> </ul> </li> <li>Each imported panel has a <code>SquatchCutCanRotate</code> property:<ul> <li><code>True</code> for <code>allow_rotate=1</code>.</li> <li><code>False</code> for <code>allow_rotate=0</code>.</li> </ul> </li> <li>Run nesting:</li> <li>Check that some panels are rotated (those allowed).</li> <li>Panels with <code>allow_rotate=0</code> must never be rotated.</li> </ol>"},{"location":"TESTING/#33-csv-import-without-rotation-column-default-behavior","title":"3.3. CSV import without rotation column (default behavior)","text":"<ol> <li>Prepare a CSV without <code>allow_rotate</code> column.</li> <li>In the Settings panel, set:</li> <li>\"Allow rotation by default\" = ON.</li> <li>Import the CSV and run nesting.</li> <li>Verify:</li> <li> <p>Panels are allowed to rotate and will rotate when beneficial.</p> </li> <li> <p>Set \"Allow rotation by default\" = OFF.</p> </li> <li>Import the same CSV again and run nesting.</li> <li>Verify:</li> <li>No panels are rotated (all rotation_deg = 0 in the export).</li> </ol>"},{"location":"TESTING/#34-nesting-placement-no-overlaps-multiple-sheets","title":"3.4. Nesting placement (no overlaps, multiple sheets)","text":"<ol> <li>Create multiple rectangles of varying sizes in a document.</li> <li>Run nesting.</li> <li>Verify:</li> <li><code>Sheet_*</code> groups are created.</li> <li>No shapes overlap visually.</li> <li>If the total area is large, more than one sheet is used.</li> </ol>"},{"location":"TESTING/#35-csv-export-of-nesting","title":"3.5. CSV export of nesting","text":"<ol> <li>Perform a nesting as above.</li> <li>Run the Export Nesting CSV command.</li> <li>Choose a filename and save.</li> <li>Open the CSV in a spreadsheet viewer.</li> <li>Verify:</li> <li>Header includes: <code>sheet_index,part_id,width_mm,height_mm,x_mm,y_mm,angle_deg</code>.</li> <li>Each input part appears exactly once in the CSV output.</li> <li><code>sheet_index</code> values correspond to the FreeCAD <code>Sheet_*</code> groups.</li> <li><code>angle_deg</code> is 0 for non-rotated parts and 90 for rotated parts.</li> </ol>"},{"location":"TESTING/#36-error-handling","title":"3.6. Error handling","text":"<ol> <li>Try to import a CSV missing required columns (e.g., no id or width).</li> <li>Expect: a friendly error dialog explaining missing columns.</li> <li>Try running nesting with no panels selected.</li> <li>Expect: a warning dialog and no sheets created.</li> <li>Try exporting CSV before any nesting has been run.</li> <li>Expect: a message that no layout is available to export.</li> </ol>"},{"location":"TESTING/#37-ui-smoke-fast-pass","title":"3.7. UI Smoke (fast pass)","text":"<ul> <li>Open SquatchCut workbench; launch the main Task panel.</li> <li>Toggle Units (Metric \u2194 Imperial) and confirm sheet/kerf fields reformat; preset remains \u201cNone.\u201d</li> <li>Import <code>freecad/testing/csv/valid_panels_small.csv</code>; confirm parts table populates.</li> <li>Run nesting preview; confirm nested layout appears and Source/Nested view toggles work.</li> <li>Export cutlist CSV; open and verify rows match table entries.</li> <li>Open Settings, set sheet/kerf defaults, save; reopen Task panel and confirm defaults applied without preset auto-selection.</li> </ul>"},{"location":"TESTING/#4-running-tests-inside-the-dockerdevcontainer-environment","title":"4. Running tests inside the Docker/devcontainer environment","text":"<p>The repository includes <code>.devcontainer/</code> files so you can run tests inside a reproducible Linux + FreeCAD environment. This is useful if your host machine does not have FreeCAD installed or when you want to match CI exactly.</p>"},{"location":"TESTING/#41-build-and-launch-the-container","title":"4.1 Build and launch the container","text":"<pre><code>docker build -f .devcontainer/Dockerfile -t squatchcut-dev .\ndocker run --rm -it -v \"$(pwd)\":/workspaces/SquatchCut squatchcut-dev /bin/bash\n</code></pre> <p>Inside the container the repo lives at <code>/workspaces/SquatchCut</code>, FreeCAD lives under <code>/usr/bin/freecadcmd</code>, and Python 3.10 is the default interpreter. If the VS Code Dev Container workflow runs, dependencies are installed automatically; otherwise run:</p> <pre><code>cd /workspaces/SquatchCut\npip install -e .[dev]\n</code></pre>"},{"location":"TESTING/#42-running-tests-in-the-container","title":"4.2 Running tests in the container","text":"<ul> <li>Core tests (no FreeCAD required):</li> </ul> <p><code>bash   cd /workspaces/SquatchCut   pytest</code></p> <ul> <li>FreeCAD-aware pytest modules (anything that imports <code>FreeCAD</code>, <code>FreeCADGui</code>, or GUI stubs):</li> </ul> <p><code>bash   PYTHONPATH=/usr/lib/freecad-python3/lib pytest tests/test_views.py</code></p> <p>Prepend the same <code>PYTHONPATH</code> to run the entire suite under the FreeCAD Python environment.</p> <ul> <li>FreeCAD integration suite:</li> </ul> <p><code>bash   FreeCADCmd -c \"import run_freecad_tests\"</code></p> <p>(<code>FreeCADCmd</code> already points to <code>/usr/bin/freecadcmd</code> inside the container.)</p>"},{"location":"TESTING/#43-troubleshooting","title":"4.3 Troubleshooting","text":"<ul> <li>If pytest cannot import <code>FreeCAD</code>, double-check the <code>PYTHONPATH=/usr/lib/freecad-python3/lib</code> prefix.</li> <li>GUI smoke tests that rely on Qt widgets are limited by the lightweight stubs bundled in <code>gui/qt_compat</code>. When a feature relies on a specific Qt API (e.g., <code>QtWidgets.QLabel.setWordWrap</code>), guard it with <code>hasattr(...)</code> so tests can still run headless.</li> <li>The default container user is <code>vscode</code>. Use <code>pip install --user ...</code> only if the editable install is not available.</li> </ul>"},{"location":"TESTING/#5-useful-pytest-options","title":"5. Useful pytest options","text":"<p>For deeper debugging, use:</p> <pre><code>pytest -vv\n</code></pre> <p>This prints each test name and makes it easier to see exactly which scenario passed or failed.</p> <p>To focus on a single test file:</p> <pre><code>pytest -vv tests/test_nesting.py\n</code></pre> <p>Or a single test within that file:</p> <pre><code>pytest -vv tests/test_nesting.py::test_nesting_no_overlap_simple\n</code></pre>"},{"location":"TESTING/#6-summary","title":"6. Summary","text":"<ul> <li>Run core tests regularly during development (<code>pytest -v</code>).</li> <li>Run FreeCAD integration tests before major changes or releases.</li> <li>Use the manual QA checklist when you need to validate end-to-end   behavior in a FreeCAD GUI session.</li> <li>If any step above fails, capture:</li> <li>The exact test command you ran.</li> <li>The console/Report View output.</li> <li>A copy of the CSV or file that triggered the issue.   And open a bug ticket with this information.</li> </ul>"},{"location":"UAT_Checklist/","title":"SquatchCut UAT Checklist","text":"<p>Version: UAT v0.1 Audience: Volunteer / UAT testers Refer to <code>docs/Project_Guide_v3.2.md</code> for the authoritative v3.2 testing, UI, and Codex expectations.</p> <p>Instructions:</p> <ul> <li>Follow each step in order.</li> <li>For each step, mark Pass (\u2705) or Fail (\u274c) in the table.</li> <li>Add notes if anything is confusing, broken, or unexpected.</li> </ul> <p>You may print this page or fill it in digitally.</p>"},{"location":"UAT_Checklist/#tester-info","title":"Tester Info","text":"<ul> <li>Name: </li> <li>Date: </li> <li>OS &amp; Version (e.g., Windows 11, macOS 15): </li> <li>FreeCAD Version: </li> <li>SquatchCut Build / ZIP Name: </li> </ul>"},{"location":"UAT_Checklist/#legend","title":"Legend","text":"<ul> <li>\u2705 = Worked as expected</li> <li>\u274c = Didn\u2019t work or was confusing</li> <li>N/A = Not applicable or skipped</li> </ul>"},{"location":"UAT_Checklist/#checklist","title":"Checklist","text":"# Step Result (\u2705/\u274c/N/A) Notes (what happened?) 1 Start FreeCAD. 2 Confirm you see a SquatchCut toolbar/menu with SquatchCut and Settings buttons. 3 Click Settings. Verify the settings panel opens without errors. 4 In Settings, set your measurement system (Metric or Imperial) and a default sheet size. 5 Save/apply settings and close the Settings panel. 6 Click the main SquatchCut button. Confirm the main panel opens without errors. 7 In the main panel, confirm you see sections for CSV import, sheet/presets, and nesting. 8 Set CSV Units to match <code>test_parts.csv</code> (as instructed). 9 Use the file picker to select <code>test_parts.csv</code>. 10 Click Import Parts. No error dialog should appear. 11 In the FreeCAD Model tree, confirm a Source Parts group appears and contains part items. 12 Change the sheet size using the sheet width/height fields (without using a preset). 13 Verify that the visible sheet in the 3D view updates to the new size. 14 Select a sheet preset (e.g., 4\u2032 x 8\u2032). Confirm the sheet fields update to match the preset. 15 Manually change the sheet width or height again and confirm the preset selection returns to \"None/Custom\". 16 Click Run Nesting. 17 In the Model tree, confirm a Nested Parts group appears or is rebuilt. 18 Confirm nested parts appear on top of the sheet in the 3D view (no parts obviously off-sheet). 19 Run nesting a second time without changing the CSV. Confirm the Nested Parts group updates rather than duplicating parts. 20 Hide the Source Parts group, leaving only sheet + nested layout visible. 21 Save the FreeCAD document without errors. 22 (Optional) Use File \u2192 Export to export the layout (DXF/SVG/PDF) and confirm the export works."},{"location":"UAT_Checklist/#overall-experience","title":"Overall Experience","text":"<p>Please briefly describe:</p> <ul> <li>What worked well?</li> <li>What was confusing?</li> <li>Any crashes or serious bugs?</li> </ul>"},{"location":"UAT_Checklist/#additional-comments","title":"Additional Comments","text":"<p>(Use as much space as you need.)</p> <p>End of checklist.</p>"},{"location":"UAT_Prep_Instructions/","title":"SquatchCut UAT Prep Instructions","text":"<p>Audience: Volunteer testers / UAT participants Goal: Help you install SquatchCut and run a simple, repeatable test script. Please follow <code>docs/Project_Guide_v3.2.md</code> for the latest Codex-fortified instructions and UI expectations before running UAT.</p> <p>You do not need to know how to code. You do not need GitHub.</p>"},{"location":"UAT_Prep_Instructions/#1-what-youll-need","title":"1. What You\u2019ll Need","text":"<p>Before you start:</p> <ul> <li>A computer with:</li> <li>Windows, macOS, or Linux</li> <li>FreeCAD 1.0+ installed</li> <li>The SquatchCut add-on ZIP file</li> <li>Test files provided to you:</li> <li><code>test_parts.csv</code></li> <li><code>UAT_Checklist.md</code> (this file may be bundled or referenced)</li> <li>Any feedback template your coordinator provides</li> </ul>"},{"location":"UAT_Prep_Instructions/#2-what-you-do-not-need","title":"2. What You Do Not Need","text":"<p>You do not need:</p> <ul> <li>A GitHub account</li> <li>GitHub Desktop</li> <li>A compiler</li> <li>Any knowledge of Python</li> </ul> <p>Please do not:</p> <ul> <li>Rename the test CSV file</li> <li>Move files into the FreeCAD installation folders</li> <li>Install additional tools unless explicitly instructed</li> </ul>"},{"location":"UAT_Prep_Instructions/#3-install-squatchcut","title":"3. Install SquatchCut","text":"<ol> <li>Open FreeCAD.</li> <li>Go to Tools \u2192 Add-on Manager.</li> <li>Click Install from ZIP.</li> <li>Choose the SquatchCut ZIP file provided to you.</li> <li>Wait for installation to complete.</li> <li>Close and restart FreeCAD.</li> </ol> <p>After restart, confirm that:</p> <ul> <li>A SquatchCut toolbar or menu appears.</li> <li>You see at least:</li> <li>A SquatchCut button (main panel)</li> <li>A Settings button</li> </ul> <p>If not, please note that as a UAT issue.</p>"},{"location":"UAT_Prep_Instructions/#4-files-you-will-use","title":"4. Files You Will Use","text":"<p>Your coordinator should give you:</p> <ul> <li> <p><code>test_parts.csv</code>   Sample parts list for testing.</p> </li> <li> <p><code>UAT_Checklist.md</code>   Step-by-step script to follow inside FreeCAD.</p> </li> <li> <p>A feedback template (could be a text file, form, or email instructions).</p> </li> </ul> <p>Keep these together in a known folder (e.g., <code>Documents/SquatchCut_UAT/</code>).</p>"},{"location":"UAT_Prep_Instructions/#5-how-to-run-the-test","title":"5. How to Run the Test","text":"<ol> <li>Start FreeCAD.</li> <li>Ensure the SquatchCut toolbar is visible.</li> <li>Open the UAT_Checklist.md file in any text editor (Notepad, VS Code, etc.).</li> <li>Follow each step in the checklist in order.</li> <li>After each step, mark:</li> <li>Pass \u2013 if it worked and made sense.</li> <li>Fail \u2013 if it did not work, crashed, or was confusing.</li> </ol> <p>Use the notes column to record:</p> <ul> <li>What you expected</li> <li>What actually happened</li> <li>Any error messages or weird behavior</li> </ul> <p>You are not being graded. The software is.</p>"},{"location":"UAT_Prep_Instructions/#6-taking-screenshots-if-something-fails","title":"6. Taking Screenshots (If Something Fails)","text":"<p>If something breaks or looks wrong:</p> <ul> <li>On Windows:</li> <li>Press Win + Shift + S to open the Snip &amp; Sketch / Snipping tool.</li> <li>Drag a box around the area.</li> <li> <p>Save the image.</p> </li> <li> <p>On macOS:</p> </li> <li>Press Command + Shift + 4.</li> <li>Drag a box around the area.</li> <li> <p>A screenshot is saved to your desktop.</p> </li> <li> <p>On Linux:</p> </li> <li>Use Print Screen or your distro\u2019s screenshot tool.</li> </ul> <p>Try to capture:</p> <ul> <li>The model tree (left panel)</li> <li>The SquatchCut UI</li> <li>The 3D view showing the layout</li> </ul>"},{"location":"UAT_Prep_Instructions/#7-when-youre-done","title":"7. When You\u2019re Done","text":"<p>When you complete the checklist:</p> <ol> <li>Save your filled-out checklist (if it\u2019s a file).</li> <li>Collect:</li> <li>The completed checklist</li> <li>Any screenshots</li> <li> <p>Any test CSV variations you used (if requested)</p> </li> <li> <p>Send everything to your SquatchCut contact using the method they specified:</p> </li> <li>Email</li> <li>Shared folder</li> <li>Forms, etc.</li> </ol> <p>If you got stuck and couldn\u2019t complete the script, still send what you have and note where you stopped.</p> <p>Thank you for helping test SquatchCut!</p>"},{"location":"agents/","title":"SquatchCut \u2013 Codex Agent Guide","text":"<p>This guide defines how Codex must behave when editing the SquatchCut repository. It complements the main project guide at <code>docs/Project_Guide_v3.2.md</code> and is binding for all Codex work.</p>"},{"location":"agents/#codex-role","title":"Codex Role","text":"<ul> <li>Acts as the engineering implementation layer for SquatchCut.</li> <li>Follows requirements from Steven and ChatGPT.</li> <li>Adheres to architecture, patterns, and behaviors defined in <code>docs/Project_Guide_v3.2.md</code>.</li> <li>Avoids \u201cimproving\u201d or refactoring architecture without explicit instruction.</li> <li>Produces small, targeted changes unless told otherwise.</li> <li>Does not decide product direction or UX, and does not change defaults or preset behavior without explicit instruction.</li> </ul>"},{"location":"agents/#repository-layout-summary","title":"Repository Layout Summary","text":"<ul> <li><code>SquatchCut/core/</code> \u2013 core logic: nesting, units, session_state, settings, sheet_model, presets.</li> <li><code>SquatchCut/gui/</code> \u2013 GUI code: TaskPanel_Main, TaskPanel_Settings, source_view, nesting_view, view_utils, commands.</li> <li><code>SquatchCut/resources/</code> \u2013 icons and other resources.</li> <li><code>tests/</code> \u2013 pytest suite.</li> <li><code>docs/</code> \u2013 documentation: <code>Project_Guide_v3.2.md</code> (main guide), <code>agents.md</code> (this file), and other user/developer docs.</li> </ul> <p>Codex must respect this layout and must not move files between these areas unless explicitly instructed.</p>"},{"location":"agents/#behavior-and-constraints","title":"Behavior and Constraints","text":"<ul> <li>Internal unit is always millimeters.</li> <li>Imperial UI uses fractional inches only.</li> <li>Defaults are loaded via <code>hydrate_from_params()</code> and are not changed by TaskPanel load.</li> <li>Presets never override defaults and are never auto-selected on panel load.</li> <li>TaskPanel creation must call <code>hydrate_from_params()</code> before building widgets.</li> <li>Codex must not change default values, auto-select presets, change measurement system logic, add or remove presets, introduce new dependencies, restructure directories, or rename TaskPanel/core classes unless explicitly instructed.</li> <li>No relative imports, especially in FreeCAD integration code.</li> <li>No silent behavioral changes; any change must tie directly to an explicit requirement in an instruction block.</li> </ul>"},{"location":"agents/#reasoning-levels-and-instruction-blocks","title":"Reasoning Levels and Instruction Blocks","text":"<ul> <li>LOW \u2013 trivial fix in one file.</li> <li>MEDIUM \u2013 small feature or bugfix involving one or two files.</li> <li>HIGH \u2013 multi-file changes or work touching settings, hydration, or TaskPanel initialization.</li> <li>EXTRA-HIGH \u2013 architectural or algorithm-level refactor.</li> </ul> <p>Instruction block structure: - Begins with <code>Recommended Codex reasoning level: &lt;LEVEL&gt;</code>. - First line inside: <code>Codex, this task requires &lt;LEVEL&gt; reasoning.</code> - Includes file paths to touch, requirements, acceptance criteria, and guardrails. - Codex must not infer missing requirements and must obey guardrails even if another pattern seems \u201cbetter.\u201d</p>"},{"location":"agents/#testing-expectations","title":"Testing Expectations","text":"<ul> <li>Any logic-level change must be accompanied by tests under <code>tests/</code>.</li> <li>Codex must add tests for new behaviors, update tests when behavior changes, and ensure pytest passes.</li> <li>Core focus areas: mm/inch conversions and fractions, CSV parsing, hydration and default initialization, preset behavior, TaskPanel load behavior and measurement-system formatting.</li> <li>Do not remove tests without explicit instructions.</li> </ul>"},{"location":"agents/#interaction-with-project_guide_v32md","title":"Interaction with Project_Guide_v3.2.md","text":"<ul> <li><code>docs/Project_Guide_v3.2.md</code> is the primary project-wide technical and process specification.</li> <li><code>docs/agents.md</code> is the behavioral guide for Codex.</li> <li>When in doubt, defer to <code>Project_Guide_v3.2.md</code> for architecture/behavior rules and to <code>agents.md</code> for how Codex should act on instructions. Neither document may be ignored.</li> </ul>"},{"location":"agents/#guardrails-summary","title":"Guardrails Summary","text":"<ul> <li>Do not refactor or reorganize the project unless explicitly instructed.</li> <li>Do not auto-change defaults, presets, or measurement-system behavior.</li> <li>Do not invent new patterns or modules.</li> <li>Do not widen scope; only change what the task requires.</li> <li>Do not reduce test coverage or remove tests without explicit approval in instructions.</li> </ul>"},{"location":"architecture/","title":"Architecture","text":"<p>This document defines the technical architecture of the SquatchCut FreeCAD Nesting Workbench MVP. It outlines the project structure, module responsibilities, data flow, and Codex conventions to ensure consistent implementation.</p>"},{"location":"architecture/#1-project-structure","title":"1. Project Structure","text":"<p>The repository is organized as follows:</p> <p>root/ \u2502 \u251c\u2500\u2500 freecad/ \u2502 \u2514\u2500\u2500 SquatchCut/ \u2502 \u251c\u2500\u2500 InitGui.py \u2502 \u251c\u2500\u2500 init.py \u2502 \u251c\u2500\u2500 gui/ \u2502 \u2502 \u251c\u2500\u2500 commands/ \u2502 \u2502 \u2502 \u251c\u2500\u2500 cmd_add_shapes.py \u2502 \u2502 \u2502 \u251c\u2500\u2500 cmd_import_csv.py \u2502 \u2502 \u2502 \u251c\u2500\u2500 cmd_run_nesting.py \u2502 \u2502 \u2502 \u251c\u2500\u2500 cmd_set_sheet_size.py \u2502 \u2502 \u2502 \u251c\u2500\u2500 cmd_export_report.py \u2502 \u2502 \u2502 \u2514\u2500\u2500 cmd_preferences.py \u2502 \u2502 \u2514\u2500\u2500 dialogs/ \u2502 \u2502 \u251c\u2500\u2500 dlg_select_shapes.py \u2502 \u2502 \u251c\u2500\u2500 dlg_csv_import.py \u2502 \u2502 \u251c\u2500\u2500 dlg_sheet_size.py \u2502 \u2502 \u251c\u2500\u2500 dlg_run_nesting.py \u2502 \u2502 \u2514\u2500\u2500 dlg_export_report.py \u2502 \u2502 \u2502 \u251c\u2500\u2500 core/ \u2502 \u2502 \u251c\u2500\u2500 shape_extractor.py \u2502 \u2502 \u251c\u2500\u2500 csv_loader.py \u2502 \u2502 \u251c\u2500\u2500 nesting_engine.py \u2502 \u2502 \u251c\u2500\u2500 multi_sheet_optimizer.py \u2502 \u2502 \u251c\u2500\u2500 geometry_output.py \u2502 \u2502 \u251c\u2500\u2500 report_generator.py \u2502 \u2502 \u2514\u2500\u2500 preferences.py \u2502 \u2514\u2500\u2500 resources/ \u2502 \u251c\u2500\u2500 icons/ \u2502 \u2514\u2500\u2500 ui/ \u2502 \u2514\u2500\u2500 docs/ \u251c\u2500\u2500 mvp.md \u251c\u2500\u2500 architecture.md \u2514\u2500\u2500 roadmap.md</p>"},{"location":"architecture/#2-module-responsibilities","title":"2. Module Responsibilities","text":""},{"location":"architecture/#21-core-modules","title":"2.1 <code>/core</code> modules","text":""},{"location":"architecture/#shape_extractorpy","title":"shape_extractor.py","text":"<ul> <li>Scans FreeCAD document for valid shapes</li> <li>Extracts bounding boxes (width, height)</li> <li>Converts shapes to panel objects</li> <li>Enforces rotation rules</li> <li>Filters by user selection</li> </ul>"},{"location":"architecture/#csv_loaderpy","title":"csv_loader.py","text":"<ul> <li>Loads CSV into panel objects</li> <li>Validates fields</li> <li>Normalizes types and units</li> <li>Produces list of panels</li> </ul>"},{"location":"architecture/#nesting_enginepy","title":"nesting_engine.py","text":"<ul> <li>Implements rectangular nesting (Skyline or Guillotine)</li> <li>Places panels at (x, y) with rotation</li> <li>Detects collisions + boundaries</li> <li>Produces placements for one sheet</li> </ul>"},{"location":"architecture/#multi_sheet_optimizerpy","title":"multi_sheet_optimizer.py","text":"<ul> <li>Uses nesting_engine repeatedly</li> <li>Allocates panels across sheets</li> <li>Stops when all panels placed</li> <li>Returns a list of sheets + placements</li> </ul>"},{"location":"architecture/#geometry_outputpy","title":"geometry_output.py","text":"<ul> <li>Creates FreeCAD geometry for each sheet</li> <li>Adds groups and rectangles</li> <li>Applies x, y placement, rotation, and labeling</li> </ul>"},{"location":"architecture/#report_generatorpy","title":"report_generator.py","text":"<ul> <li>Builds a PDF summary:</li> <li>Sheet count</li> <li>Panel placements</li> <li>Efficiency / waste %</li> <li>Timestamp</li> <li>Builds CSV summary</li> </ul>"},{"location":"architecture/#preferencespy","title":"preferences.py","text":"<ul> <li>Wraps FreeCAD preference system</li> <li>Stores:</li> <li>Default sheet size</li> <li>Kerf/spacing</li> <li>Rotation allowed</li> <li>Auto-detect shapes</li> <li>Export directory</li> <li>Branding toggle</li> </ul>"},{"location":"architecture/#3-gui-layer","title":"3. GUI Layer","text":""},{"location":"architecture/#31-workbench-setup","title":"3.1 Workbench Setup","text":""},{"location":"architecture/#initguipy","title":"<code>InitGui.py</code>","text":"<ul> <li>Registers SquatchCut workbench</li> <li>Adds toolbar buttons</li> <li>Loads icons</li> </ul>"},{"location":"architecture/#__init__py","title":"<code>__init__.py</code>","text":"<ul> <li>Metadata</li> <li>Bootstrapping</li> </ul>"},{"location":"architecture/#32-commands","title":"3.2 Commands","text":"<p>Each command lives inside <code>/gui/commands</code>:</p> <ul> <li><code>cmd_add_shapes.py</code></li> <li><code>cmd_import_csv.py</code></li> <li><code>cmd_run_nesting.py</code></li> <li><code>cmd_set_sheet_size.py</code></li> <li><code>cmd_export_report.py</code></li> <li><code>cmd_preferences.py</code></li> </ul> <p>Commands:</p> <ul> <li>Call dialogs</li> <li>Trigger core functions</li> <li>Update UI</li> </ul>"},{"location":"architecture/#33-dialogs","title":"3.3 Dialogs","text":"<p>Each dialog in <code>/gui/dialogs</code> handles user input:</p> <ul> <li>Select shapes</li> <li>Import CSV</li> <li>Sheet size configuration</li> <li>Nesting run settings</li> <li>Export settings</li> </ul> <p>Dialogs emit structured data for core modules.</p>"},{"location":"architecture/#4-data-model","title":"4. Data Model","text":""},{"location":"architecture/#panel-object","title":"Panel Object","text":"<p>{ \"id\": str, \"width\": float, \"height\": float, \"rotation_allowed\": bool, }</p>"},{"location":"architecture/#placement-object","title":"Placement Object","text":"<p>{ \"panel_id\": str, \"x\": float, \"y\": float, \"rotation\": int, # 0 or 90 \"sheet_id\": int }</p>"},{"location":"architecture/#sheet-object","title":"Sheet Object","text":"<p>{ \"sheet_id\": int, \"width\": float, \"height\": float, \"placements\": list[Placement] }</p>"},{"location":"architecture/#5-data-flow","title":"5. Data Flow","text":"<p>FreeCAD Shapes \u2500\u2500\u2500\u2500\u2500\u2500\u25ba shape_extractor CSV File \u2500\u2500\u2500\u2500\u2500\u2500\u25ba csv_loader</p> <p>Extracted Panels \u25bc multi_sheet_optimizer \u25bc nesting_engine (per sheet) \u25bc Sheet Placement Sets \u25bc geometry_output \u2500\u2500\u25ba FreeCAD Document report_generator \u2500\u2500\u25ba PDF / CSV</p>"},{"location":"architecture/#6-codex-conventions","title":"6. Codex Conventions","text":"<p>Codex must follow these rules when generating code:</p>"},{"location":"architecture/#61-use-codex-blocks","title":"6.1 Use <code>@codex</code> blocks","text":"<p>Example:</p> <pre><code>\"\"\"\n@codex\nImplement the NestingEngine class.\nRequirements:\n- Do not use recursion.\n- Accept list of panels + sheet size.\n- Return list of placements.\n\"\"\"\n6.2 Avoid global state\nModules must be pure where possible.\n\n6.3 Small functions\nBreak complex logic into testable units.\n\n6.4 FreeCAD imports must be lazy\nimport FreeCAD as App\nimport FreeCADGui as Gui\n\n6.5 Use unified logging\nfrom .preferences import log\n\n7. Future Expansion (Post-MVP Hooks)\nArchitecture reserves space for:\nBookmatching\nGrain direction optimization\nCurved/polygon nesting\nAdvanced nesting heuristics\nPath Workbench integration\nMaterial libraries\nDrag-and-drop sheet editing\nThese will attach cleanly onto existing modules without rewriting MVP code.\n</code></pre>"},{"location":"codex_workflows/","title":"Codex Automation Workflows","text":""},{"location":"codex_workflows/#overview","title":"Overview","text":"<ul> <li>This repository uses @codex headers in each module to guide incremental development.</li> <li>Each module documents its own responsibility, boundaries, and expectations to keep changes targeted.</li> </ul>"},{"location":"codex_workflows/#global-codex-commands","title":"Global Codex Commands","text":"<ol> <li><code>@codex implement next core logic</code></li> <li> <p>Codex should examine method stubs in core modules and fill in the next unimplemented piece.</p> </li> <li> <p><code>@codex update feature &lt;X&gt;</code></p> </li> <li> <p>Codex should locate the correct module(s) using headers, update logic, and avoid touching unrelated modules.</p> </li> <li> <p><code>@codex refactor safely</code></p> </li> <li> <p>Codex should refactor only the module containing the comment without changing structure or deleting headers.</p> </li> <li> <p><code>@codex sync architecture</code></p> </li> <li> <p>Codex should compare code with docs/architecture.md and fix inconsistencies.</p> </li> <li> <p><code>@codex integrate GUI</code></p> </li> <li> <p>Codex should update dialogs and commands to work with the current state of the core logic.</p> </li> <li> <p><code>@codex implementation status</code></p> </li> <li>Codex should scan headers and list which modules have remaining TODO implementations.</li> </ol>"},{"location":"codex_workflows/#rules-for-codex","title":"Rules for Codex","text":"<ul> <li>Do not overwrite files.</li> <li>Only modify sections relevant to the active module.</li> <li>Follow @codex header expectations.</li> <li>Preserve docstrings and method signatures.</li> <li>Never introduce cross-module logic.</li> </ul>"},{"location":"developer_guide/","title":"SquatchCut Developer Guide","text":"<p>The authoritative developer guidance is the SquatchCut Project Guide v3.2 \u2013 Codex-Fortified Edition. Follow that document for Codex communication rules, hydration order, UI constraints, and testing mandates.</p>"},{"location":"mvp/","title":"MVP Scope","text":"<p>FreeCAD Nesting Workbench Version: MVP Specification Author: Steven + ChatGPT</p>"},{"location":"mvp/#mvp-overview","title":"\ud83c\udfaf MVP Overview","text":"<p>SquatchCut is a FreeCAD Workbench that extracts 2D shapes from a user's active project, nests them across multiple sheets using rectangular optimization, generates layout geometry inside FreeCAD, and exports a full PDF/CSV report. CSV import is supported as a fallback, but the primary workflow is extracting geometry from FreeCAD.</p> <p>This document defines the locked, non-negotiable MVP requirements.</p>"},{"location":"mvp/#1-shape-extraction-from-freecad-primary-input","title":"\ud83d\udfe9 1. Shape Extraction From FreeCAD (Primary Input)","text":"<p>MVP must extract panel geometry directly from the active FreeCAD document.</p> <p>Supported sources:</p> <ul> <li>Sketcher sketches (closed profiles)</li> <li>Draft rectangles, polygons, and shapes</li> <li>Part::Box (projected to 2D bounding rectangle)</li> <li>Part::Feature objects with planar faces</li> </ul> <p>Extract for each shape:</p> <ul> <li>Width and height</li> <li>Bounding box in global XY</li> <li>Rotation allowed (true/false)</li> <li>Unique ID</li> <li>Naming from label or auto-generated</li> </ul> <p>User workflow:</p> <ul> <li>Select shapes \u2192 Click \u201cAdd Selected to Nesting\u201d</li> <li>Or auto-detect 2D shapes \u2192 present selectable list</li> </ul> <p>CSV is a fallback, not the primary method.</p>"},{"location":"mvp/#2-csv-import-fallback-mode","title":"\ud83d\udfe9 2. CSV Import (Fallback Mode)","text":"<p>CSV must support:</p> <p>Required fields:</p> <ul> <li>id</li> <li>width</li> <li>height</li> </ul> <p>Optional fields:</p> <ul> <li>grain_direction</li> </ul> <p>CSV validation:</p> <ul> <li>Reject zero or negative values</li> <li>Reject missing fields</li> <li>Human-readable error messages</li> </ul> <p>Users may optionally combine CSV-defined panels with FreeCAD geometry.</p>"},{"location":"mvp/#3-multi-sheet-nesting-mandatory","title":"\ud83d\udfe9 3. Multi-Sheet Nesting (Mandatory)","text":"<p>The MVP must support multi-sheet optimization.</p> <p>Required behaviors:</p> <ul> <li>User defines sheet size (width, height)</li> <li>Algorithm places as many panels per sheet as possible</li> <li>Generates new sheets when full</li> <li>Continues until all panels are placed</li> </ul> <p>Algorithm:</p> <ul> <li>Skyline or Guillotine rectangular nesting</li> <li>Rotation allowed only at 0\u00b0 or 90\u00b0</li> <li>Sorting strategies to reduce waste:</li> <li>Largest-first</li> <li>Height-first</li> <li>Width-first     (Meta-optimization optional: random shuffles for better pack)</li> </ul> <p>Output per placement:</p> <ul> <li>panel_id</li> <li>sheet_id</li> <li>x, y position</li> <li>rotation (0 or 90)</li> </ul>"},{"location":"mvp/#4-freecad-gui-integration-workbench","title":"\ud83d\udfe9 4. FreeCAD GUI Integration (Workbench)","text":"<p>The SquatchCut Workbench must add a toolbar with the following commands:</p> <ul> <li>Add Shapes to Nesting</li> <li>Import CSV</li> <li>Set Sheet Size</li> <li>Run Nesting</li> <li>Preferences</li> <li>Export Report</li> </ul> <p>Required dialogs:</p> <ul> <li>Shape selection dialog</li> <li>CSV import dialog</li> <li>Sheet size dialog</li> <li>Nesting results dialog</li> <li>Report export dialog</li> </ul> <p>Design: simple but functional, no fancy styling required.</p>"},{"location":"mvp/#5-preferences-pane-mandatory","title":"\ud83d\udfe9 5. Preferences Pane (Mandatory)","text":"<p>FreeCAD preferences window must include:</p> <ul> <li>Default sheet width/height</li> <li>Default kerf/spacing between panels</li> <li>Auto-detect shapes on open (yes/no)</li> <li>Allow rotations (yes/no)</li> <li>Default export directory</li> <li>Branding toggle (Sasquatch mode on/off)</li> </ul> <p>Preferences must persist across sessions.</p>"},{"location":"mvp/#6-nesting-report-export-mandatory","title":"\ud83d\udfe9 6. Nesting Report Export (Mandatory)","text":"<p>After nesting, SquatchCut must export a structured report.</p> <p>Report includes:</p> <ul> <li>Date/time</li> <li>FreeCAD project name (if available)</li> <li>Total number of sheets used</li> <li>Total panels</li> <li>Total material area</li> <li>Total waste (%)</li> <li>Efficiency (%)</li> </ul> <p>Per sheet:</p> <ul> <li>Sheet number</li> <li>Sheet dimensions</li> <li>List of placements:</li> <li>panel_id</li> <li>width</li> <li>height</li> <li>rotation</li> <li>x, y placement</li> </ul> <p>Output formats:</p> <ul> <li>PDF (primary)</li> <li>CSV summary (per-panel table)</li> <li>JSON optional but not required</li> </ul> <p>PDF may use ReportLab or FreeCAD\u2019s own export mechanisms.</p>"},{"location":"mvp/#7-nesting-geometry-output-in-freecad","title":"\ud83d\udfe9 7. Nesting Geometry Output in FreeCAD","text":"<p>For each sheet produced, SquatchCut must:</p> <ul> <li>Create a new FreeCAD group (Sheet_1, Sheet_2, etc.)</li> <li>Add Draft rectangles (or Sketch Rectangles) representing final panel positions</li> <li>Apply rotation, placement, and IDs</li> <li>Maintain consistent units (mm)</li> <li>Maintain accurate geometry</li> </ul> <p>Optional but helpful:</p> <ul> <li>Color code rectangles</li> </ul>"},{"location":"mvp/#8-branding-required","title":"\ud83d\udfe9 8. Branding (Required)","text":"<p>MVP must include:</p> <ul> <li>Workbench icon (Squatch/wood ape theme)</li> <li>Toolbar icons</li> <li>\u201cSquatchCut\u201d name visible in UI</li> <li>Optional \u201cSasquatch Mode\u201d toggle in preferences</li> </ul> <p>Branding is a first-class MVP requirement.</p>"},{"location":"mvp/#excluded-from-mvp","title":"\ud83d\udfe5 Excluded From MVP","text":"<p>The following features are intentionally excluded:</p> <ul> <li>Curved or arbitrary-shape polygon nesting</li> <li>FreeCAD Path Workbench integration (CAM, G-code)</li> <li>Grain direction optimization</li> <li>Bookmatching</li> <li>Advanced optimization algorithms (GA, deep nesting)</li> <li>Drag-and-drop sheet editor</li> <li>Material libraries</li> <li>Collaborative/cloud features</li> </ul> <p>These belong in post-MVP roadmap releases.</p>"},{"location":"mvp/#mvp-summary-in-one-sentence","title":"\ud83d\udfe9 MVP Summary in One Sentence","text":"<p>SquatchCut MVP provides a FreeCAD workbench that extracts 2D shapes from the active project (or CSV fallback), nests them across multiple sheets using rectangular optimization, generates corresponding geometry inside FreeCAD, and exports a full PDF report with sheets, placements, and efficiency metrics.</p>"},{"location":"mvp/#end-of-mvp-document","title":"End of MVP Document","text":""},{"location":"quickstart/","title":"SquatchCut Quick Start","text":"<p>TL;DR for people who don\u2019t want a novel.</p>"},{"location":"quickstart/#1-install","title":"1. Install","text":"<ol> <li>Open FreeCAD.</li> <li>Go to Tools \u2192 Add-on Manager \u2192 Install from ZIP.</li> <li>Select the SquatchCut ZIP you were given.</li> <li>Restart FreeCAD.</li> </ol> <p>You should now see a SquatchCut toolbar with:</p> <ul> <li>SquatchCut (main panel)</li> <li>Settings</li> </ul>"},{"location":"quickstart/#2-configure-defaults-one-time","title":"2. Configure Defaults (One Time)","text":"<ol> <li>Click Settings on the SquatchCut toolbar.</li> <li>Choose:</li> <li>Measurement system (Metric or Imperial)</li> <li>Default sheet size (e.g. 48\" \u00d7 96\" or 1220 \u00d7 2440 mm)</li> <li>Kerf and gap</li> <li>Click Save / Apply.</li> </ol>"},{"location":"quickstart/#3-basic-workflow","title":"3. Basic Workflow","text":"<ol> <li>Open the panel </li> <li> <p>Click SquatchCut.</p> </li> <li> <p>Import parts from CSV</p> </li> <li>In the CSV Import section:<ul> <li>Set CSV Units to Metric or Imperial.</li> <li>Pick your CSV file.</li> <li>Click Import Parts.</li> </ul> </li> <li> <p>Check that a Source Parts group appears in the model tree.</p> </li> <li> <p>Set sheet size</p> </li> <li>Confirm sheet width/height fields match your panel.</li> <li>Optionally choose a preset:<ul> <li><code>None / Custom</code></li> <li><code>4\u2032 x 8\u2032</code></li> <li><code>2\u2032 x 4\u2032</code></li> <li><code>5\u2032 x 10\u2032</code></li> </ul> </li> <li> <p>Editing width/height manually should switch preset to <code>None / Custom</code>.</p> </li> <li> <p>Run nesting</p> </li> <li>Click Run Nesting.</li> <li> <p>A Nested Parts group appears, containing the layout.</p> </li> <li> <p>Review and export</p> </li> <li>Inspect the layout in the 3D view.</li> <li>Save your file (File \u2192 Save).</li> <li>Export as needed (File \u2192 Export, DXF/SVG/PDF).</li> </ol>"},{"location":"quickstart/#4-if-something-breaks","title":"4. If Something Breaks","text":"<ul> <li>Note the steps you took and any errors in the FreeCAD report view.</li> <li>Take a screenshot of the model tree and the layout.</li> <li>Send your notes and files to your SquatchCut contact or follow the UAT feedback instructions.</li> </ul> <p>That\u2019s it. Import \u2192 Set Sheet \u2192 Nest \u2192 Export.</p>"},{"location":"release-notes/","title":"Release Notes","text":""},{"location":"release-notes/#unreleased","title":"Unreleased","text":""},{"location":"release-notes/#highlights","title":"Highlights","text":"<ul> <li>Per-part 0\u00b0/90\u00b0 rotation support driven by optional <code>allow_rotate</code> CSV column and <code>SquatchCutCanRotate</code> property; defaults to no rotation when missing.</li> <li>Separate kerf (between adjacent parts) and gap/halo (around parts and sheet edges) controls passed into nesting.</li> <li>New Export Nesting CSV command with a save dialog; exports sheet index, part id, true dimensions, x/y, and angle without inflating sizes.</li> <li>Hardened CSV import with required-column validation, per-row skipping with warnings, and user-facing error dialogs.</li> <li>Units preference (mm/in) for sheet sizing and CSV import, plus CSV units selector in the task panel.</li> <li>Fixed sheet size defaults so factory values align with the active units, user defaults persist across reloads, and the preset dropdown only highlights exact matches while remaining blank otherwise.</li> <li>Centralized view switching so source vs nested views now rely on a controller that hides irrelevant geometry, fits the camera, and cleans out stale layouts before each nesting run.</li> <li>Export Cutlist command for CSV rip/crosscut lists, with cutline de-duplication and panel-crossing filters to reduce noise.</li> </ul>"},{"location":"release-notes/#notes","title":"Notes","text":"<ul> <li><code>allow_rotate</code> is optional; omitting the column keeps rotation disabled for all parts.</li> <li>Kerf applies only between parts; gap pushes parts away from sheet edges.</li> </ul>"},{"location":"release-notes/#v010-first-prototype-release","title":"v0.1.0 \u2014 First prototype release","text":""},{"location":"release-notes/#highlights_1","title":"Highlights","text":"<ul> <li>FreeCAD workbench scaffolded with core commands: Add Shapes, Import CSV, Set Sheet Size, Run Nesting, Export Report, and Preferences.</li> <li>Nesting backend handles panel extraction, CSV loading, multi-sheet rectangular nesting (Skyline/Guillotine hybrid), geometry generation, and report exports.</li> <li>TypeScript CSV validation/preprocessing CLI (<code>npx squatchcut-csv</code>) for sanitizing panel lists before import.</li> <li>End-to-end coverage: FreeCAD CSV and geometry flows, plus Node-based CLI smoke tests with shared fixtures.</li> <li>Documentation and automation: MVP scope, architecture overview, testing guide, and Codex workflow playbooks published to the MkDocs site.</li> </ul>"},{"location":"release-notes/#notes-known-gaps","title":"Notes &amp; known gaps","text":"<ul> <li>Prototype focuses on rectangular panels; curved/grain-aware nesting and richer previews are future work.</li> <li>Expect iteration on export formats (DXF/SVG), material-aware optimization, and UI polish in subsequent releases.</li> </ul>"},{"location":"reporting_bugs/","title":"Feedback, Bugs, and Feature Requests","text":"<p>If you run into a problem with SquatchCut or have an idea to make it better, you\u2019re in the right place.</p>"},{"location":"reporting_bugs/#bug-reports","title":"Bug reports","text":"<p>Use a bug report when something is broken or clearly wrong, for example: - Crashes or errors - Parts overlapping unexpectedly - Layouts that don\u2019t match the input - UI elements that don\u2019t respond or behave strangely</p> <p>Where to report bugs: - GitHub Issues (Bug report template):   https://github.com/stevenfarmer/SquatchCut/issues/new/choose</p> <p>When you open a bug, it helps a lot if you include:</p> <ul> <li>What you were trying to do   e.g., \u201cImport CSV and run nesting on a 4x8 sheet using imperial units\u201d</li> <li>Steps to reproduce:</li> <li>Open FreeCAD</li> <li>Open SquatchCut</li> <li>Import CSV <code>&lt;filename&gt;</code></li> <li>Set sheet size to <code>...</code></li> <li>Click Preview SquatchCut</li> <li>What you expected to happen</li> <li>What actually happened (including any error messages)</li> <li>Attachments (if possible):</li> <li>The CSV file you used</li> <li>Screenshots of the layout or error</li> <li>Your FreeCAD version</li> <li>Your SquatchCut version</li> <li>Whether you used metric or imperial units, and CSV units</li> </ul> <p>You can also use the \u201cReport a Bug\u201d button in the SquatchCut Task Panel inside FreeCAD to open the issue tracker directly in your browser.</p>"},{"location":"reporting_bugs/#feature-requests-and-enhancements","title":"Feature requests and enhancements","text":"<p>Use a feature request when: - You\u2019d like SquatchCut to do something it doesn\u2019t do today - You want a workflow improvement or UX tweak - You have an idea for a new option, setting, export, or visualization</p> <p>Where to request features: - GitHub Issues (Feature request template):   https://github.com/stevenfarmer/SquatchCut/issues/new/choose</p> <p>When requesting a feature, please include:</p> <ul> <li>What problem you\u2019re trying to solve   e.g., \u201cI want to print labeled cut sheets for my cabinet shop\u201d</li> <li>How you work today (manual process, other tools, etc.)</li> <li>What an ideal solution in SquatchCut would look like</li> <li>Any example screenshots or attachments that help explain it</li> </ul> <p>Even small ideas are welcome; they help shape the roadmap.</p>"},{"location":"roadmap/","title":"SquatchCut Roadmap","text":""},{"location":"roadmap/#icebox-long-term-ideas","title":"Icebox / Long-Term Ideas","text":"<ul> <li>Polygon Nesting / Full 2D Bin Packing Support (Icebox)   Consider adding support for arbitrary polygon nesting (L-shapes, concave pieces, curves, CNC contours, etc.).   This would involve:  </li> <li>Extracting polygon outlines from FreeCAD shapes  </li> <li>Computing no-fit polygons  </li> <li>Rotation sweep tests  </li> <li>Collision detection using SAT/Minkowski sums  </li> <li>Optional heuristic or genetic optimization   This feature is extremely complex and computationally heavy and should not be implemented until there is a strong, real user need.   For now, rectangle-only nesting is sufficient for woodshop workflows, and polygon nesting is deferred indefinitely unless justified.</li> </ul>"},{"location":"user_guide/","title":"SquatchCut User Guide","text":"<p>Version: v0.1 (UAT Build) Applies to: FreeCAD 1.0+ and the SquatchCut add-on Refer to <code>docs/Project_Guide_v3.2.md</code> for the authoritative v3.2 Codex, UI, and hydration principles.</p>"},{"location":"user_guide/#1-what-is-squatchcut","title":"1. What is SquatchCut?","text":"<p>SquatchCut is a FreeCAD add-on that helps you:</p> <ul> <li>Import a rectangular parts list (from CSV)</li> <li>Define your sheet / panel size</li> <li>Automatically nest those parts on the sheet</li> <li>Visualize the layout so you can cut it in the shop</li> </ul> <p>It\u2019s designed for:</p> <ul> <li>Woodworkers</li> <li>Cabinet shops</li> <li>Makers</li> <li>Anyone who hates wasting plywood</li> </ul> <p>You do not need to know how to code or use GitHub to use SquatchCut.</p>"},{"location":"user_guide/#2-requirements","title":"2. Requirements","text":"<p>To use SquatchCut, you\u2019ll need:</p> <ul> <li>FreeCAD 1.0+ installed</li> <li>The SquatchCut add-on ZIP file provided to you</li> <li>(Optional) A basic understanding of:</li> <li>Sheet goods (plywood, MDF, etc.)</li> <li>Width/height measurements</li> <li>Metric (mm) or Imperial (inches)</li> </ul>"},{"location":"user_guide/#3-installing-squatchcut","title":"3. Installing SquatchCut","text":"<ol> <li>Open FreeCAD.</li> <li>Go to Tools \u2192 Add-on Manager.</li> <li>Click Install from ZIP.</li> <li>Browse to and select the SquatchCut ZIP you were given.</li> <li>Wait for the installation to complete.</li> <li>Restart FreeCAD.</li> </ol> <p>After restart, you should see a SquatchCut toolbar or menu with:</p> <ul> <li>A main SquatchCut button</li> <li>A Settings button</li> </ul> <p>If you do not see these, make sure the add-on is enabled in the Add-on Manager.</p>"},{"location":"user_guide/#4-basic-concepts","title":"4. Basic Concepts","text":"<p>There are three main things SquatchCut manages:</p> <ol> <li>Sheet </li> <li>The panel or plywood sheet you are cutting from.  </li> <li> <p>Example: 4\u2032 \u00d7 8\u2032 (1220 \u00d7 2440 mm).</p> </li> <li> <p>Source Parts </p> </li> <li>Rectangular parts defined in your CSV file.  </li> <li> <p>These are the requested pieces you want to cut.</p> </li> <li> <p>Nested Parts </p> </li> <li>The placed parts on the sheet after you run nesting.  </li> <li>This is the layout you\u2019ll actually cut.</li> </ol> <p>SquatchCut keeps these organized in the FreeCAD document as:</p> <ul> <li>One sheet object (e.g. <code>SquatchCut_Sheet</code>)</li> <li>One group containing source parts</li> <li>One group containing nested parts</li> </ul>"},{"location":"user_guide/#5-csv-format","title":"5. CSV Format","text":"<p>SquatchCut expects your CSV to have at least the following columns:</p> <ul> <li><code>width</code>   \u2013 numeric value (either mm or inches)</li> <li><code>height</code>  \u2013 numeric value (either mm or inches)</li> <li><code>id</code>      \u2013 an identifier (part name or ID)</li> </ul> <p>Optional columns:</p> <ul> <li><code>quantity</code> \u2013 how many of that part (defaults to 1 if missing)</li> <li><code>label</code>    \u2013 text label for display</li> </ul>"},{"location":"user_guide/#units","title":"Units","text":"<p>The CSV units are controlled in the SquatchCut UI:</p> <ul> <li>If set to Metric, CSV values are treated as millimeters.</li> <li>If set to Imperial, CSV values are treated as inches.</li> </ul> <p>Imperial values may support fractional notation depending on your current build (e.g., <code>48</code>, <code>48.5</code>, <code>48 3/4</code>).</p>"},{"location":"user_guide/#6-first-time-setup-settings-panel","title":"6. First-Time Setup (Settings Panel)","text":"<p>Before your first real nesting session, configure SquatchCut:</p> <ol> <li>Click the Settings button on the SquatchCut toolbar.</li> <li>Choose your Measurement System:</li> <li>Metric \u2192 all sheet and gap values in mm</li> <li>Imperial \u2192 sheet and gap values in inches (often fractional)</li> <li>Set your default sheet size, for example:</li> <li>1220 \u00d7 2440 mm</li> <li>or 48 \u00d7 96 in</li> <li>Set:</li> <li>Kerf width \u2013 thickness of your saw blade (e.g. 3 mm or ~1/8\")</li> <li>Gap \u2013 spacing between parts (e.g. 2 mm or 1/16\")</li> <li>Click the Save / Apply button in the settings.</li> </ol> <p>These defaults will be used when you open the main SquatchCut panel.</p> <p>You can change them later at any time.</p>"},{"location":"user_guide/#7-typical-workflow","title":"7. Typical Workflow","text":""},{"location":"user_guide/#step-1-open-the-squatchcut-panel","title":"Step 1 \u2013 Open the SquatchCut Panel","text":"<ol> <li>Click the SquatchCut button in the toolbar.</li> <li>The main Task Panel will appear (usually on the left side).</li> </ol> <p>You\u2019ll see sections for:</p> <ul> <li>CSV Import</li> <li>Sheet &amp; Presets</li> <li>Nesting / Results</li> </ul>"},{"location":"user_guide/#step-2-set-csv-units-import-parts","title":"Step 2 \u2013 Set CSV Units &amp; Import Parts","text":"<ol> <li>In the CSV Import section:</li> <li>Select CSV Units (Metric or Imperial) to match your file.</li> <li>Choose your CSV file:</li> <li>Use the Browse or Select File button (exact label may vary).</li> <li>Confirm that the file path appears in the UI.</li> <li>Click Import Parts.</li> </ol> <p>What should happen:</p> <ul> <li>The CSV is parsed.</li> <li>A Source Parts group is created or rebuilt in the FreeCAD document.</li> <li>Rectangles are created for each part.</li> <li>The 3D view updates to show the parts (depending on your current camera).</li> </ul> <p>If anything fails, check the on-screen status message and the FreeCAD report view.</p>"},{"location":"user_guide/#step-3-check-parts-in-the-model","title":"Step 3 \u2013 Check Parts in the Model","text":"<p>After import:</p> <ul> <li>Look for a group called something like <code>SquatchCut_SourceParts</code>.</li> <li>Expand it in the Model tree to see individual part rectangles.</li> <li>Optionally, select a few parts and check their Data properties to confirm:</li> <li>width</li> <li>height</li> <li>label or id</li> </ul> <p>If widths/heights look wrong, double-check:</p> <ul> <li>CSV units (Metric vs Imperial)</li> <li>The CSV columns and formatting</li> </ul>"},{"location":"user_guide/#step-4-set-sheet-size-presets","title":"Step 4 \u2013 Set Sheet Size &amp; Presets","text":"<p>In the Sheet &amp; Presets section:</p> <ol> <li>Check that the Sheet Width and Sheet Height fields match your panel size.</li> <li>On first run, these may come from your saved defaults (e.g. 4\u2032 \u00d7 8\u2032).</li> <li>Use the Preset combo box if desired:</li> <li><code>None / Custom</code></li> <li><code>4\u2032 x 8\u2032</code></li> <li><code>2\u2032 x 4\u2032</code></li> <li><code>5\u2032 x 10\u2032</code></li> <li>Behavior:</li> <li>When you pick a preset:<ul> <li>The sheet width/height fields update to that preset.</li> <li>Defaults in settings do not change.</li> </ul> </li> <li>When you manually edit width/height:<ul> <li>The preset selection resets to <code>None / Custom</code>.</li> </ul> </li> </ol> <p>After changing sheet size, the sheet object in the 3D view should resize accordingly.</p>"},{"location":"user_guide/#step-5-adjust-kerf-gaps-if-available-in-ui","title":"Step 5 \u2013 Adjust Kerf &amp; Gaps (if available in UI)","text":"<p>If the main panel exposes kerf and gap fields:</p> <ul> <li>Kerf \u2013 saw blade thickness:</li> <li>Larger kerf means fewer parts may fit on a sheet.</li> <li>Gap \u2013 spacing between parts:</li> <li>Prevents paper-thin slivers between cuts.</li> </ul> <p>Set these according to your tool and comfort level.</p>"},{"location":"user_guide/#step-6-run-nesting","title":"Step 6 \u2013 Run Nesting","text":"<ol> <li>In the Nesting section, click Run Nesting.</li> <li>SquatchCut will:</li> <li>Read your sheet size and all source parts.</li> <li>Run the nesting algorithm.</li> <li>Place rectangles onto the sheet as nested parts.</li> </ol> <p>In the FreeCAD document:</p> <ul> <li>A <code>SquatchCut_NestedParts</code> group should appear or be rebuilt.</li> <li>Only the most recent nesting run should be visible in that group:</li> <li>Old nested layouts are cleared each run.</li> </ul>"},{"location":"user_guide/#step-7-inspect-the-layout","title":"Step 7 \u2013 Inspect the Layout","text":"<p>Use the 3D view to verify:</p> <ul> <li>Parts are all inside the sheet.</li> <li>No obvious overlaps (rectangles shouldn\u2019t be on top of each other).</li> <li>Orientation and sizing look correct.</li> </ul> <p>You can:</p> <ul> <li>Toggle visibility of the Source Parts group to see just the nested layout.</li> <li>Select individual nested parts to inspect their properties.</li> </ul>"},{"location":"user_guide/#step-8-save-export","title":"Step 8 \u2013 Save / Export","text":"<p>SquatchCut uses ordinary FreeCAD geometry, so you can:</p> <ul> <li>Save the entire FreeCAD document as usual: File \u2192 Save</li> <li>Export to DXF/SVG/PDF using:   File \u2192 Export</li> </ul> <p>Recommended workflow:</p> <ul> <li>Save a \u201clayout copy\u201d of your file before heavy editing.</li> <li>Use File \u2192 Export to create:</li> <li>DXF for CAD/CAM</li> <li>SVG or PDF for printing and shop drawings</li> </ul>"},{"location":"user_guide/#8-troubleshooting","title":"8. Troubleshooting","text":""},{"location":"user_guide/#i-dont-see-the-squatchcut-toolbar","title":"I don\u2019t see the SquatchCut toolbar","text":"<ul> <li>Make sure the add-on is installed via the Add-on Manager.</li> <li>Restart FreeCAD after installation.</li> <li>Check View \u2192 Toolbars and ensure SquatchCut is enabled.</li> </ul>"},{"location":"user_guide/#csv-import-fails-or-parts-look-wrong","title":"CSV import fails or parts look wrong","text":"<ul> <li>Confirm the CSV has <code>width</code>, <code>height</code>, and <code>id</code> columns.</li> <li>Check that you selected the correct CSV Units (Metric vs Imperial).</li> <li>Make sure there are no extra header rows or strange formatting.</li> </ul>"},{"location":"user_guide/#i-get-multiple-sheets-or-random-junk-in-the-tree","title":"I get multiple sheets or random junk in the tree","text":"<ul> <li>In a current UAT build, there should only be:</li> <li>One sheet object,</li> <li>One Source group,</li> <li>One Nested group.</li> <li>If you see duplicates, note:</li> <li>The steps that caused it,</li> <li>FreeCAD version, OS, and CSV file,</li> <li>Then report it back using the UAT Feedback instructions.</li> </ul>"},{"location":"user_guide/#nesting-runs-but-nothing-appears","title":"Nesting runs but nothing appears","text":"<ul> <li>Verify that there are:</li> <li>Imported source parts,</li> <li>A non-zero sheet size.</li> <li>Check the FreeCAD report view for error messages.</li> <li>Try with a small, simple CSV (e.g. a few parts) to isolate issues.</li> </ul>"},{"location":"user_guide/#9-getting-help-reporting-issues","title":"9. Getting Help / Reporting Issues","text":"<p>If you\u2019re part of a UAT or volunteer test group:</p> <ul> <li>Follow the instructions in <code>UAT_Prep_Instructions.md</code> and <code>UAT_Checklist.md</code>.</li> <li>Use the provided feedback form or instructions from your test coordinator.</li> <li>Include:</li> <li>What you were trying to do</li> <li>What you expected</li> <li>What actually happened</li> <li>Screenshots if possible</li> </ul> <p>Thanks for helping test SquatchCut!</p>"},{"location":"dev/testing/","title":"Testing","text":""},{"location":"dev/testing/#fixtures","title":"Fixtures","text":"<ul> <li>FreeCAD fixtures: <code>freecad/testing/</code></li> <li>CSV fixtures: <code>freecad/testing/csv/</code>, <code>ts-tools/test-data/</code></li> </ul>"},{"location":"dev/testing/#freecad-e2e","title":"FreeCAD E2E","text":"<ul> <li>CSV flow:   <code>python   from SquatchCut.testing.e2e_mvp_csv_flow import main   main()</code></li> <li>Geometry flow:   <code>python   from SquatchCut.testing.e2e_mvp_geometry_flow import main   main()</code></li> </ul>"},{"location":"dev/testing/#ts-tools-e2e","title":"TS Tools E2E","text":"<pre><code>cd ts-tools\nnpm run build\nnpm run e2e\n</code></pre>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>FreeCAD (recent stable release)</li> <li>Python (for running tests inside FreeCAD environment)</li> <li>Node.js and npm (for ts-tools)</li> </ul>"},{"location":"getting-started/installation/#installing-the-squatchcut-workbench","title":"Installing the SquatchCut workbench","text":"<ol> <li>Clone this repository into FreeCAD's Mod directory:</li> <li>Linux/macOS: <code>~/.local/share/FreeCAD/Mod/</code></li> <li>Windows: <code>%APPDATA%\\FreeCAD\\Mod\\</code></li> <li>Restart FreeCAD.</li> <li>Choose SquatchCut from the Workbench dropdown.</li> </ol>"},{"location":"getting-started/installation/#installing-ts-tools","title":"Installing ts-tools","text":"<pre><code>cd ts-tools\nnpm install\nnpm run build\n</code></pre>"},{"location":"getting-started/workflow/","title":"Basic Workflow","text":""},{"location":"getting-started/workflow/#typical-steps","title":"Typical Steps","text":"<ol> <li>Add shapes from the document or import a CSV panel list.</li> <li>Set sheet size and kerf.</li> <li>Run nesting.</li> <li>Inspect the generated layout in FreeCAD.</li> <li>Export reports (PDF/CSV).</li> </ol>"},{"location":"getting-started/workflow/#quickstart","title":"Quickstart","text":"<ol> <li>Open a document with rectangles (or import a CSV).</li> <li>Click Sheet Size and confirm dimensions/kerf.</li> <li>Click Run Nesting to generate sheet layouts.</li> <li>Check the created sheet groups and panel rectangles.</li> <li>Click Export Report to produce PDF/CSV outputs.</li> </ol>"},{"location":"user/commands/","title":"Commands &amp; Tools","text":""},{"location":"user/commands/#add-shapes","title":"Add Shapes","text":"<ul> <li>Extracts selected rectangles/shapes from the active document into panels.</li> <li>Use when you have geometry in FreeCAD to convert into panel data.</li> <li>Caveats: Works on supported planar shapes; skips unsupported objects.</li> </ul>"},{"location":"user/commands/#import-csv","title":"Import CSV","text":"<ul> <li>Loads panel data from a CSV file.</li> <li>Use when panel dimensions are defined externally.</li> <li>Caveats: Ensure required columns (id, width, height; optional grain_direction; optional allow_rotate). Missing <code>allow_rotate</code> defaults to no rotation. Invalid rows are skipped with warnings. CSV units can be set per import (metric/imperial); internally everything is stored in mm.</li> </ul>"},{"location":"user/commands/#run-nesting","title":"Run Nesting","text":"<ul> <li>Executes multi-sheet rectangular nesting for current panels.</li> <li>Use after panels are gathered and sheet size is set.</li> <li>Caveats: Panels must have valid dimensions; uses simple Skyline/Guillotine hybrid with per-part 0\u00b0/90\u00b0 rotation. Kerf applies between parts; gap/halo pushes parts off sheet edges. If nothing is selected, all tagged panels are used; if a subset is selected, only that subset nests.</li> </ul>"},{"location":"user/commands/#sheet-size","title":"Sheet Size","text":"<ul> <li>Configures sheet dimensions and spacing.</li> <li>Use before nesting to define material size.</li> <li>Caveats: Defaults to 2440 x 1220 if not set. Kerf (between parts) and gap/halo (around parts/edges) default to 0 and can be set on the document. Sheet size spin boxes display the current units preference (mm or in).</li> </ul>"},{"location":"user/commands/#export-report","title":"Export Report","text":"<ul> <li>Generates PDF/CSV reports from the last nesting run.</li> <li>Use after nesting completes.</li> <li>Caveats: Requires a completed nesting run in the current session.</li> </ul>"},{"location":"user/commands/#export-nesting-csv","title":"Export Nesting CSV","text":"<ul> <li>Saves the most recent nesting layout as a CSV (choose path via save dialog).</li> <li>Use after nesting completes.</li> <li>Caveats: Writes sheet index, part id, true width/height, x/y, and angle (0/90). Kerf/gap are layout-only and not exported.</li> </ul>"},{"location":"user/commands/#export-cutlist-csv","title":"Export Cutlist (CSV)","text":"<ul> <li>Generates a shop-friendly cutlist from the current nested sheets and lets you save it as CSV.</li> <li>Use after nesting completes to hand a rip/crosscut plan to the shop floor.</li> <li>Caveats: Cut lines are de-duplicated within a 4 mm tolerance and only emitted when they cross at least one panel.</li> </ul>"},{"location":"user/commands/#toggle-source-panels","title":"Toggle Source Panels","text":"<ul> <li>Shows/hides the original SourcePanels group.</li> <li>Use to reveal or hide the originals that were offset left when nesting.</li> <li>Caveats: SourcePanels remains unchanged; clones on sheets are independent.</li> </ul>"},{"location":"user/commands/#preferences","title":"Preferences","text":"<ul> <li>Accesses SquatchCut preference options.</li> <li>Use to adjust default behaviors, including units preference (metric/imperial).</li> <li>Caveats: Minimal UI in MVP; sheet size dialog handles key settings.</li> </ul>"},{"location":"user/csv_and_ts_tools/","title":"CSV &amp; TS Tools","text":""},{"location":"user/csv_and_ts_tools/#csv-panel-format","title":"CSV Panel Format","text":"<ul> <li>Required columns: <code>id</code>, <code>width</code>, <code>height</code></li> <li>Optional: <code>grain_direction</code> (or <code>grainDirection</code>)</li> <li>Units: millimeters</li> </ul>"},{"location":"user/csv_and_ts_tools/#validation-with-ts-tools","title":"Validation with ts-tools","text":"<ul> <li>The <code>ts-tools</code> package validates and normalizes panel CSVs.</li> <li>Errors are collected without aborting on first failure.</li> </ul>"},{"location":"user/csv_and_ts_tools/#cli-usage","title":"CLI Usage","text":"<pre><code>cd ts-tools\nnpm run build\nnpx squatchcut-csv path/to/file.csv\n</code></pre>"},{"location":"user/csv_and_ts_tools/#workflow-integration","title":"Workflow Integration","text":"<ul> <li>Validate CSVs before importing into FreeCAD.</li> <li>Use clean panels to improve nesting outcomes.</li> </ul>"}]}